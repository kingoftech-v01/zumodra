# Generated by Django 5.2.7 on 2026-01-02 10:10

import datetime
import django.contrib.gis.db.models.fields
import django.contrib.postgres.fields
import django.contrib.postgres.search
import django.core.validators
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Application',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Created at')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('status', models.CharField(choices=[('new', 'New'), ('in_review', 'In Review'), ('shortlisted', 'Shortlisted'), ('interviewing', 'Interviewing'), ('offer_pending', 'Offer Pending'), ('offer_extended', 'Offer Extended'), ('hired', 'Hired'), ('rejected', 'Rejected'), ('withdrawn', 'Withdrawn'), ('on_hold', 'On Hold')], default='new', max_length=20)),
                ('cover_letter', models.TextField(blank=True)),
                ('custom_answers', models.JSONField(blank=True, default=dict)),
                ('additional_documents', models.JSONField(blank=True, default=list)),
                ('overall_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('ai_match_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('rejection_reason', models.CharField(blank=True, max_length=200)),
                ('rejection_feedback', models.TextField(blank=True)),
                ('send_rejection_email', models.BooleanField(default=True)),
                ('utm_source', models.CharField(blank=True, max_length=100)),
                ('utm_medium', models.CharField(blank=True, max_length=100)),
                ('utm_campaign', models.CharField(blank=True, max_length=100)),
                ('referrer_url', models.URLField(blank=True)),
                ('applied_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_stage_change_at', models.DateTimeField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('hired_at', models.DateTimeField(blank=True, null=True)),
                ('rejected_at', models.DateTimeField(blank=True, null=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, verbose_name='Is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('version', models.PositiveIntegerField(default=1, help_text='Record version for optimistic locking.', verbose_name='Version')),
            ],
            options={
                'verbose_name': 'Application',
                'verbose_name_plural': 'Applications',
                'ordering': ['-applied_at'],
            },
        ),
        migrations.CreateModel(
            name='ApplicationActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('activity_type', models.CharField(choices=[('created', 'Application Created'), ('status_change', 'Status Changed'), ('stage_change', 'Stage Changed'), ('note_added', 'Note Added'), ('email_sent', 'Email Sent'), ('interview_scheduled', 'Interview Scheduled'), ('feedback_submitted', 'Feedback Submitted'), ('rating_updated', 'Rating Updated'), ('document_uploaded', 'Document Uploaded'), ('assigned', 'Assigned to Reviewer'), ('offer_created', 'Offer Created'), ('offer_accepted', 'Offer Accepted'), ('offer_declined', 'Offer Declined')], max_length=30)),
                ('old_value', models.CharField(blank=True, max_length=200)),
                ('new_value', models.CharField(blank=True, max_length=200)),
                ('notes', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Application Activity',
                'verbose_name_plural': 'Application Activities',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ApplicationNote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('content', models.TextField()),
                ('is_private', models.BooleanField(default=False, help_text='Private notes are only visible to recruiters')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Application Note',
                'verbose_name_plural': 'Application Notes',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Candidate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft deletion flag.', verbose_name='Is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when the record was soft-deleted.', null=True, verbose_name='Deleted at')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(blank=True, max_length=30)),
                ('headline', models.CharField(blank=True, max_length=200)),
                ('summary', models.TextField(blank=True, validators=[django.core.validators.MaxLengthValidator(5000)])),
                ('current_company', models.CharField(blank=True, max_length=200)),
                ('current_title', models.CharField(blank=True, max_length=200)),
                ('years_experience', models.PositiveIntegerField(blank=True, null=True)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('state', models.CharField(blank=True, max_length=100)),
                ('country', models.CharField(blank=True, max_length=100)),
                ('willing_to_relocate', models.BooleanField(default=False)),
                ('location_coordinates', django.contrib.gis.db.models.fields.PointField(blank=True, null=True, srid=4326)),
                ('resume', models.FileField(blank=True, help_text='Allowed formats: PDF, DOC, DOCX, RTF, TXT. Max size: 10MB', null=True, upload_to='resumes/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'rtf', 'txt'])])),
                ('resume_text', models.TextField(blank=True, help_text='Parsed resume text')),
                ('cover_letter', models.TextField(blank=True, validators=[django.core.validators.MaxLengthValidator(10000)])),
                ('portfolio_url', models.URLField(blank=True)),
                ('skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('education', models.JSONField(blank=True, default=list)),
                ('certifications', models.JSONField(blank=True, default=list)),
                ('work_experience', models.JSONField(blank=True, default=list)),
                ('languages', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, size=None)),
                ('linkedin_url', models.URLField(blank=True)),
                ('github_url', models.URLField(blank=True)),
                ('twitter_url', models.URLField(blank=True)),
                ('website_url', models.URLField(blank=True)),
                ('desired_salary_min', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('desired_salary_max', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('notice_period_days', models.PositiveIntegerField(blank=True, null=True)),
                ('work_authorization', models.CharField(blank=True, max_length=100)),
                ('source', models.CharField(choices=[('career_page', 'Career Page'), ('linkedin', 'LinkedIn'), ('indeed', 'Indeed'), ('referral', 'Employee Referral'), ('agency', 'Recruitment Agency'), ('direct', 'Direct Application'), ('imported', 'Imported'), ('other', 'Other')], default='direct', max_length=20)),
                ('source_detail', models.CharField(blank=True, max_length=200)),
                ('search_vector', django.contrib.postgres.search.SearchVectorField(blank=True, null=True)),
                ('tags', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, size=None)),
                ('consent_to_store', models.BooleanField(default=True)),
                ('consent_date', models.DateTimeField(blank=True, null=True)),
                ('data_retention_until', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_activity_at', models.DateTimeField(blank=True, null=True)),
                ('version', models.PositiveIntegerField(default=1, help_text='Record version for optimistic locking.', verbose_name='Version')),
            ],
            options={
                'verbose_name': 'Candidate',
                'verbose_name_plural': 'Candidates',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Interview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('interview_type', models.CharField(choices=[('phone', 'Phone Screen'), ('video', 'Video Interview'), ('in_person', 'In-Person'), ('technical', 'Technical Interview'), ('panel', 'Panel Interview'), ('assessment', 'Assessment/Test'), ('final', 'Final Interview'), ('culture_fit', 'Culture Fit'), ('case_study', 'Case Study'), ('behavioral', 'Behavioral Interview')], default='video', max_length=20)),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('confirmed', 'Confirmed'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('no_show', 'No Show'), ('rescheduled', 'Rescheduled')], default='scheduled', max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('scheduled_start', models.DateTimeField()),
                ('scheduled_end', models.DateTimeField()),
                ('timezone', models.CharField(default='America/Toronto', max_length=50)),
                ('actual_start', models.DateTimeField(blank=True, null=True)),
                ('actual_end', models.DateTimeField(blank=True, null=True)),
                ('candidate_timezone', models.CharField(blank=True, help_text="Candidate's timezone for scheduling convenience", max_length=50)),
                ('location', models.CharField(blank=True, max_length=300)),
                ('meeting_url', models.URLField(blank=True, help_text='Video conferencing link')),
                ('meeting_id', models.CharField(blank=True, max_length=100)),
                ('meeting_password', models.CharField(blank=True, max_length=50)),
                ('meeting_provider', models.CharField(blank=True, choices=[('zoom', 'Zoom'), ('teams', 'Microsoft Teams'), ('meet', 'Google Meet'), ('webex', 'Cisco Webex'), ('custom', 'Custom/Other')], help_text='Video conferencing platform', max_length=20)),
                ('meeting_link', models.URLField(blank=True, help_text='Alternative meeting link field for custom providers')),
                ('calendar_event_id', models.CharField(blank=True, help_text='External calendar event ID (Google, Outlook, etc.)', max_length=255)),
                ('calendar_provider', models.CharField(blank=True, help_text='Calendar provider (google, outlook, ical)', max_length=50)),
                ('candidate_calendar_event_id', models.CharField(blank=True, help_text='Calendar event ID sent to candidate', max_length=255)),
                ('candidate_notified', models.BooleanField(default=False)),
                ('interviewers_notified', models.BooleanField(default=False)),
                ('reminder_sent_1day', models.BooleanField(default=False, help_text='Whether 1-day reminder was sent')),
                ('reminder_sent_1hour', models.BooleanField(default=False, help_text='Whether 1-hour reminder was sent')),
                ('reminder_sent_15min', models.BooleanField(default=False, help_text='Whether 15-minute reminder was sent')),
                ('preparation_notes', models.TextField(blank=True)),
                ('interview_guide', models.TextField(blank=True)),
                ('cancellation_reason', models.TextField(blank=True, help_text='Reason for cancellation if cancelled')),
                ('reschedule_count', models.PositiveIntegerField(default=0, help_text='Number of times this interview has been rescheduled')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('confirmed_at', models.DateTimeField(blank=True, help_text='When the candidate confirmed attendance', null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Interview',
                'verbose_name_plural': 'Interviews',
                'ordering': ['scheduled_start'],
            },
        ),
        migrations.CreateModel(
            name='InterviewFeedback',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('overall_rating', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('technical_skills', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('communication', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('cultural_fit', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('problem_solving', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('recommendation', models.CharField(choices=[('strong_yes', 'Strong Yes'), ('yes', 'Yes'), ('maybe', 'Maybe'), ('no', 'No'), ('strong_no', 'Strong No')], max_length=20)),
                ('strengths', models.TextField(blank=True)),
                ('weaknesses', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('private_notes', models.TextField(blank=True, help_text='Only visible to HR/admins')),
                ('custom_ratings', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Interview Feedback',
                'verbose_name_plural': 'Interview Feedback',
            },
        ),
        migrations.CreateModel(
            name='InterviewSlot',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('start_time', models.DateTimeField()),
                ('end_time', models.DateTimeField()),
                ('is_available', models.BooleanField(default=True, help_text='Whether this slot is available for booking')),
                ('timezone', models.CharField(default='UTC', max_length=50)),
                ('recurring', models.BooleanField(default=False, help_text='Whether this slot repeats')),
                ('recurrence_rule', models.CharField(blank=True, help_text='iCal RRULE format (e.g., FREQ=WEEKLY;BYDAY=MO,WE,FR)', max_length=255)),
                ('recurrence_end_date', models.DateField(blank=True, help_text='When the recurring slot series ends', null=True)),
                ('booked_at', models.DateTimeField(blank=True, null=True)),
                ('slot_type', models.CharField(blank=True, help_text='Type of interviews this slot is for (e.g., phone, technical)', max_length=50)),
                ('notes', models.TextField(blank=True, help_text='Notes about this availability slot')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Interview Slot',
                'verbose_name_plural': 'Interview Slots',
                'ordering': ['start_time'],
            },
        ),
        migrations.CreateModel(
            name='InterviewTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(help_text='Name of the interview template', max_length=100)),
                ('interview_type', models.CharField(choices=[('phone', 'Phone Screen'), ('video', 'Video Interview'), ('in_person', 'In-Person'), ('technical', 'Technical Interview'), ('panel', 'Panel Interview'), ('assessment', 'Assessment/Test'), ('final', 'Final Interview'), ('culture_fit', 'Culture Fit'), ('case_study', 'Case Study'), ('behavioral', 'Behavioral Interview')], default='video', max_length=20)),
                ('default_duration', models.DurationField(default=datetime.timedelta(seconds=3600), help_text='Default duration for interviews using this template')),
                ('required_interviewers', models.PositiveIntegerField(default=1, help_text='Minimum number of interviewers required', validators=[django.core.validators.MinValueValidator(1)])),
                ('questions', models.JSONField(blank=True, default=list, help_text='List of questions with structure: [{"question": "...", "category": "...", "expected_answer": "...", "weight": 1}]')),
                ('scorecard_criteria', models.JSONField(blank=True, default=list, help_text='Rating criteria with structure: [{"name": "...", "description": "...", "weight": 1, "max_score": 5}]')),
                ('instructions', models.TextField(blank=True, help_text='Instructions for interviewers using this template')),
                ('preparation_guide', models.TextField(blank=True, help_text='Preparation guide for interviewers')),
                ('candidate_instructions', models.TextField(blank=True, help_text='Instructions to send to candidates')),
                ('is_active', models.BooleanField(default=True)),
                ('allow_multiple_interviewers', models.BooleanField(default=True, help_text='Whether multiple interviewers can conduct this interview type')),
                ('requires_feedback_before_discussion', models.BooleanField(default=True, help_text="Interviewers must submit feedback before seeing others' feedback")),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_level', models.CharField(blank=True, help_text='Job level this template is designed for (e.g., Junior, Senior)', max_length=50)),
                ('skills_assessed', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, help_text='Skills that this interview assesses', size=None)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Interview Template',
                'verbose_name_plural': 'Interview Templates',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='JobCategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Updated at')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('icon', models.CharField(blank=True, help_text='Icon class name', max_length=50)),
                ('color', models.CharField(default='#3B82F6', max_length=7)),
                ('sort_order', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Job Category',
                'verbose_name_plural': 'Job Categories',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='JobPosting',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft deletion flag.', verbose_name='Is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when the record was soft-deleted.', null=True, verbose_name='Deleted at')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('slug', models.SlugField(blank=True, max_length=220)),
                ('reference_code', models.CharField(help_text='Unique job reference code', max_length=50, unique=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_approval', 'Pending Approval'), ('open', 'Open'), ('on_hold', 'On Hold'), ('closed', 'Closed'), ('filled', 'Filled'), ('cancelled', 'Cancelled')], default='draft', max_length=20)),
                ('description', models.TextField(help_text='Full job description (HTML supported)')),
                ('responsibilities', models.TextField(blank=True)),
                ('requirements', models.TextField(blank=True)),
                ('nice_to_have', models.TextField(blank=True, help_text='Preferred qualifications')),
                ('benefits', models.TextField(blank=True)),
                ('job_type', models.CharField(choices=[('full_time', 'Full-time'), ('part_time', 'Part-time'), ('contract', 'Contract'), ('internship', 'Internship'), ('temporary', 'Temporary'), ('freelance', 'Freelance')], default='full_time', max_length=20)),
                ('experience_level', models.CharField(choices=[('entry', 'Entry Level'), ('junior', 'Junior (1-2 years)'), ('mid', 'Mid-Level (3-5 years)'), ('senior', 'Senior (5-8 years)'), ('lead', 'Lead (8+ years)'), ('executive', 'Executive')], default='mid', max_length=20)),
                ('remote_policy', models.CharField(choices=[('on_site', 'On-site'), ('remote', 'Fully Remote'), ('hybrid', 'Hybrid'), ('flexible', 'Flexible')], default='on_site', max_length=20)),
                ('location_city', models.CharField(blank=True, max_length=100)),
                ('location_state', models.CharField(blank=True, max_length=100)),
                ('location_country', models.CharField(blank=True, default='Canada', max_length=100)),
                ('location_coordinates', django.contrib.gis.db.models.fields.PointField(blank=True, null=True, srid=4326)),
                ('salary_min', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('salary_max', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('salary_currency', models.CharField(default='CAD', max_length=3)),
                ('salary_period', models.CharField(choices=[('hourly', 'Hourly'), ('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('yearly', 'Yearly')], default='yearly', max_length=20)),
                ('show_salary', models.BooleanField(default=False)),
                ('equity_offered', models.BooleanField(default=False)),
                ('equity_range', models.CharField(blank=True, max_length=50)),
                ('required_skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('preferred_skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('education_requirements', models.TextField(blank=True)),
                ('certifications_required', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('languages_required', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, size=None)),
                ('positions_count', models.PositiveIntegerField(default=1)),
                ('team', models.CharField(blank=True, max_length=100)),
                ('reports_to', models.CharField(blank=True, max_length=100)),
                ('application_deadline', models.DateTimeField(blank=True, null=True)),
                ('require_cover_letter', models.BooleanField(default=False)),
                ('require_resume', models.BooleanField(default=True)),
                ('custom_questions', models.JSONField(blank=True, default=list)),
                ('application_email', models.EmailField(blank=True, max_length=254)),
                ('external_apply_url', models.URLField(blank=True)),
                ('is_internal_only', models.BooleanField(default=False)),
                ('is_featured', models.BooleanField(default=False)),
                ('published_on_career_page', models.BooleanField(default=True)),
                ('published_on_job_boards', models.JSONField(blank=True, default=list, help_text='List of job boards to publish to')),
                ('search_vector', django.contrib.postgres.search.SearchVectorField(blank=True, null=True)),
                ('meta_title', models.CharField(blank=True, max_length=200)),
                ('meta_description', models.TextField(blank=True, max_length=500)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('closed_at', models.DateTimeField(blank=True, null=True)),
                ('version', models.PositiveIntegerField(default=1, help_text='Record version for optimistic locking.', verbose_name='Version')),
            ],
            options={
                'verbose_name': 'Job Posting',
                'verbose_name_plural': 'Job Postings',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Offer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_approval', 'Pending Approval'), ('approved', 'Approved'), ('sent', 'Sent to Candidate'), ('accepted', 'Accepted'), ('declined', 'Declined'), ('expired', 'Expired'), ('withdrawn', 'Withdrawn'), ('countered', 'Counter-Offered')], default='draft', max_length=20)),
                ('approval_status', models.CharField(choices=[('not_required', 'Not Required'), ('pending_approval', 'Pending Approval'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='not_required', help_text='Current approval workflow status', max_length=20)),
                ('approval_level_required', models.PositiveIntegerField(default=0, help_text='Highest approval level required (0=none, 1=Manager, 2=Director, 3=VP, 4=C-Level)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(4)])),
                ('current_approval_level', models.PositiveIntegerField(default=0, help_text='Current approval level reached')),
                ('job_title', models.CharField(max_length=200)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('reports_to', models.CharField(blank=True, max_length=200)),
                ('start_date', models.DateField(blank=True, null=True)),
                ('employment_type', models.CharField(default='full_time', max_length=50)),
                ('base_salary', models.DecimalField(decimal_places=2, max_digits=12)),
                ('salary_currency', models.CharField(default='CAD', max_length=3)),
                ('salary_period', models.CharField(default='yearly', max_length=20)),
                ('signing_bonus', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('annual_bonus_target', models.CharField(blank=True, max_length=100)),
                ('equity', models.TextField(blank=True)),
                ('other_compensation', models.TextField(blank=True)),
                ('benefits_summary', models.TextField(blank=True)),
                ('pto_days', models.PositiveIntegerField(blank=True, null=True)),
                ('remote_policy', models.CharField(blank=True, max_length=100)),
                ('offer_letter_content', models.TextField(blank=True)),
                ('terms_and_conditions', models.TextField(blank=True)),
                ('expiration_date', models.DateField(blank=True, null=True)),
                ('requires_signature', models.BooleanField(default=True)),
                ('signature_document_id', models.CharField(blank=True, max_length=255)),
                ('signed_at', models.DateTimeField(blank=True, null=True)),
                ('esign_provider', models.CharField(blank=True, choices=[('docusign', 'DocuSign'), ('hellosign', 'HelloSign/Dropbox Sign'), ('adobe_sign', 'Adobe Sign'), ('pandadoc', 'PandaDoc'), ('manual', 'Manual/Offline')], help_text='E-signature provider (docusign, hellosign, etc.)', max_length=20)),
                ('esign_envelope_id', models.CharField(blank=True, help_text='E-signature envelope/document ID from provider', max_length=255)),
                ('esign_status', models.CharField(blank=True, help_text='E-signature status from provider', max_length=50)),
                ('esign_completed_at', models.DateTimeField(blank=True, help_text='When e-signature was completed', null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('counter_offer_count', models.PositiveIntegerField(default=0, help_text='Number of counter-offers in this negotiation')),
                ('is_counter_offer', models.BooleanField(default=False, help_text='Whether this is a counter-offer')),
                ('counter_offer_notes', models.TextField(blank=True, help_text='Notes explaining changes from previous offer')),
                ('response_notes', models.TextField(blank=True)),
                ('decline_reason', models.CharField(blank=True, max_length=200)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('responded_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Offer',
                'verbose_name_plural': 'Offers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OfferApproval',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('level', models.PositiveIntegerField(choices=[(1, 'Manager'), (2, 'Director'), (3, 'VP'), (4, 'C-Level')], default=1, help_text='Approval level: 1=Manager, 2=Director, 3=VP, 4=C-Level')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('skipped', 'Skipped'), ('expired', 'Expired')], default='pending', max_length=20)),
                ('decided_at', models.DateTimeField(blank=True, help_text='When the decision was made', null=True)),
                ('comments', models.TextField(blank=True, help_text='Comments from the approver')),
                ('requested_at', models.DateTimeField(auto_now_add=True)),
                ('due_date', models.DateTimeField(blank=True, help_text='Deadline for this approval', null=True)),
                ('notification_sent', models.BooleanField(default=False)),
                ('reminder_sent', models.BooleanField(default=False)),
                ('reminder_count', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Offer Approval',
                'verbose_name_plural': 'Offer Approvals',
                'ordering': ['offer', 'level'],
            },
        ),
        migrations.CreateModel(
            name='OfferTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(help_text='Name of the offer template', max_length=100)),
                ('job_level', models.CharField(help_text='Job level (e.g., Junior, Mid, Senior, Lead, Director)', max_length=50)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_type', models.CharField(blank=True, choices=[('full_time', 'Full-time'), ('part_time', 'Part-time'), ('contract', 'Contract'), ('internship', 'Internship'), ('temporary', 'Temporary'), ('freelance', 'Freelance')], max_length=20)),
                ('base_salary_min', models.DecimalField(decimal_places=2, help_text='Minimum base salary for this level', max_digits=12)),
                ('base_salary_max', models.DecimalField(decimal_places=2, help_text='Maximum base salary for this level', max_digits=12)),
                ('salary_currency', models.CharField(default='CAD', max_length=3)),
                ('salary_period', models.CharField(default='yearly', max_length=20)),
                ('bonus_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Target bonus as percentage of base salary', max_digits=5, null=True)),
                ('equity_shares', models.PositiveIntegerField(default=0, help_text='Number of equity shares/options')),
                ('equity_vesting_schedule', models.CharField(blank=True, help_text='e.g., "4 years with 1-year cliff"', max_length=100)),
                ('benefits_package', models.JSONField(blank=True, default=dict, help_text='Benefits structure: {"health": "...", "dental": "...", "401k": "...", "pto_days": 20}')),
                ('default_pto_days', models.PositiveIntegerField(blank=True, help_text='Default PTO days for this level', null=True)),
                ('letter_template', models.TextField(help_text='Jinja2 template for offer letter. Available variables: {{ candidate_name }}, {{ job_title }}, {{ salary }}, {{ start_date }}, etc.')),
                ('terms_template', models.TextField(blank=True, help_text='Terms and conditions template')),
                ('requires_approval', models.BooleanField(default=True, help_text='Whether offers using this template require approval')),
                ('approval_levels_required', models.PositiveIntegerField(default=1, help_text='Number of approval levels needed (0-5)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('is_active', models.BooleanField(default=True)),
                ('is_default', models.BooleanField(default=False, help_text='Use as default template for the job level')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Offer Template',
                'verbose_name_plural': 'Offer Templates',
                'ordering': ['job_level', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Pipeline',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Updated at')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('is_default', models.BooleanField(default=False, help_text='Use as default pipeline for new jobs')),
            ],
            options={
                'verbose_name': 'Pipeline',
                'verbose_name_plural': 'Pipelines',
                'ordering': ['-is_default', 'name'],
            },
        ),
        migrations.CreateModel(
            name='PipelineStage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('stage_type', models.CharField(choices=[('new', 'New/Applied'), ('screening', 'Screening'), ('assessment', 'Assessment'), ('interview', 'Interview'), ('reference', 'Reference Check'), ('offer', 'Offer'), ('hired', 'Hired'), ('rejected', 'Rejected'), ('withdrawn', 'Withdrawn'), ('on_hold', 'On Hold')], default='new', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('color', models.CharField(default='#6B7280', max_length=7)),
                ('order', models.PositiveIntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('auto_reject_after_days', models.PositiveIntegerField(default=0, help_text='Auto-reject after X days in this stage (0=disabled)')),
                ('send_email_on_enter', models.BooleanField(default=False)),
                ('email_template_id', models.CharField(blank=True, max_length=100)),
                ('average_time_in_stage', models.DurationField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Pipeline Stage',
                'verbose_name_plural': 'Pipeline Stages',
                'ordering': ['pipeline', 'order'],
            },
        ),
        migrations.CreateModel(
            name='SavedSearch',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('filters', models.JSONField(default=dict)),
                ('is_alert_enabled', models.BooleanField(default=False, help_text='Get notified when new candidates match')),
                ('alert_frequency', models.CharField(choices=[('instant', 'Instant'), ('daily', 'Daily'), ('weekly', 'Weekly')], default='daily', max_length=20)),
                ('last_run_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Saved Search',
                'verbose_name_plural': 'Saved Searches',
                'ordering': ['-updated_at'],
            },
        ),
    ]
