{% extends 'base.html' %}
{% load static %}
{% load i18n %}


{% block head_title %}Services - Zumodra{% endblock head_title %}

{% block header %}
    {% include 'header2.html' %}
{% endblock header %}

{% block content %}
        <!-- Breadcrumb -->
        <section class="breadcrumb">
            <div class="breadcrumb_inner relative sm:mt-20 mt-16 lg:py-20 py-14">
                <div class="breadcrumb_bg absolute top-0 left-0 w-full h-full">
                    <img src="./assets/images/components/breadcrumb_service.webp" alt="breadcrumb_service" class="w-full h-full object-cover" />
                </div>
                <div class="container relative h-full">
                    <div class="breadcrumb_content flex flex-col items-start justify-center xl:w-[1000px] lg:w-[848px] md:w-5/6 w-full h-full">
                        <div class="list_breadcrumb flex items-center gap-2 animate animate_top" style="--i: 1">
                            <a href="index.html" class="caption1 text-white">Home</a>
                            <span class="caption1 text-white opacity-40">/</span>
                            <span class="caption1 text-white">For Employers</span>
                            <span class="caption1 text-white opacity-40">/</span>
                            <span class="caption1 text-white opacity-60">Services</span>
                        </div>
                        <h3 class="heading3 text-white mt-2 animate animate_top" style="--i: 2">Services Default</h3>
                        <div class="form_search z-[1] w-full mt-5 animate animate_top" style="--i: 3">
                            <form class="form_inner flex items-center justify-between max-sm:flex-wrap gap-6 gap-y-4 relative w-full p-3 rounded-lg bg-white">
                                <div class="form_input relative w-full">
                                    <span class="icon_search ph-bold ph-magnifying-glass absolute top-1/2 -translate-y-1/2 left-2 text-xl"></span>
                                    <input type="text" class="input_search w-full h-full pl-10" placeholder="Job title, key words or company" required />
                                </div>
                                <div class="select_block flex-shrink-0 max-sm:w-full sm:pr-16 pr-7 sm:pl-6 pl-3 sm:border-l border-line">
                                    <div class="select">
                                        <span class="selected" data-title="City, State or Zip">City, State or Zip</span>
                                        <ul class="list_option bg-white max-sm:w-full">
                                            <li data-item="Las Vegas, USA">Las Vegas, USA</li>
                                            <li data-item="Cape Town, South Africa">Cape Town, South Africa</li>
                                            <li data-item="Sydney, Australia">Sydney, Australia</li>
                                            <li data-item="Tokyo, Japan">Tokyo, Japan</li>
                                        </ul>
                                    </div>
                                    <span class="icon_down ph ph-caret-down sm:text-2xl text-xl sm:right-0 right-3"></span>
                                </div>
                                <div class="select_block flex-shrink-0 max-sm:w-full sm:pr-16 pr-7 sm:pl-6 pl-3 sm:border-l border-line">
                                    <div class="select">
                                        <span class="selected" data-title="All Categories">All Categories</span>
                                        <ul class="list_option bg-white max-sm:w-full">
                                            <li data-item="Graphic & Design">Graphic & Design</li>
                                            <li data-item="Wrting">Wrting</li>
                                            <li data-item="Videos">Videos</li>
                                            <li data-item="Digital Marketing">Digital Marketing</li>
                                        </ul>
                                    </div>
                                    <span class="icon_down ph ph-caret-down sm:text-2xl text-xl sm:right-0 right-3"></span>
                                </div>
                                <button type="submit" class="button-main max-sm:w-1/3 text-center flex-shrink-0">Search</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- List services -->
        <div class="services lg:py-20 sm:py-14 py-10">
            <div class="container flex flex-col items-center">
                <div class="filter flex flex-wrap items-center justify-between gap-8 gap-y-3 relative w-full">
                    <button id="filter_btn" class="filter_btn inline-flex items-center gap-1.5 py-1.5 px-2.5 border border-line rounded-md duration-300 hover:bg-primary hover:text-white">
                        <span class="ph ph-sliders-horizontal text-xl"></span>
                        <span>Filters</span>
                    </button>
                    <ul class="list_layout flex items-center gap-2 sm:absolute sm:left-1/2 sm:-translate-x-1/2">
                        <li class="max-xl:hidden">
                            <button class="layout_btn cols_4 active"></button>
                        </li>
                        <li class="ml-1.5 max-xl:hidden">
                            <button class="layout_btn cols_3"></button>
                        </li>
                        <li class="max-xl:hidden">
                            <button class="layout_btn cols_2"></button>
                        </li>
                        <li class="xl:hidden">
                            <a href="#!" class="layout_link cols_2 active"></a>
                        </li>
                        <li class="xl:hidden">
                            <a href="services-list.html" class="layout_link list"></a>
                        </li>
                    </ul>
                    <div class="select_filter flex items-center gap-3">
                        <span class="caption1">Sort by:</span>
                        <div class="select_block sm:pr-16 pr-10 pl-3 py-1 border border-line rounded">
                            <div class="select">
                                <span class="selected caption1 capitalize" data-title="sort default">default</span>
                                <ul class="list_option p-0 bg-white">
                                    <li class="capitalize" data-item="default">sort by (default)</li>
                                    <li class="capitalize" data-item="newest">newest</li>
                                    <li class="capitalize" data-item="oldest">oldest</li>
                                    <li class="capitalize" data-item="random">random</li>
                                </ul>
                            </div>
                            <span class="icon_down ph ph-caret-down right-3"></span>
                        </div>
                    </div>
                </div>
                <div class="list_filtered flex flex-wrap items-center gap-3 w-full mt-5">
                    <span class="quantity pr-3 border-r border-line">1,200+ Results</span>
                    <div class="list flex flex-wrap items-center gap-3"></div>
                    <button class="clear_all_btn inline-flex items-center gap-1 py-1 px-2 border border-red text-red rounded-full duration-300 hover:bg-red hover:text-white">
                        <span class="ph ph-x text-sm"></span>
                        <span class="caption1">Clear All</span>
                    </button>
                </div>
                {% if services %}
                <ul class="list_layout_cols list_services grid xl:grid-cols-4 sm:grid-cols-2 md:gap-7.5 gap-5 w-full md:mt-10 mt-7">
                    {% for service in services %}
                    <li class="item h-full">
                        <div class="service_item overflow-hidden relative h-full rounded-lg bg-white shadow-md duration-300 hover:shadow-xl">
                            <!-- LIKE / FAVORITE BUTTON -->
                            <button class="add_wishlist_btn">
                                <span class="ph ph-heart text-xl"></span>
                                <span class="ph-fill ph-heart text-xl"></span>
                            </button>

                            <!-- THUMBNAIL -->
                            <a href="{% url 'browse_service_detail' service.uuid %}" class="service_thumb block aspect-[4/3] overflow-hidden rounded-lg">
                                {% if service.thumbnail %}
                                    <img src="{{ service.thumbnail.url }}" alt="{{ service.name }}" class="w-full h-auto object-cover">
                                {% else %}
                                    <img src="{% static 'images/service/default.webp' %}" alt="default service" class="w-full h-auto object-cover">
                                {% endif %}
                            </a>

                            <!-- INFO BLOCK -->
                            <div class="service_info py-5 px-4">
                                <div class="flex items-center justify-between">
                                    <!-- CATEGORY -->
                                    {% if service.serviceCategory %}
                                        <a href="#" class="tag caption2 bg-surface hover:bg-primary hover:text-white">
                                            {{ service.serviceCategory.name }}
                                        </a>
                                    {% else %}
                                        <span class="tag caption2 bg-surface">Uncategorized</span>
                                    {% endif %}

                                    <!-- AVERAGE RATING -->
                                    <div class="rate flex items-center gap-1">
                                        <span class="ph-fill ph-star text-yellow text-xs"></span>
                                        <strong class="service_rate text-button-sm">
                                            {{ service.provider.rating_avg|default:"0.0" }}
                                        </strong>
                                        <span class="service_rate_quantity caption1 text-secondary">
                                            ({{ service.provider.total_reviews|default:"0" }})
                                        </span>
                                    </div>
                                </div>

                                <!-- TITLE -->
                                <a href="{% url 'browse_service_detail' service.uuid %}" 
                                class="service_title text-title pt-2 duration-300 hover:text-primary">
                                    {{ service.name }}
                                </a>

                                <!-- BOTTOM INFO: AUTHOR + PRICE -->
                                <div class="service_more_info flex items-center justify-between gap-1 mt-4 pt-4 border-t border-line">
                                    <a href="#" class="service_author flex items-center gap-2">
                                        {% if service.provider.user.profile.image %}
                                            <img src="{{ service.provider.user.profile.image.url }}" 
                                                alt="{{ service.provider.user.get_full_name }}" 
                                                class="service_author_avatar w-8 h-8 rounded-full">
                                        {% else %}
                                            <img src="{% static 'images/avatar/default.png' %}" 
                                                alt="default avatar" 
                                                class="service_author_avatar w-8 h-8 rounded-full">
                                        {% endif %}
                                        <span class="service_author_name -style-1">
                                            {{ service.provider.user.get_full_name|default:service.provider.user.username }}
                                        </span>
                                    </a>
                                    <div class="service_price whitespace-nowrap">
                                        <span class="text-secondary">From </span>
                                        <span class="price text-title">
                                            ${{ service.price|floatformat:2 }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {% empty %}
                    <li>
                        <div class="service_item overflow-hidden relative h-full rounded-lg bg-white shadow-md duration-300 hover:shadow-xl">
                            <a href="#" class="service_thumb">
                                <img src="{% static 'images/service/default.webp' %}" alt="no service" class="w-full object-cover">
                            </a>
                            <p class="text-center py-5 px-4">No services found</p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                    <p class="text-center py-5 px-4">No services available</p>
                {% endif %}
                <!-- Pagination -->
                <ul class="list_pagination menu_tab flex items-center justify-center gap-2 w-full md:mt-10 mt-7" role="tablist">
                    <!-- Bouton page précédente -->
                    {% if services.has_previous %}
                    <li role="presentation">
                        <a href="?page={{ services.previous_page_number }}"
                        class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-title duration-300 hover:border-black"
                        role="tab" aria-selected="false">
                        &lt;
                        </a>
                    </li>
                    {% else %}
                    <li role="presentation">
                        <a class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-secondary opacity-40 cursor-not-allowed"
                        role="tab" aria-selected="false">
                        &lt;
                        </a>
                    </li>
                    {% endif %}

                    <!-- Numéros de page -->
                    {% for page_num in services.paginator.page_range %}
                        {% if page_num == services.number %}
                        <li role="presentation">
                            <a href="?page={{ page_num }}"
                            class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-title duration-300 hover:border-black active"
                            role="tab" aria-selected="true">
                            {{ page_num }}
                            </a>
                        </li>
                        {% else %}
                        <li role="presentation">
                            <a href="?page={{ page_num }}"
                            class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-title duration-300 hover:border-black"
                            role="tab" aria-selected="false">
                            {{ page_num }}
                            </a>
                        </li>
                        {% endif %}
                    {% endfor %}

                    <!-- Bouton page suivante -->
                    {% if services.has_next %}
                    <li role="presentation">
                        <a href="?page={{ services.next_page_number }}"
                        class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-title duration-300 hover:border-black"
                        role="tab" aria-selected="false">
                        &gt;
                        </a>
                    </li>
                    {% else %}
                    <li role="presentation">
                        <a class="tab_btn -fill flex items-center justify-center w-10 h-10 rounded border border-line text-secondary opacity-40 cursor-not-allowed"
                        role="tab" aria-selected="false">
                        &gt;
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>

{% endblock content %}