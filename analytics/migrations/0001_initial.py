# Generated by Django 5.2.7 on 2026-01-02 10:10

import django.core.validators
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='DashboardCache',
            fields=[
                ('dashboard_type', models.CharField(choices=[('recruitment', 'Recruitment Dashboard'), ('diversity', 'Diversity Dashboard'), ('hr', 'HR Dashboard'), ('executive', 'Executive Summary'), ('retention', 'Retention Dashboard'), ('performance', 'Performance Dashboard')], max_length=30, primary_key=True, serialize=False)),
                ('data', models.JSONField(default=dict)),
                ('filters_applied', models.JSONField(blank=True, default=dict)),
                ('generated_at', models.DateTimeField(auto_now=True)),
                ('expires_at', models.DateTimeField()),
                ('is_stale', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Dashboard Cache',
                'verbose_name_plural': 'Dashboard Caches',
            },
        ),
        migrations.CreateModel(
            name='HiringAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('tenant_id', models.IntegerField(blank=True, db_index=True, null=True)),
                ('department_name', models.CharField(blank=True, max_length=100)),
                ('period', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='monthly', max_length=20)),
                ('period_date', models.DateField(db_index=True)),
                ('applications_received', models.PositiveIntegerField(default=0)),
                ('applications_qualified', models.PositiveIntegerField(default=0)),
                ('qualification_rate', models.FloatField(blank=True, help_text='Percentage of applications that meet basic requirements', null=True)),
                ('interviews_scheduled', models.PositiveIntegerField(default=0)),
                ('interviews_completed', models.PositiveIntegerField(default=0)),
                ('interview_completion_rate', models.FloatField(blank=True, null=True)),
                ('offers_made', models.PositiveIntegerField(default=0)),
                ('offers_accepted', models.PositiveIntegerField(default=0)),
                ('offers_declined', models.PositiveIntegerField(default=0)),
                ('offer_acceptance_rate', models.FloatField(blank=True, null=True)),
                ('hires', models.PositiveIntegerField(default=0)),
                ('avg_time_to_hire', models.FloatField(blank=True, help_text='Average days from application to start date', null=True)),
                ('avg_time_to_fill', models.FloatField(blank=True, help_text='Average days from job posting to offer acceptance', null=True)),
                ('avg_time_to_first_contact', models.FloatField(blank=True, help_text='Average days from application to first recruiter contact', null=True)),
                ('cost_per_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('total_recruitment_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('quality_of_hire_score', models.FloatField(blank=True, help_text='Average performance rating of new hires after 90 days', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('new_hire_retention_90_day', models.FloatField(blank=True, help_text='Percentage of new hires remaining after 90 days', null=True)),
                ('by_source', models.JSONField(blank=True, default=dict, help_text='Hiring metrics by candidate source')),
                ('by_job_type', models.JSONField(blank=True, default=dict, help_text='Hiring metrics by job type')),
                ('comparison_period', models.JSONField(blank=True, default=dict, help_text='Metrics from previous comparable period')),
                ('computed_at', models.DateTimeField(auto_now=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Hiring Analytics',
                'verbose_name_plural': 'Hiring Analytics',
                'ordering': ['-period_date'],
            },
        ),
        migrations.CreateModel(
            name='HiringFunnelMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_type', models.CharField(blank=True, max_length=50)),
                ('stage_applied', models.PositiveIntegerField(default=0)),
                ('stage_screening', models.PositiveIntegerField(default=0)),
                ('stage_phone_interview', models.PositiveIntegerField(default=0)),
                ('stage_technical_assessment', models.PositiveIntegerField(default=0)),
                ('stage_onsite_interview', models.PositiveIntegerField(default=0)),
                ('stage_reference_check', models.PositiveIntegerField(default=0)),
                ('stage_offer', models.PositiveIntegerField(default=0)),
                ('stage_hired', models.PositiveIntegerField(default=0)),
                ('dropped_at_screening', models.PositiveIntegerField(default=0)),
                ('dropped_at_phone', models.PositiveIntegerField(default=0)),
                ('dropped_at_technical', models.PositiveIntegerField(default=0)),
                ('dropped_at_onsite', models.PositiveIntegerField(default=0)),
                ('dropped_at_reference', models.PositiveIntegerField(default=0)),
                ('dropped_at_offer', models.PositiveIntegerField(default=0)),
                ('rate_applied_to_screening', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_screening_to_phone', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_phone_to_technical', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_technical_to_onsite', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_onsite_to_reference', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_reference_to_offer', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rate_offer_to_hired', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('overall_conversion_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Applied to hired conversion rate', max_digits=5, null=True)),
                ('avg_days_in_funnel', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('avg_days_screening', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_days_phone', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_days_technical', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_days_onsite', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_days_reference', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_days_offer', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('bottleneck_stage', models.CharField(blank=True, help_text='Stage with lowest conversion rate', max_length=50)),
                ('bottleneck_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('stage_details', models.JSONField(blank=True, default=dict, help_text='Detailed metrics per stage')),
                ('comparison_period', models.JSONField(blank=True, default=dict, help_text='Comparison with previous period')),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Hiring Funnel Metric',
                'verbose_name_plural': 'Hiring Funnel Metrics',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='PageView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_key', models.CharField(blank=True, max_length=40)),
                ('path', models.CharField(max_length=500)),
                ('referrer', models.CharField(blank=True, max_length=500)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.CharField(blank=True, max_length=500)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
            ],
            options={
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceDistribution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_type', models.CharField(choices=[('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='yearly', max_length=20)),
                ('review_cycle', models.CharField(choices=[('q1', 'Q1 Review'), ('q2', 'Q2 Review'), ('q3', 'Q3 Review'), ('q4', 'Q4 Review'), ('mid_year', 'Mid-Year Review'), ('annual', 'Annual Review')], default='annual', max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_level', models.CharField(blank=True, max_length=50)),
                ('total_employees_reviewed', models.PositiveIntegerField(default=0)),
                ('reviews_completed', models.PositiveIntegerField(default=0)),
                ('reviews_pending', models.PositiveIntegerField(default=0)),
                ('completion_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rating_5_count', models.PositiveIntegerField(default=0, help_text='Exceptional')),
                ('rating_4_count', models.PositiveIntegerField(default=0, help_text='Exceeds Expectations')),
                ('rating_3_count', models.PositiveIntegerField(default=0, help_text='Meets Expectations')),
                ('rating_2_count', models.PositiveIntegerField(default=0, help_text='Needs Improvement')),
                ('rating_1_count', models.PositiveIntegerField(default=0, help_text='Unsatisfactory')),
                ('rating_5_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rating_4_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rating_3_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rating_2_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('rating_1_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('average_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True)),
                ('median_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True)),
                ('avg_goals_met_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('employees_meeting_all_goals', models.PositiveIntegerField(default=0)),
                ('employees_meeting_some_goals', models.PositiveIntegerField(default=0)),
                ('employees_missing_goals', models.PositiveIntegerField(default=0)),
                ('promotion_recommendations', models.PositiveIntegerField(default=0)),
                ('pip_recommendations', models.PositiveIntegerField(default=0)),
                ('salary_increase_recommendations', models.PositiveIntegerField(default=0)),
                ('competency_averages', models.JSONField(blank=True, default=dict, help_text='Average scores by competency area')),
                ('by_department', models.JSONField(blank=True, default=dict)),
                ('by_level', models.JSONField(blank=True, default=dict)),
                ('rating_change_from_previous', models.DecimalField(blank=True, decimal_places=2, help_text='Average rating change from previous cycle', max_digits=5, null=True)),
                ('pre_calibration_avg', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True)),
                ('post_calibration_avg', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True)),
                ('calibration_adjustment', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Performance Distribution',
                'verbose_name_plural': 'Performance Distributions',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='RecruiterPerformanceMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('tenant_id', models.IntegerField(blank=True, db_index=True, null=True)),
                ('recruiter_name', models.CharField(blank=True, max_length=200)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('candidates_sourced', models.PositiveIntegerField(default=0)),
                ('candidates_screened', models.PositiveIntegerField(default=0)),
                ('interviews_conducted', models.PositiveIntegerField(default=0)),
                ('offers_extended', models.PositiveIntegerField(default=0)),
                ('hires_made', models.PositiveIntegerField(default=0)),
                ('avg_time_to_screen', models.FloatField(blank=True, help_text='Average days from application to first screen', null=True)),
                ('avg_time_to_hire', models.FloatField(blank=True, null=True)),
                ('submissions_to_hire_ratio', models.FloatField(blank=True, null=True)),
                ('candidate_acceptance_rate', models.FloatField(blank=True, help_text='Rate of candidates who accept offers', null=True)),
                ('hiring_manager_satisfaction', models.FloatField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('quality_of_hire', models.FloatField(blank=True, help_text='Average performance of placed candidates', null=True)),
                ('active_candidates', models.PositiveIntegerField(default=0)),
                ('open_requisitions', models.PositiveIntegerField(default=0)),
                ('performance_score', models.FloatField(blank=True, help_text='Composite performance score', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('rank', models.PositiveIntegerField(blank=True, help_text='Rank among all recruiters for this period', null=True)),
                ('computed_at', models.DateTimeField(auto_now=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Recruiter Performance Metric',
                'verbose_name_plural': 'Recruiter Performance Metrics',
                'ordering': ['-period_start', '-hires_made'],
            },
        ),
        migrations.CreateModel(
            name='RecruitingFunnel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('tenant_id', models.IntegerField(blank=True, db_index=True, null=True)),
                ('pipeline_name', models.CharField(blank=True, help_text='Pipeline name (for display when pipeline deleted)', max_length=100)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('stages', models.JSONField(default=dict, help_text='Stage metrics. Format: {"Applied": {"count": 100, "conversion_rate": 0.5, "avg_time_days": 2.3}}')),
                ('overall_conversion', models.FloatField(blank=True, help_text='First stage to final stage conversion rate', null=True)),
                ('total_candidates', models.PositiveIntegerField(default=0)),
                ('total_hires', models.PositiveIntegerField(default=0)),
                ('avg_time_in_funnel', models.FloatField(blank=True, help_text='Average days from entry to exit', null=True)),
                ('median_time_in_funnel', models.FloatField(blank=True, null=True)),
                ('bottleneck_stage', models.CharField(blank=True, help_text='Stage with lowest conversion rate', max_length=100)),
                ('bottleneck_conversion_rate', models.FloatField(blank=True, null=True)),
                ('drop_off_reasons', models.JSONField(blank=True, default=dict, help_text='Common reasons for candidate drop-off by stage')),
                ('previous_period_conversion', models.FloatField(blank=True, null=True)),
                ('conversion_change', models.FloatField(blank=True, help_text='Change in conversion rate from previous period', null=True)),
                ('computed_at', models.DateTimeField(auto_now=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Recruiting Funnel',
                'verbose_name_plural': 'Recruiting Funnels',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='RecruitmentMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_type', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='daily', max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('open_positions', models.PositiveIntegerField(default=0)),
                ('new_positions', models.PositiveIntegerField(default=0)),
                ('closed_positions', models.PositiveIntegerField(default=0)),
                ('filled_positions', models.PositiveIntegerField(default=0)),
                ('cancelled_positions', models.PositiveIntegerField(default=0)),
                ('total_applications', models.PositiveIntegerField(default=0)),
                ('new_applications', models.PositiveIntegerField(default=0)),
                ('applications_in_review', models.PositiveIntegerField(default=0)),
                ('applications_shortlisted', models.PositiveIntegerField(default=0)),
                ('applications_rejected', models.PositiveIntegerField(default=0)),
                ('applications_withdrawn', models.PositiveIntegerField(default=0)),
                ('interviews_scheduled', models.PositiveIntegerField(default=0)),
                ('interviews_completed', models.PositiveIntegerField(default=0)),
                ('interviews_cancelled', models.PositiveIntegerField(default=0)),
                ('interviews_no_show', models.PositiveIntegerField(default=0)),
                ('offers_extended', models.PositiveIntegerField(default=0)),
                ('offers_accepted', models.PositiveIntegerField(default=0)),
                ('offers_declined', models.PositiveIntegerField(default=0)),
                ('offers_expired', models.PositiveIntegerField(default=0)),
                ('total_hires', models.PositiveIntegerField(default=0)),
                ('application_to_interview_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of applications that reach interview stage', max_digits=5, null=True)),
                ('interview_to_offer_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of interviews that result in offers', max_digits=5, null=True)),
                ('offer_acceptance_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of offers accepted', max_digits=5, null=True)),
                ('overall_conversion_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Application to hire conversion rate', max_digits=5, null=True)),
                ('avg_time_to_fill', models.DecimalField(blank=True, decimal_places=2, help_text='Average days from job posting to hire', max_digits=7, null=True)),
                ('avg_time_to_hire', models.DecimalField(blank=True, decimal_places=2, help_text='Average days from application to hire', max_digits=7, null=True)),
                ('total_recruitment_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('cost_per_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('cost_per_application', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('by_department', models.JSONField(blank=True, default=dict, help_text='Metrics broken down by department')),
                ('by_location', models.JSONField(blank=True, default=dict, help_text='Metrics broken down by location')),
                ('by_job_type', models.JSONField(blank=True, default=dict, help_text='Metrics broken down by job type')),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Recruitment Metric',
                'verbose_name_plural': 'Recruitment Metrics',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='SearchQuery',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('query', models.CharField(db_index=True, max_length=500)),
                ('results_count', models.PositiveIntegerField(default=0)),
                ('filters_used', models.JSONField(blank=True, default=dict)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
            ],
            options={
                'verbose_name_plural': 'Search Queries',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='SourceEffectivenessMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('source', models.CharField(choices=[('career_page', 'Career Page'), ('linkedin', 'LinkedIn'), ('indeed', 'Indeed'), ('glassdoor', 'Glassdoor'), ('referral', 'Employee Referral'), ('agency', 'Recruitment Agency'), ('university', 'University/Campus'), ('job_fair', 'Job Fair'), ('social_media', 'Social Media'), ('direct', 'Direct Application'), ('other', 'Other')], max_length=30)),
                ('source_detail', models.CharField(blank=True, help_text='Specific source detail (e.g., agency name)', max_length=200)),
                ('total_applicants', models.PositiveIntegerField(default=0)),
                ('qualified_applicants', models.PositiveIntegerField(default=0)),
                ('interviewed', models.PositiveIntegerField(default=0)),
                ('offers_extended', models.PositiveIntegerField(default=0)),
                ('hires', models.PositiveIntegerField(default=0)),
                ('qualification_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of applicants that qualify', max_digits=5, null=True)),
                ('interview_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('hire_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of applicants that get hired', max_digits=5, null=True)),
                ('avg_performance_rating', models.DecimalField(blank=True, decimal_places=2, help_text='Average performance rating of hires', max_digits=3, null=True)),
                ('retention_rate_6_months', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('retention_rate_12_months', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_time_to_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('total_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Total cost for this source', max_digits=12, null=True)),
                ('cost_per_applicant', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('cost_per_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('roi_score', models.DecimalField(blank=True, decimal_places=2, help_text='Return on investment score', max_digits=7, null=True)),
                ('effectiveness_score', models.DecimalField(blank=True, decimal_places=2, help_text='Composite effectiveness score (0-100)', max_digits=5, null=True)),
                ('by_job_type', models.JSONField(blank=True, default=dict)),
                ('by_department', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Source Effectiveness Metric',
                'verbose_name_plural': 'Source Effectiveness Metrics',
                'ordering': ['-period_start', '-effectiveness_score'],
            },
        ),
        migrations.CreateModel(
            name='TenantDashboardMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('tenant_id', models.IntegerField(blank=True, db_index=True, help_text='Tenant ID for multi-tenant isolation', null=True)),
                ('metric_type', models.CharField(choices=[('time_to_hire', 'Time to Hire'), ('applicants_per_job', 'Applicants per Job'), ('offer_acceptance', 'Offer Acceptance Rate'), ('source_quality', 'Source Quality'), ('interview_completion', 'Interview Completion Rate'), ('employee_turnover', 'Employee Turnover'), ('new_hire_retention', 'New Hire Retention'), ('headcount_growth', 'Headcount Growth'), ('absenteeism', 'Absenteeism Rate'), ('performance_avg', 'Average Performance'), ('goal_completion', 'Goal Completion Rate'), ('cost_per_hire', 'Cost per Hire'), ('recruitment_spend', 'Recruitment Spend'), ('pipeline_velocity', 'Pipeline Velocity'), ('stage_conversion', 'Stage Conversion Rate')], db_index=True, max_length=50)),
                ('dimension', models.CharField(choices=[('none', 'No Dimension (Aggregate)'), ('department', 'By Department'), ('location', 'By Location'), ('job_type', 'By Job Type'), ('source', 'By Source'), ('recruiter', 'By Recruiter'), ('experience_level', 'By Experience Level'), ('tenant', 'By Tenant')], default='none', max_length=30)),
                ('dimension_value', models.CharField(blank=True, db_index=True, help_text='Value of the dimension (e.g., department name)', max_length=200)),
                ('value', models.FloatField(help_text='Metric value')),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('computed_at', models.DateTimeField(auto_now=True)),
                ('is_stale', models.BooleanField(default=False, help_text='Whether this metric needs recomputation')),
                ('comparison_value', models.FloatField(blank=True, help_text='Previous period value for comparison', null=True)),
                ('change_percentage', models.FloatField(blank=True, help_text='Percentage change from comparison period', null=True)),
                ('benchmark_value', models.FloatField(blank=True, help_text='Industry benchmark for comparison', null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Tenant Dashboard Metric',
                'verbose_name_plural': 'Tenant Dashboard Metrics',
                'ordering': ['-period_start', 'metric_type'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_type', models.CharField(choices=[('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='monthly', max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('total_employees', models.PositiveIntegerField(default=0)),
                ('total_pto_taken', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_sick_leave_taken', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_unpaid_leave_taken', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_other_leave_taken', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('pto_requests', models.PositiveIntegerField(default=0)),
                ('sick_leave_requests', models.PositiveIntegerField(default=0)),
                ('unpaid_leave_requests', models.PositiveIntegerField(default=0)),
                ('requests_approved', models.PositiveIntegerField(default=0)),
                ('requests_rejected', models.PositiveIntegerField(default=0)),
                ('requests_pending', models.PositiveIntegerField(default=0)),
                ('approval_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_pto_days_per_employee', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_sick_days_per_employee', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('total_pto_balance_accrued', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_pto_balance_remaining', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('avg_pto_balance_per_employee', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('pto_utilization_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of accrued PTO used', max_digits=5, null=True)),
                ('unscheduled_absence_days', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('absenteeism_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Unscheduled absences / total scheduled work days', max_digits=5, null=True)),
                ('peak_absence_day', models.CharField(blank=True, help_text='Day of week with highest absences', max_length=20)),
                ('peak_absence_month', models.CharField(blank=True, help_text='Month with highest absences', max_length=20)),
                ('by_leave_type', models.JSONField(blank=True, default=dict)),
                ('by_department', models.JSONField(blank=True, default=dict)),
                ('by_day_of_week', models.JSONField(blank=True, default=dict)),
                ('trend_vs_previous', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Time Off Analytics',
                'verbose_name_plural': 'Time Off Analytics',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='TimeToHireMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_type', models.CharField(blank=True, max_length=50)),
                ('experience_level', models.CharField(blank=True, max_length=50)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('total_positions_filled', models.PositiveIntegerField(default=0)),
                ('avg_time_to_fill', models.DecimalField(blank=True, decimal_places=2, help_text='Average days from job posting to accepted offer', max_digits=7, null=True)),
                ('median_time_to_fill', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('min_time_to_fill', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('max_time_to_fill', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('total_hires', models.PositiveIntegerField(default=0)),
                ('avg_time_to_hire', models.DecimalField(blank=True, decimal_places=2, help_text='Average days from application to start date', max_digits=7, null=True)),
                ('median_time_to_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('min_time_to_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('max_time_to_hire', models.DecimalField(blank=True, decimal_places=2, max_digits=7, null=True)),
                ('avg_time_in_screening', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_time_in_interview', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_time_in_assessment', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_time_in_offer', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('avg_time_to_first_contact', models.DecimalField(blank=True, decimal_places=2, help_text='Days from application to first recruiter contact', max_digits=5, null=True)),
                ('avg_time_to_decision', models.DecimalField(blank=True, decimal_places=2, help_text='Days from final interview to decision', max_digits=5, null=True)),
                ('time_distribution', models.JSONField(blank=True, default=dict, help_text='Distribution of time-to-hire (buckets)')),
                ('trend_vs_previous_period', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage change from previous period', max_digits=7, null=True)),
                ('by_source', models.JSONField(blank=True, default=dict, help_text='Time-to-hire by candidate source')),
                ('target_time_to_fill', models.PositiveIntegerField(blank=True, help_text='Target days to fill position', null=True)),
                ('positions_within_target', models.PositiveIntegerField(default=0)),
                ('target_achievement_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Time to Hire Metric',
                'verbose_name_plural': 'Time to Hire Metrics',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='UserAction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action_type', models.CharField(choices=[('service_view', 'Service Viewed'), ('service_like', 'Service Liked'), ('service_create', 'Service Created'), ('proposal_submit', 'Proposal Submitted'), ('proposal_accept', 'Proposal Accepted'), ('contract_create', 'Contract Created'), ('contract_complete', 'Contract Completed'), ('review_create', 'Review Created'), ('profile_update', 'Profile Updated'), ('search', 'Search Performed'), ('job_view', 'Job Viewed'), ('job_apply', 'Job Applied'), ('candidate_review', 'Candidate Reviewed'), ('interview_schedule', 'Interview Scheduled'), ('offer_sent', 'Offer Sent'), ('employee_onboard', 'Employee Onboarded')], max_length=50)),
                ('description', models.TextField(blank=True)),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
            ],
            options={
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='DashboardMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('metric_type', models.CharField(choices=[('daily_revenue', 'Daily Revenue'), ('monthly_revenue', 'Monthly Revenue'), ('active_users', 'Active Users'), ('new_users', 'New Users'), ('total_services', 'Total Services'), ('active_contracts', 'Active Contracts'), ('completed_contracts', 'Completed Contracts'), ('conversion_rate', 'Conversion Rate'), ('open_positions', 'Open Positions'), ('total_applications', 'Total Applications'), ('avg_time_to_hire', 'Average Time to Hire'), ('offer_acceptance_rate', 'Offer Acceptance Rate'), ('employee_turnover', 'Employee Turnover Rate')], db_index=True, max_length=50)),
                ('value', models.DecimalField(decimal_places=2, max_digits=15)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('date', models.DateField(db_index=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['-date', 'metric_type'],
                'unique_together': {('metric_type', 'date')},
            },
        ),
        migrations.CreateModel(
            name='DiversityMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_type', models.CharField(choices=[('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='quarterly', max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('scope', models.CharField(choices=[('applicants', 'Applicants'), ('interviewed', 'Interviewed Candidates'), ('hired', 'New Hires'), ('employees', 'Current Employees'), ('leadership', 'Leadership'), ('departed', 'Departed Employees')], default='employees', max_length=20)),
                ('total_count', models.PositiveIntegerField(default=0)),
                ('gender_male_count', models.PositiveIntegerField(default=0)),
                ('gender_female_count', models.PositiveIntegerField(default=0)),
                ('gender_nonbinary_count', models.PositiveIntegerField(default=0)),
                ('gender_not_disclosed_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_white_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_black_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_hispanic_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_asian_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_native_american_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_pacific_islander_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_two_or_more_count', models.PositiveIntegerField(default=0)),
                ('ethnicity_not_disclosed_count', models.PositiveIntegerField(default=0)),
                ('age_under_25_count', models.PositiveIntegerField(default=0)),
                ('age_25_34_count', models.PositiveIntegerField(default=0)),
                ('age_35_44_count', models.PositiveIntegerField(default=0)),
                ('age_45_54_count', models.PositiveIntegerField(default=0)),
                ('age_55_64_count', models.PositiveIntegerField(default=0)),
                ('age_65_plus_count', models.PositiveIntegerField(default=0)),
                ('age_not_disclosed_count', models.PositiveIntegerField(default=0)),
                ('veteran_count', models.PositiveIntegerField(default=0)),
                ('non_veteran_count', models.PositiveIntegerField(default=0)),
                ('veteran_not_disclosed_count', models.PositiveIntegerField(default=0)),
                ('disability_yes_count', models.PositiveIntegerField(default=0)),
                ('disability_no_count', models.PositiveIntegerField(default=0)),
                ('disability_not_disclosed_count', models.PositiveIntegerField(default=0)),
                ('by_department', models.JSONField(blank=True, default=dict, help_text='Anonymized metrics by department (min 5 per category)')),
                ('by_level', models.JSONField(blank=True, default=dict, help_text='Anonymized metrics by job level')),
                ('gender_percentages', models.JSONField(blank=True, default=dict)),
                ('ethnicity_percentages', models.JSONField(blank=True, default=dict)),
                ('age_percentages', models.JSONField(blank=True, default=dict)),
                ('industry_benchmark', models.JSONField(blank=True, default=dict, help_text='Industry benchmarks for comparison')),
                ('min_category_size', models.PositiveIntegerField(default=5, help_text='Minimum count to display category (for anonymization)')),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Diversity Metric',
                'verbose_name_plural': 'Diversity Metrics',
                'ordering': ['-period_start'],
                'indexes': [models.Index(fields=['period_type', 'scope', 'period_start'], name='analytics_d_period__ad5a31_idx'), models.Index(fields=['-period_start', 'scope'], name='analytics_d_period__631d57_idx')],
                'unique_together': {('period_type', 'period_start', 'scope')},
            },
        ),
        migrations.CreateModel(
            name='EmployeeRetentionMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('period_type', models.CharField(choices=[('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly')], default='monthly', max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('job_level', models.CharField(blank=True, max_length=50)),
                ('starting_headcount', models.PositiveIntegerField(default=0)),
                ('ending_headcount', models.PositiveIntegerField(default=0)),
                ('average_headcount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('new_hires', models.PositiveIntegerField(default=0)),
                ('new_hire_retention_90_days', models.PositiveIntegerField(default=0, help_text='New hires who stayed past 90 days')),
                ('total_departures', models.PositiveIntegerField(default=0)),
                ('voluntary_departures', models.PositiveIntegerField(default=0)),
                ('involuntary_departures', models.PositiveIntegerField(default=0)),
                ('retirement_departures', models.PositiveIntegerField(default=0)),
                ('overall_turnover_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Total departures / average headcount', max_digits=5, null=True)),
                ('voluntary_turnover_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('involuntary_turnover_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('overall_retention_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('new_hire_retention_rate', models.DecimalField(blank=True, decimal_places=2, help_text='New hire 90-day retention', max_digits=5, null=True)),
                ('departures_under_1_year', models.PositiveIntegerField(default=0)),
                ('departures_1_to_3_years', models.PositiveIntegerField(default=0)),
                ('departures_3_to_5_years', models.PositiveIntegerField(default=0)),
                ('departures_over_5_years', models.PositiveIntegerField(default=0)),
                ('departure_reasons', models.JSONField(blank=True, default=dict, help_text='Breakdown of voluntary departure reasons')),
                ('high_performer_departures', models.PositiveIntegerField(default=0)),
                ('high_performer_retention_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('estimated_turnover_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('cost_per_departure', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('avg_tenure_departed', models.DecimalField(blank=True, decimal_places=2, help_text='Average tenure of departed employees (years)', max_digits=5, null=True)),
                ('avg_tenure_current', models.DecimalField(blank=True, decimal_places=2, help_text='Average tenure of current employees (years)', max_digits=5, null=True)),
                ('by_department', models.JSONField(blank=True, default=dict)),
                ('by_tenure', models.JSONField(blank=True, default=dict)),
                ('trend_vs_previous', models.DecimalField(blank=True, decimal_places=2, help_text='Change in turnover rate vs previous period', max_digits=7, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Employee Retention Metric',
                'verbose_name_plural': 'Employee Retention Metrics',
                'ordering': ['-period_start'],
                'indexes': [models.Index(fields=['period_type', '-period_start'], name='analytics_e_period__ec0240_idx'), models.Index(fields=['department', '-period_start'], name='analytics_e_departm_594c32_idx')],
            },
        ),
    ]
