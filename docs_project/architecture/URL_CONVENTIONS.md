# URL Naming Conventions

**Author:** Backend Lead Developer
**Date:** January 16, 2026
**Sprint:** Days 1-5 (January 16-21, 2026)
**Status:** ✅ **APPROVED STANDARDS**

---

## Purpose

This document defines standardized URL naming conventions for the Zumodra platform. Consistent URL naming makes the codebase easier to navigate, maintain, and debug.

---

## URL Namespace Hierarchy

```
frontend:
  ├── dashboard:
  │   ├── index
  │   ├── global-search
  │   └── htmx-*
  ├── ats:
  │   ├── job-*
  │   ├── candidate-*
  │   ├── application-*
  │   ├── interview-*
  │   └── offer-*
  ├── hr:
  │   ├── employee-*
  │   ├── time-off-*
  │   ├── org-chart-*
  │   └── onboarding-*
  ├── finance:
  │   ├── payment-*
  │   ├── subscription-*
  │   ├── invoice-*
  │   └── escrow-*
  ├── analytics:
  ├── notifications:
  ├── accounts:
  └── messages:

api:v1:
  ├── auth:
  ├── tenants:
  ├── ats:
  ├── hr:
  ├── finance:
  ├── careers:
  └── ...
```

---

## Naming Standards

### Frontend URLs (Template Views)

**Format:** `{resource}-{action}` (ALWAYS hyphenated)

#### List Views
- **Pattern:** `{resource}-list`
- **Examples:** `job-list`, `candidate-list`, `employee-list`
- **Usage:** `{% url 'frontend:jobs:job-list' %}`

#### Detail Views
- **Pattern:** `{resource}-detail`
- **Examples:** `job-detail`, `candidate-detail`, `employee-detail`
- **Parameters:** Always requires `pk` or `uuid`
- **Usage:** `{% url 'frontend:jobs:job-detail' job.pk %}`

#### Create Views
- **Pattern:** `{resource}-create`
- **Examples:** `job-create`, `candidate-create`, `employee-create`
- **Usage:** `{% url 'frontend:jobs:job-create' %}`

#### Edit/Update Views
- **Pattern:** `{resource}-edit`
- **Examples:** `job-edit`, `candidate-edit`, `employee-edit`
- **Parameters:** Requires `pk` or `uuid`
- **Usage:** `{% url 'frontend:jobs:job-edit' job.pk %}`

#### Action Views
- **Pattern:** `{resource}-{action}`
- **Examples:**
  - `job-publish`, `job-close`, `job-duplicate`, `job-delete`
  - `application-reject`, `application-move`
  - `interview-reschedule`, `interview-cancel`
  - `offer-action`, `time-off-approval`
- **Usage:** `{% url 'frontend:jobs:job-publish' job.pk %}`

#### HTMX Endpoints
- **Pattern:** `htmx-{feature}`
- **Examples:**
  - Dashboard: `htmx-quick-stats`, `htmx-recent-activity`
  - Finance: `htmx-payment-list`, `htmx-subscription-status`
  - Analytics: `htmx-funnel-chart`, `htmx-pipeline-analytics`
- **Usage:** `{% url 'frontend:dashboard:htmx-quick-stats' %}`

### API URLs (REST Endpoints)

**Format:** DRF router auto-generates hyphenated names

#### ViewSet Routes (Auto-generated by DRF Router)
- **List:** `{basename}-list`
- **Detail:** `{basename}-detail`
- **Examples:** `job-list`, `job-detail`, `candidate-list`, `employee-list`

#### Custom Action Routes
- **Format:** Hyphenated descriptive names
- **Examples:**
  - `dashboard-stats`
  - `ai-match-score`
  - `bulk-operations`
  - `interview-schedule`
  - `offer-generate-letter`

### Public vs Admin Routes

- **Public:** No prefix (e.g., `public-job-list`, `public-career-page`)
- **Admin:** `admin-` prefix (e.g., `admin-job-listing-list`, `admin-career-page-detail`)

---

## URL Parameter Conventions

### Primary Keys
- **Integer PK:** Use `pk` parameter name
  ```python
  path('jobs/<int:pk>/', views.JobDetailView.as_view(), name='job-detail')
  ```

- **UUID PK:** Use `uuid` parameter name
  ```python
  path('candidates/<uuid:uuid>/', views.CandidateDetailView.as_view(), name='candidate-detail')
  ```

### Slug Fields
- **Parameter:** Use `slug`
  ```python
  path('jobs/<slug:slug>/', views.JobDetailView.as_view(), name='job-detail-slug')
  ```

### Foreign Key References
- **Format:** Use descriptive names with `_pk` or `_uuid` suffix
- **Examples:**
  ```python
  path('applications/<int:application_pk>/notes/', ...)
  path('interviews/<uuid:interview_uuid>/feedback/', ...)
  ```

### Consistency
**IMPORTANT:** Use ONE identifier type per resource throughout the app:
- If Job uses `uuid`, ALWAYS use `uuid` for Job URLs
- If Employee uses `pk`, ALWAYS use `pk` for Employee URLs

---

## Complete URL Examples

### ATS - Applicant Tracking System

#### Job URLs
```python
# urls_frontend.py
urlpatterns = [
    # List & Create
    path('jobs/', views.JobListView.as_view(), name='job-list'),
    path('jobs/create/', views.JobCreateView.as_view(), name='job-create'),

    # Detail & Edit
    path('jobs/<uuid:pk>/', views.JobDetailView.as_view(), name='job-detail'),
    path('jobs/<uuid:pk>/edit/', views.JobEditView.as_view(), name='job-edit'),

    # Actions
    path('jobs/<uuid:pk>/publish/', views.JobPublishView.as_view(), name='job-publish'),
    path('jobs/<uuid:pk>/close/', views.JobCloseView.as_view(), name='job-close'),
    path('jobs/<uuid:pk>/duplicate/', views.JobDuplicateView.as_view(), name='job-duplicate'),
    path('jobs/<uuid:pk>/delete/', views.JobDeleteView.as_view(), name='job-delete'),
]
```

#### Candidate URLs
```python
urlpatterns = [
    path('candidates/', views.CandidateListView.as_view(), name='candidate-list'),
    path('candidates/create/', views.CandidateCreateView.as_view(), name='candidate-create'),
    path('candidates/<uuid:pk>/', views.CandidateDetailView.as_view(), name='candidate-detail'),
    path('candidates/<uuid:pk>/add-to-job/', views.CandidateAddToJobView.as_view(), name='candidate-add-to-job'),
]
```

#### Interview URLs
```python
urlpatterns = [
    path('interviews/', views.InterviewListView.as_view(), name='interview-list'),
    path('interviews/<uuid:pk>/', views.InterviewDetailView.as_view(), name='interview-detail'),
    path('interviews/<uuid:pk>/reschedule/', views.InterviewRescheduleView.as_view(), name='interview-reschedule'),
    path('interviews/<uuid:pk>/cancel/', views.InterviewCancelView.as_view(), name='interview-cancel'),
    path('htmx/interviews/schedule/', views.InterviewScheduleHTMXView.as_view(), name='interview-schedule'),
]
```

### HR - Human Resources

```python
# urls_frontend.py
urlpatterns = [
    # Employees
    path('employees/', views.EmployeeDirectoryView.as_view(), name='employee-list'),
    path('employees/create/', views.EmployeeCreateView.as_view(), name='employee-create'),
    path('employees/<int:pk>/', views.EmployeeDetailView.as_view(), name='employee-detail'),
    path('employees/<int:pk>/edit/', views.EmployeeEditView.as_view(), name='employee-edit'),

    # Time-Off
    path('time-off/', views.TimeOffCalendarView.as_view(), name='time-off-calendar'),
    path('time-off/request/', views.TimeOffRequestView.as_view(), name='time-off-request'),
    path('time-off/my-requests/', views.MyTimeOffView.as_view(), name='my-time-off'),
    path('time-off/<int:pk>/approval/', views.TimeOffApprovalView.as_view(), name='time-off-approval'),

    # Org Chart
    path('org-chart/', views.OrgChartView.as_view(), name='org-chart'),
    path('htmx/org-chart-data/', views.OrgChartDataView.as_view(), name='org-chart-data'),
]
```

### Finance

```python
# urls_frontend.py
urlpatterns = [
    # Dashboard
    path('', views.FinanceDashboardView.as_view(), name='dashboard'),
    path('htmx/quick-stats/', views.QuickStatsHTMXView.as_view(), name='htmx-quick-stats'),

    # Payments
    path('payments/', views.PaymentHistoryView.as_view(), name='payment-history'),
    path('htmx/payments/', views.PaymentListHTMXView.as_view(), name='htmx-payment-list'),
    path('htmx/payments/<int:pk>/', views.PaymentDetailHTMXView.as_view(), name='htmx-payment-detail'),

    # Subscriptions
    path('subscription/', views.SubscriptionManagementView.as_view(), name='subscription'),
    path('subscription/success/', views.SubscriptionSuccessView.as_view(), name='subscription-success'),
    path('subscription/cancel/', views.SubscriptionCancelView.as_view(), name='subscription-cancel'),

    # Invoices
    path('invoices/', views.InvoiceListView.as_view(), name='invoice-list'),
    path('invoices/<str:invoice_number>/', views.InvoiceDetailView.as_view(), name='invoice-detail'),
]
```

### Dashboard

```python
# urls_frontend.py
urlpatterns = [
    path('', views.DashboardIndexView.as_view(), name='index'),
    path('search/', views.GlobalSearchView.as_view(), name='global-search'),
    path('settings/', views.AccountSettingsView.as_view(), name='account-settings'),

    # HTMX widgets
    path('htmx/quick-stats/', views.QuickStatsHTMXView.as_view(), name='htmx-quick-stats'),
    path('htmx/recent-activity/', views.RecentActivityHTMXView.as_view(), name='htmx-recent-activity'),
    path('htmx/upcoming-interviews/', views.UpcomingInterviewsHTMXView.as_view(), name='htmx-upcoming-interviews'),
]
```

### API URLs

```python
# api/urls.py
from rest_framework.routers import DefaultRouter
from .viewsets import JobPostingViewSet, CandidateViewSet

router = DefaultRouter()
router.register('jobs', JobPostingViewSet, basename='job')
router.register('candidates', CandidateViewSet, basename='candidate')

# Router generates these routes automatically:
# - /api/v1/jobs/jobs/ (name: api:v1:jobs:job-list)
# - /api/v1/jobs/jobs/<uuid>/ (name: api:v1:jobs:job-detail)
# - /api/v1/jobs/candidates/ (name: api:v1:jobs:candidate-list)
# - /api/v1/jobs/candidates/<uuid>/ (name: api:v1:jobs:candidate-detail)

urlpatterns = router.urls
```

---

## Template Usage

### Always Use {% url %} Tag

**NEVER hardcode URLs in templates:**

```django
<!-- BAD - Hardcoded URL -->
<a href="/app/jobs/jobs/{{ job.id }}/">View Job</a>

<!-- GOOD - Using {% url %} tag -->
<a href="{% url 'frontend:jobs:job-detail' job.pk %}">View Job</a>
```

### With Parameters

```django
<!-- Single parameter -->
<a href="{% url 'frontend:jobs:job-detail' job.pk %}">View Job</a>

<!-- Multiple parameters -->
<a href="{% url 'frontend:jobs:application-add-note' application.pk %}">Add Note</a>

<!-- Named parameters (more explicit) -->
<a href="{% url 'frontend:hr:employee-detail' pk=employee.id %}">View Employee</a>
```

### Query Parameters

```django
<!-- Add query parameters after URL -->
<a href="{% url 'frontend:jobs:job-list' %}?status=active">Active Jobs</a>

<!-- Or build dynamically -->
<a href="{% url 'frontend:jobs:candidate-list' %}?job={{ job.id }}&status=screening">
    Candidates in Screening
</a>
```

### HTMX Endpoints

```django
<!-- HTMX trigger -->
<div hx-get="{% url 'frontend:dashboard:htmx-quick-stats' %}"
     hx-trigger="load"
     hx-swap="innerHTML">
    Loading...
</div>

<!-- HTMX form submission -->
<form hx-post="{% url 'frontend:jobs:application-move' application.pk %}"
      hx-target="#pipeline-board"
      hx-swap="outerHTML">
    <!-- Form fields -->
</form>
```

---

## JavaScript Usage

### Reverse URL Lookup

Use Django's `{% url %}` tag in JavaScript:

```html
<script>
    const jobDetailUrl = "{% url 'frontend:jobs:job-detail' 999 %}".replace('999', jobId);
    fetch(jobDetailUrl)
        .then(response => response.json())
        .then(data => console.log(data));
</script>
```

Or use data attributes:

```html
<button data-url="{% url 'frontend:jobs:job-delete' job.pk %}"
        onclick="deleteJob(this)">
    Delete
</button>

<script>
function deleteJob(button) {
    const url = button.dataset.url;
    fetch(url, { method: 'DELETE' })
        .then(response => handleResponse(response));
}
</script>
```

---

## Main URL Configuration

### Project urls.py Structure

```python
# zumodra/urls.py
from django.urls import path, include

urlpatterns = [
    # Health checks (no i18n)
    path('health/', include('health_check.urls')),

    # Public pages (with i18n)
    path('', include('main.urls')),  # Home, about, pricing, etc.

    # Authentication
    path('accounts/', include('allauth.urls')),

    # Admin panels
    path('admin-panel/', admin.site.urls),
    path('cms/', include(wagtailadmin_urls)),

    # Frontend apps (consolidated)
    path('app/', include('core.urls_frontend', namespace='frontend')),

    # API
    path('api/', include([
        # Auth
        path('v1/auth/', include('api.urls_auth')),
        # All app APIs
        path('v1/', include('api.urls', namespace='v1')),
    ])),
]
```

### Consolidated Frontend URLs

```python
# core/urls_frontend.py
from django.urls import path, include

app_name = 'frontend'

urlpatterns = [
    # Dashboard
    path('dashboard/', include('dashboard.urls_frontend', namespace='dashboard')),

    # ATS
    path('ats/', include('ats.urls_frontend', namespace='ats')),

    # HR
    path('hr/', include('hr_core.urls_frontend', namespace='hr')),

    # Finance
    path('finance/', include('finance.urls_frontend', namespace='finance')),

    # Analytics
    path('analytics/', include('analytics.urls_frontend', namespace='analytics')),

    # Notifications
    path('notifications/', include('notifications.urls_frontend', namespace='notifications')),

    # Accounts
    path('accounts/', include('tenant_profiles.urls_frontend', namespace='accounts')),

    # Messages
    path('messages/', include('messages_sys.urls_frontend', namespace='messages')),
]
```

### Consolidated API URLs

```python
# api/urls.py
from django.urls import path, include

app_name = 'v1'

urlpatterns = [
    # Tenants
    path('tenants/', include('tenants.api.urls', namespace='tenants')),

    # ATS
    path('ats/', include('ats.api.urls', namespace='ats')),

    # HR
    path('hr/', include('hr_core.api.urls', namespace='hr')),

    # Finance
    path('finance/', include('finance.api.urls', namespace='finance')),

    # Careers (public)
    path('careers/', include('careers.api.urls', namespace='careers')),

    # Other apps...
]
```

---

## Migration Guide

### Step 1: Update URL Names (ATS Example)

**Current (inconsistent):**
```python
# ats/urls_frontend.py - OLD
path('jobs/', views.JobListView.as_view(), name='job_list'),  # underscore
path('jobs/<uuid:pk>/', views.JobDetailView.as_view(), name='job_detail'),
```

**Target (standardized):**
```python
# ats/urls_frontend.py - NEW
path('jobs/', views.JobListView.as_view(), name='job-list'),  # hyphen
path('jobs/<uuid:pk>/', views.JobDetailView.as_view(), name='job-detail'),
```

### Step 2: Update Template References

**Find all template usages:**
```bash
grep -r "{% url 'frontend:jobs:job_list" templates/
```

**Replace:**
```django
<!-- OLD -->
{% url 'frontend:jobs:job_list' %}

<!-- NEW -->
{% url 'frontend:jobs:job-list' %}
```

### Step 3: Update JavaScript

**Find JavaScript URL references:**
```bash
grep -r "url 'frontend:jobs:job_list" staticfiles/
```

### Step 4: Update Tests

**Update test assertions:**
```python
# OLD
response = self.client.get(reverse('frontend:jobs:job_list'))

# NEW
response = self.client.get(reverse('frontend:jobs:job-list'))
```

### Step 5: Run Tests

```bash
# Run full test suite
pytest

# Check for URL resolution errors
python manage.py check

# Test URL reverse lookups
python manage.py shell
>>> from django.urls import reverse
>>> reverse('frontend:jobs:job-list')
'/app/jobs/jobs/'
```

---

## Checklist for New URLs

When adding new URLs, ensure:

- [ ] URL name uses hyphens (e.g., `job-list`, not `job_list`)
- [ ] URL namespace is correct (`frontend:app:view` or `api:v1:app:endpoint`)
- [ ] Parameter names are consistent (`pk` for integers, `uuid` for UUIDs)
- [ ] Templates use `{% url %}` tag, not hardcoded paths
- [ ] URL is added to `urls_frontend.py` (templates) or `api/urls.py` (API)
- [ ] Tests use `reverse()` to resolve URLs
- [ ] JavaScript uses data attributes or Django-generated URLs
- [ ] Documentation updated (if public API)

---

## Common Mistakes to Avoid

### 1. Mixing Hyphens and Underscores
```python
# BAD - Inconsistent
path('jobs/', ..., name='job_list')  # underscore
path('candidates/', ..., name='candidate-list')  # hyphen

# GOOD - Consistent
path('jobs/', ..., name='job-list')  # hyphen
path('candidates/', ..., name='candidate-list')  # hyphen
```

### 2. Hardcoding URLs
```django
<!-- BAD -->
<a href="/app/jobs/jobs/">Jobs</a>

<!-- GOOD -->
<a href="{% url 'frontend:jobs:job-list' %}">Jobs</a>
```

### 3. Wrong Namespace Level
```django
<!-- BAD - Missing frontend namespace -->
{% url 'ats:job-list' %}

<!-- GOOD - Full namespace -->
{% url 'frontend:jobs:job-list' %}
```

### 4. Inconsistent Parameter Names
```python
# BAD - Mixed parameter names for same resource
path('jobs/<int:id>/', ...)  # uses 'id'
path('jobs/<int:pk>/edit/', ...)  # uses 'pk'

# GOOD - Consistent parameter names
path('jobs/<int:pk>/', ...)
path('jobs/<int:pk>/edit/', ...)
```

---

## Testing URLs

### Unit Tests

```python
from django.test import TestCase
from django.urls import reverse

class URLTests(TestCase):
    def test_job_list_url(self):
        """Test job list URL resolves correctly."""
        url = reverse('frontend:jobs:job-list')
        self.assertEqual(url, '/app/jobs/jobs/')

    def test_job_detail_url(self):
        """Test job detail URL with UUID parameter."""
        job_uuid = 'a1b2c3d4-e5f6-7890-abcd-ef1234567890'
        url = reverse('frontend:jobs:job-detail', args=[job_uuid])
        self.assertEqual(url, f'/app/jobs/jobs/{job_uuid}/')
```

### Integration Tests

```python
from django.test import Client

class ViewTests(TestCase):
    def setUp(self):
        self.client = Client()

    def test_job_list_view(self):
        """Test job list view returns 200."""
        response = self.client.get(reverse('frontend:jobs:job-list'))
        self.assertEqual(response.status_code, 200)
```

---

## References

- [App Structure Standards](APP_STRUCTURE.md)
- [Django URL Dispatcher Documentation](https://docs.djangoproject.com/en/5.2/topics/http/urls/)
- [DRF Routers Documentation](https://www.django-rest-framework.org/api-guide/routers/)

---

**Version:** 1.0
**Last Updated:** January 16, 2026
**Maintainer:** Backend Lead Developer
**Status:** Living Document - Update as patterns evolve
