{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block head_title %}Blogs - Zumodra{% endblock head_title %}

{% block header %}
    {% include 'header2.html' %}
{% endblock header %}

{% block content %}

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="breadcrumb_inner relative sm:mt-20 mt-16 lg:py-20 py-14">
            <div class="breadcrumb_bg absolute top-0 left-0 w-full h-full">
                <img src="{% static 'assets/images/components/breadcrumb_job.webp' %}" alt="breadcrumb_candidate" class="w-full h-full object-cover" />
            </div>
            <div class="container relative h-full">
                <div class="breadcrumb_content flex flex-col items-start justify-center xl:w-[1000px] lg:w-[848px] md:w-5/6 w-full h-full">
                    <div class="list_breadcrumb flex items-center gap-2 animate animate_top" style="--i: 1">
                        <a href="{% url 'home' %}" class="caption1 text-white">Home</a>
                        <span class="caption1 text-white opacity-40">/</span>
                        <span class="caption1 text-white">Blogs</span>
                        <span class="caption1 text-white opacity-40">/</span>
                        <span class="caption1 text-white opacity-60">Blogs Default</span>
                    </div>
                    <h3 class="heading3 text-white mt-2 animate animate_top" style="--i: 2">Blogs Default</h3>
                </div>
            </div>
        </div>
    </section>

    <!-- List blogs -->
    <div class="blogs lg:py-20 sm:py-14 py-10">
        <div class="container flex max-md:flex-col gap-y-12">
            <div class="list lg:pr-20 md:pr-12">
                <ul class="list_blog grid lg:grid-cols-2 sm:grid-cols-2 lg:gap-7.5 gap-6">
                    <!-- .live.in_menu -->
                    {% for post in page.get_children.live %}
                        <li class="blog_item">
                            <a href="{% pageurl post.specific %}" class="blog_thumb block overflow-hidden rounded-xl">
                                {% if post.specific.featured_image %}
                                    {% image post.specific.featured_image fill-600x400 as img %}
                                    <img src="{{ img.url }}" alt="{{ post.title }}" class="blog_img w-full" />
                                {% else %}
                                    <img src="{% static 'assets/images/blog/default.webp' %}" alt="{{ post.title }}" class="blog_img w-full" />
                                {% endif %}
                            </a>
                            <div class="blog_info flex flex-wrap items-center justify-between gap-8 gap-y-2 mt-5">
                                <div class="flex flex-wrap items-center gap-2">
                                    <div class="date flex items-center gap-2">
                                        <span class="ph ph-calendar-blank text-2xl"></span>
                                        <span class="blog_date">{{ post.first_published_at|date:"F d, Y" }}</span>
                                    </div>
                                    <div class="line w-px h-3 bg-line"></div>
                                    <a href="{% pageurl post.specific %}" class="category flex items-center gap-2 duration-300 hover:text-primary">
                                        <span class="ph ph-tag-simple text-2xl"></span>
                                        <span class="blog_category">{{ post.specific.categories.all|join:", " }}</span>
                                    </a>
                                </div>
                                <div class="flex flex-wrap items-center gap-2">
                                    <div class="comment flex items-center gap-2">
                                        <span class="ph ph-chats-circle text-2xl"></span>
                                        <span class="blog_comment">{{ post.specific.comments_count }}</span>
                                    </div>
                                    <div class="line w-px h-3 bg-line"></div>
                                    <div class="view flex items-center gap-2">
                                        <span class="ph ph-eye text-2xl"></span>
                                        <span class="blog_view">{{ post.specific.view_count|default:"0" }}</span>
                                    </div>
                                </div>
                            </div>
                            <a href="{% pageurl post.specific %}" class="heading5 blog_title mt-3 hover:underline">{{ post.title }}</a>
                            <p class="blog_desc mt-3 text-secondary">{{ post.specific.excerpt|truncatechars:300|richtext }}</p>
                        </li>
                    {% empty %}
                        <li class="blog_item">No blog posts found.</li>
                    {% endfor %}
                </ul>

                <!-- Pagination -->
                {% if page.get_children.live.in_menu|length > 0 %}
                <ul class="list_pagination menu_tab flex items-center justify-center gap-2 w-full md:mt-10 mt-7" role="tablist">
                    <!-- Pagination logic selon votre implÃ©mentation -->
                </ul>
                {% endif %}
            </div>

            <div class="blog_sidebar flex-shrink-0 lg:w-[360px] md:w-1/3 w-full h-fit">
                <form class="form-search overflow-hidden relative w-full h-12 rounded-lg">
                    <input class="py-2 pl-4 pr-16 w-full h-full border border-line rounded-lg" type="text" placeholder="Search" required />
                    <button class="flex items-center justify-center absolute top-0 right-0 h-full aspect-square rounded-r-lg bg-primary text-white duration-300 hover:bg-black">
                        <span class="ph ph-magnifying-glass text-lg"></span>
                    </button>
                </form>
                <div class="recent md:mt-10 mt-7">
                    <h6 class="heading6">Recent Posts</h6>
                    <ul class="list-recent mt-5">
                        {% for recent_post in page.get_children.live|slice:":5" %}
                        <li class="blog_item outstanding_blog">
                            <a href="{% pageurl recent_post %}" class="blog_thumb block w-full rounded-lg overflow-hidden">
                                {% if recent_post.specific.featured_image %}
                                    {% image recent_post.specific.featured_image fill-600x400 as img %}
                                    <img src="{{ img.url }}" alt="{{ recent_post.title }}" class="blog_img w-full" />
                                {% else %}
                                    <img src="{% static 'assets/images/blog/default.webp' %}" alt="{{ recent_post.title }}" class="blog_img w-full" />
                                {% endif %}
                            </a>
                            <div class="flex flex-wrap items-center gap-2 mt-5 mb-2">
                                <div class="date flex items-center gap-2">
                                    <span class="ph ph-calendar-blank text-xl"></span>
                                    <span class="blog_date caption1">{{ recent_post.first_published_at|date:"F d, Y" }}</span>
                                </div>
                                <div class="line w-px h-3 bg-line"></div>
                                <a href="{% pageurl recent_post %}" class="category flex items-center gap-2 duration-300 hover:text-primary">
                                    <span class="ph ph-tag-simple text-xl"></span>
                                    <span class="blog_category caption1">{{ recent_post.specific.categories.all|join:", " }}</span>
                                </a>
                            </div>
                            <a href="{% pageurl recent_post %}" class="blog_name heading6 duration-300 hover:text-primary">{{ recent_post.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="filter_category md:mt-10 mt-7">
                    <h6 class="heading6">Categories</h6>
                    <ul class="list_category flex flex-col gap-3 mt-5" role="tablist">
                        <!-- Liste dynamique ou statique -->
                        <li role="presentation">
                            <button class="tab_btn text-button -before line-before line-black" role="tab" aria-selected="false">Marketing</button>
                        </li>
                        <!-- Ajoutez plus de categories ici -->
                    </ul>
                </div>

                <div class="filter_tags md:mt-10 mt-7">
                    <h6 class="heading6">Popular Tag</h6>
                    <ul class="list_tags menu_tab flex items-center flex-wrap gap-3 mt-5" role="tablist">
                        <!-- Liste dynamique ou statique -->
                        <li role="presentation">
                            <button class="tag tab_btn -fill -border -rounded-sm caption1 capitalize hover:bg-black hover:text-white" role="tab" aria-selected="false">Digital Marketing</button>
                        </li>
                        <!-- Ajoutez plus de tags ici -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
