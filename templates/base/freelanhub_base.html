{% load static i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <!-- Branding updated from Zumodra to Zumodra -->
    <meta name="description" content="{% block meta_description %}Zumodra - Verify. Recruit. Hire. Risk-Free.{% endblock %}">
    <title>{% block title %}Zumodra - Multi-Tenant ATS & Freelance Marketplace{% endblock %}</title>
    <link rel="shortcut icon" href="{% static 'assets/images/fav.png' %}" type="image/x-icon">

    <!-- Zumodra CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/swiper-bundle.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/leaflet.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/slick.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'dist/output-tailwind.css' %}">
    <link rel="stylesheet" href="{% static 'dist/output-scss.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Django Messages (Tailwind-styled toast notifications) -->
    {% if messages %}
    <div class="fixed top-4 right-4 z-50 space-y-2" id="django-messages">
        {% for message in messages %}
        <div class="bg-white shadow-lg rounded-lg p-4 border-l-4 max-w-md
            {% if message.tags == 'success' %}border-green-500
            {% elif message.tags == 'error' or message.tags == 'danger' %}border-red-500
            {% elif message.tags == 'warning' %}border-yellow-500
            {% else %}border-blue-500{% endif %}">
            <div class="flex items-start justify-between">
                <div class="flex-1">
                    <p class="text-sm font-medium text-gray-900">{{ message }}</p>
                </div>
                <button onclick="this.parentElement.parentElement.remove()"
                        class="ml-4 text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
    <script>
        // Auto-dismiss messages after 5 seconds
        setTimeout(function() {
            const messagesContainer = document.getElementById('django-messages');
            if (messagesContainer) {
                messagesContainer.style.transition = 'opacity 0.5s';
                messagesContainer.style.opacity = '0';
                setTimeout(() => messagesContainer.remove(), 500);
            }
        }, 5000);
    </script>
    {% endif %}

    <!-- Header Block -->
    {% block header %}
    {% include 'components/freelanhub_header.html' %}
    {% endblock %}

    <!-- Main Content Block -->
    {% block content %}{% endblock %}

    <!-- Footer Block -->
    {% block footer %}
    {% include 'components/freelanhub_footer.html' %}
    {% endblock %}

    <!-- Zumodra JavaScript -->
    <script src="{% static 'assets/js/jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/phosphor-icons.js' %}"></script>
    <script src="{% static 'assets/js/slick.min.js' %}"></script>
    <script src="{% static 'assets/js/leaflet.js' %}"></script>
    <script src="{% static 'assets/js/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- Django-Required JavaScript (HTMX, Alpine.js) -->
    <script src="{% static 'assets/js/vendor/htmx.min.js' %}"></script>
    <script src="{% static 'assets/js/vendor/alpine.min.js' %}" defer></script>

    <!-- CSRF Token for HTMX Requests -->
    <script>
        document.body.addEventListener('htmx:configRequest', function(evt) {
            evt.detail.headers['X-CSRFToken'] = document.querySelector('meta[name="csrf-token"]').content;
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
