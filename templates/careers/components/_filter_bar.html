{% load static i18n %}

{# Filter bar with view toggle and sort options #}
<div class="flex flex-wrap items-center justify-between gap-4 pb-7.5 border-b border-line">
    <div class="left flex items-center gap-3">
        <strong class="total_result text-title">
            {% blocktrans count counter=total_jobs %}{{ counter }} result{% plural %}{{ counter }} results{% endblocktrans %}
        </strong>
        <div class="list_filter flex items-center gap-2">
            {# View Modes #}
            {% if view_mode == 'grid' %}
            <div class="item flex items-center gap-1 px-3 py-2 rounded-lg border border-primary bg-primary text-white">
                <span class="ph ph-grid-four text-xl"></span>
                <span class="caption1">{% trans "Grid" %}</span>
            </div>
            {% else %}
            <a href="{% url 'frontend:jobs:job_list' %}" class="item flex items-center gap-1 px-3 py-2 rounded-lg border border-line duration-300 hover:bg-primary hover:text-white hover:border-primary">
                <span class="ph ph-grid-four text-xl"></span>
                <span class="caption1">{% trans "Grid" %}</span>
            </a>
            {% endif %}

            {% if view_mode == 'map' %}
            <div class="item flex items-center gap-1 px-3 py-2 rounded-lg border border-primary bg-primary text-white">
                <span class="ph ph-map-pin text-xl"></span>
                <span class="caption1">{% trans "Map" %}</span>
            </div>
            {% else %}
            <a href="{% url 'careers:browse_jobs_map' %}" class="item flex items-center gap-1 px-3 py-2 rounded-lg border border-line duration-300 hover:bg-primary hover:text-white hover:border-primary">
                <span class="ph ph-map-pin text-xl"></span>
                <span class="caption1">{% trans "Map" %}</span>
            </a>
            {% endif %}
        </div>
    </div>

    <div class="right flex items-center gap-3">
        {# Sort Dropdown #}
        <div class="select_block sm:pr-16 pr-10 pl-3 py-2 border border-line rounded">
            <div class="select">
                <span class="selected caption1 capitalize" data-title="{% trans 'sort by (default)' %}">{% trans "sort by (default)" %}</span>
                <ul class="list_option scrollbar_custom max-h-[200px] p-0 bg-white">
                    <li class="capitalize" data-item="default">{% trans "sort by (default)" %}</li>
                    <li class="capitalize" data-item="newest">{% trans "newest first" %}</li>
                    <li class="capitalize" data-item="oldest">{% trans "oldest first" %}</li>
                    <li class="capitalize" data-item="salary-high">{% trans "salary (high to low)" %}</li>
                    <li class="capitalize" data-item="salary-low">{% trans "salary (low to high)" %}</li>
                </ul>
            </div>
            <span class="icon_down ph ph-caret-down right-3"></span>
        </div>
    </div>
</div>

{# Active Filters #}
{% if search or selected_category or selected_location or selected_job_type or selected_remote %}
<div class="list_filtered flex flex-wrap items-center gap-3 w-full mt-5">
    <span class="quantity pr-3 border-r border-line">{{ total_jobs|default:0 }}+ {% trans "Results" %}</span>
    <div class="list flex flex-wrap items-center gap-3">
        {% if search %}
        <span class="item flex items-center gap-2 px-3 py-1 rounded-full bg-surface text-secondary">
            "{{ search }}"
            <a href="?{% if selected_category %}category={{ selected_category }}&{% endif %}{% if selected_location %}location={{ selected_location }}&{% endif %}{% if selected_job_type %}job_type={{ selected_job_type }}{% endif %}{% if selected_remote %}remote=true{% endif %}" class="ph ph-x text-sm"></a>
        </span>
        {% endif %}
        {% if selected_category %}
        <span class="item flex items-center gap-2 px-3 py-1 rounded-full bg-surface text-secondary">
            {{ selected_category|title }}
            <a href="?{% if search %}search={{ search }}&{% endif %}{% if selected_location %}location={{ selected_location }}&{% endif %}{% if selected_job_type %}job_type={{ selected_job_type }}{% endif %}{% if selected_remote %}remote=true{% endif %}" class="ph ph-x text-sm"></a>
        </span>
        {% endif %}
        {% if selected_location %}
        <span class="item flex items-center gap-2 px-3 py-1 rounded-full bg-surface text-secondary">
            <span class="ph ph-map-pin text-sm"></span>
            {{ selected_location }}
            <a href="?{% if search %}search={{ search }}&{% endif %}{% if selected_category %}category={{ selected_category }}&{% endif %}{% if selected_job_type %}job_type={{ selected_job_type }}{% endif %}{% if selected_remote %}remote=true{% endif %}" class="ph ph-x text-sm"></a>
        </span>
        {% endif %}
        {% if selected_job_type %}
        <span class="item flex items-center gap-2 px-3 py-1 rounded-full bg-surface text-secondary">
            {{ selected_job_type|title }}
            <a href="?{% if search %}search={{ search }}&{% endif %}{% if selected_category %}category={{ selected_category }}&{% endif %}{% if selected_location %}location={{ selected_location }}{% endif %}{% if selected_remote %}remote=true{% endif %}" class="ph ph-x text-sm"></a>
        </span>
        {% endif %}
        {% if selected_remote %}
        <span class="item flex items-center gap-2 px-3 py-1 rounded-full bg-surface text-secondary">
            {% trans "Remote Only" %}
            <a href="?{% if search %}search={{ search }}&{% endif %}{% if selected_category %}category={{ selected_category }}&{% endif %}{% if selected_location %}location={{ selected_location }}{% endif %}{% if selected_job_type %}job_type={{ selected_job_type }}{% endif %}" class="ph ph-x text-sm"></a>
        </span>
        {% endif %}
    </div>
    <a href="{% if view_mode == 'map' %}{% url 'careers:browse_jobs_map' %}{% else %}{% url 'frontend:jobs:job_list' %}{% endif %}" class="clear_all_btn inline-flex items-center gap-1 py-1 px-2 border border-red text-red rounded-full duration-300 hover:bg-red hover:text-white">
        <span class="ph ph-x text-sm"></span>
        <span class="caption1">{% trans "Clear All" %}</span>
    </a>
</div>
{% endif %}
