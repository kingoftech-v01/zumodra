{% extends "base/freelanhub_dashboard_base.html" %}
{% load static i18n %}

{% block title %}{% trans "Create New Service" %} - Zumodra{% endblock %}

{% block breadcrumb %}
<li class="flex items-center">
    <svg class="zu-icon--sm text-secondary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
    </svg>
    <a href="{% url 'provider_dashboard' %}" class="ml-2 caption1 text-secondary hover:text-primary">
        {% trans "Provider Dashboard" %}
    </a>
</li>
<li class="flex items-center">
    <svg class="zu-icon--sm text-secondary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
    </svg>
    <span class="ml-2 caption1 text-secondary">{% trans "Create Service" %}</span>
</li>
{% endblock %}

{% block page_title %}{% trans "Create New Service" %}{% endblock %}

{% block page_description %}
<p class="mt-1 caption2 text-secondary">
    {% trans "Add a new service to your offerings." %}
</p>
{% endblock %}

{% block dashboard_content %}
<div class="max-w-3xl">
    <form method="post" enctype="multipart/form-data" class="space-y-7.5">
        {% csrf_token %}

        <!-- Service Thumbnail -->
        <div class="zu-card">
            <div class="zu-card__header">
                <h3 class="zu-card__title">{% trans "Service Image" %}</h3>
            </div>
            <div class="zu-card__body">
                <div class="flex items-center gap-7.5">
                    <div class="flex-shrink-0">
                        <div id="preview-container" class="w-40 h-28 rounded-lg bg-surface-light flex items-center justify-center overflow-hidden">
                            <svg class="zu-icon w-12 h-12 text-secondary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                    </div>
                    <div>
                        <label for="thumbnail" class="zu-btn zu-btn--secondary cursor-pointer">
                            <svg class="zu-icon w-5 h-5 mr-2 -ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            {% trans "Upload Image" %}
                        </label>
                        <input type="file" name="thumbnail" id="thumbnail" accept="image/*" class="hidden" onchange="previewImage(this)">
                        <p class="mt-2 caption2 text-secondary">{% trans "Recommended: 1280x720px. JPG, PNG. Max 5MB." %}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Basic Information -->
        <div class="zu-card">
            <div class="zu-card__header">
                <h3 class="zu-card__title">{% trans "Service Details" %}</h3>
            </div>
            <div class="zu-card__body">
                <div class="space-y-5">
                    <div class="zu-form-group">
                        <label for="name" class="zu-label zu-label--required">
                            {% trans "Service Title" %}
                        </label>
                        <input type="text"
                               name="name"
                               id="name"
                               required
                               maxlength="255"
                               class="zu-input"
                               placeholder="{% trans 'e.g., Professional Logo Design' %}">
                        <p class="mt-1 caption2 text-secondary">{% trans "Be specific and descriptive." %}</p>
                    </div>

                    <div class="zu-form-group">
                        <label for="category" class="zu-label">
                            {% trans "Category" %}
                        </label>
                        <select name="category"
                                id="category"
                                class="zu-input zu-select">
                            <option value="">{% trans "Select a category" %}</option>
                            {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="zu-form-group">
                        <label for="description" class="zu-label zu-label--required">
                            {% trans "Description" %}
                        </label>
                        <textarea name="description"
                                  id="description"
                                  rows="6"
                                  required
                                  class="zu-input zu-textarea"
                                  placeholder="{% trans 'Describe what you offer, your process, and what makes your service unique...' %}"></textarea>
                    </div>

                    <div class="zu-form-group">
                        <label for="tags" class="zu-label">
                            {% trans "Tags" %}
                        </label>
                        <input type="text"
                               name="tags"
                               id="tags"
                               class="zu-input"
                               placeholder="{% trans 'design, logo, branding (comma-separated)' %}">
                        <p class="mt-1 caption2 text-secondary">{% trans "Separate tags with commas." %}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pricing & Delivery -->
        <div class="zu-card">
            <div class="zu-card__header">
                <h3 class="zu-card__title">{% trans "Pricing & Delivery" %}</h3>
            </div>
            <div class="zu-card__body">
                <div class="space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-7.5">
                        <div class="zu-form-group">
                            <label for="price" class="zu-label zu-label--required">
                                {% trans "Price" %} ($)
                            </label>
                            <input type="number"
                                   name="price"
                                   id="price"
                                   required
                                   min="1"
                                   step="1"
                                   class="zu-input"
                                   placeholder="100">
                        </div>

                        <div class="zu-form-group">
                            <label for="duration_minutes" class="zu-label">
                                {% trans "Delivery Time (days)" %}
                            </label>
                            <input type="number"
                                   name="duration_minutes"
                                   id="duration_minutes"
                                   min="1"
                                   class="zu-input"
                                   placeholder="7">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit -->
        <div class="flex items-center justify-end gap-4">
            <a href="{% url 'provider_dashboard' %}" class="zu-btn zu-btn--secondary">
                {% trans "Cancel" %}
            </a>
            <button type="submit" class="zu-btn zu-btn--primary">
                {% trans "Create Service" %}
            </button>
        </div>
    </form>
</div>

<script>
function previewImage(input) {
    const container = document.getElementById('preview-container');
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            container.innerHTML = '<img src="' + e.target.result + '" class="w-full h-full object-cover">';
        };
        reader.readAsDataURL(input.files[0]);
    }
}
</script>
{% endblock %}
