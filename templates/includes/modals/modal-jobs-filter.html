{% load static %}

<!-- Job Filter Modal -->
<div class="modal_filter modal relative z-[999]" data-type="modal_filter">
    <div class="modal_bg absolute top-0 left-0 w-full h-full bg-black/40"></div>
    <div class="modal_inner relative lg:w-[800px] md:w-3/4 w-11/12 max-h-[90vh] overflow-y-auto bg-white rounded-2xl">
        <div class="modal_heading flex items-center justify-between p-5 border-b border-line">
            <h5 class="heading5">Filter Jobs</h5>
            <button class="close_modal_btn">
                <span class="ph-bold ph-x text-2xl"></span>
            </button>
        </div>
        <form id="job-filter-form" method="get" class="modal_content p-5">
            <!-- Search Input -->
            <div class="filter_item pb-5 border-b border-line">
                <label class="text-button mb-2 block">Search Keywords</label>
                <div class="relative">
                    <span class="ph-bold ph-magnifying-glass absolute top-1/2 -translate-y-1/2 left-3 text-xl text-secondary"></span>
                    <input
                        type="text"
                        name="q"
                        id="job-search"
                        class="w-full pl-10 pr-4 py-2.5 border border-line rounded-lg"
                        placeholder="Job title, keywords, or company"
                        value="{{ search_query }}"
                    />
                </div>
            </div>

            <!-- Location Filters -->
            <div class="filter_item py-5 border-b border-line">
                <label class="text-button mb-3 block">Location</label>
                <div class="grid sm:grid-cols-3 gap-3">
                    <div>
                        <input
                            type="text"
                            name="city"
                            class="w-full px-4 py-2.5 border border-line rounded-lg"
                            placeholder="City"
                            value="{{ selected_city }}"
                        />
                    </div>
                    <div>
                        <input
                            type="text"
                            name="state"
                            class="w-full px-4 py-2.5 border border-line rounded-lg"
                            placeholder="State"
                            value="{{ selected_state }}"
                        />
                    </div>
                    <div>
                        <input
                            type="text"
                            name="country"
                            class="w-full px-4 py-2.5 border border-line rounded-lg"
                            placeholder="Country"
                            value="{{ selected_country }}"
                        />
                    </div>
                </div>
                <div class="mt-3">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="checkbox"
                            name="remote_only"
                            value="true"
                            {% if remote_only %}checked{% endif %}
                            class="w-5 h-5 rounded border-line"
                        />
                        <span class="caption1">Remote jobs only</span>
                    </label>
                </div>
            </div>

            <!-- Employment Type -->
            <div class="filter_item py-5 border-b border-line">
                <label class="text-button mb-3 block">Employment Type</label>
                <div class="grid sm:grid-cols-2 gap-2">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value=""
                            {% if not selected_employment_type %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">All Types</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value="full-time"
                            {% if selected_employment_type == 'full-time' %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">Full-time</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value="part-time"
                            {% if selected_employment_type == 'part-time' %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">Part-time</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value="contract"
                            {% if selected_employment_type == 'contract' %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">Contract</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value="freelance"
                            {% if selected_employment_type == 'freelance' %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">Freelance</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input
                            type="radio"
                            name="employment_type"
                            value="internship"
                            {% if selected_employment_type == 'internship' %}checked{% endif %}
                            class="w-5 h-5"
                        />
                        <span class="caption1">Internship</span>
                    </label>
                </div>
            </div>

            <!-- Salary Range -->
            <div class="filter_item py-5 border-b border-line">
                <label class="text-button mb-3 block">Salary Range (Annual)</label>
                <div class="grid sm:grid-cols-2 gap-3">
                    <div>
                        <input
                            type="number"
                            name="salary_min"
                            class="w-full px-4 py-2.5 border border-line rounded-lg"
                            placeholder="Min Salary"
                            value="{{ salary_min }}"
                            min="0"
                            step="1000"
                        />
                    </div>
                    <div>
                        <input
                            type="number"
                            name="salary_max"
                            class="w-full px-4 py-2.5 border border-line rounded-lg"
                            placeholder="Max Salary"
                            value="{{ salary_max }}"
                            min="0"
                            step="1000"
                        />
                    </div>
                </div>
            </div>

            <!-- Sort Order -->
            <div class="filter_item py-5">
                <label class="text-button mb-3 block">Sort By</label>
                <select
                    name="sort"
                    id="job-sort"
                    class="w-full px-4 py-2.5 border border-line rounded-lg"
                >
                    <option value="default" {% if sort_by == 'default' %}selected{% endif %}>Featured First</option>
                    <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>Newest First</option>
                    <option value="oldest" {% if sort_by == 'oldest' %}selected{% endif %}>Oldest First</option>
                    <option value="random" {% if sort_by == 'random' %}selected{% endif %}>Random</option>
                </select>
            </div>

            <!-- Action Buttons -->
            <div class="modal_footer flex items-center gap-3 pt-5 border-t border-line">
                <button type="submit" class="button-main flex-1">Apply Filters</button>
                <button
                    type="button"
                    id="clear-filters"
                    class="button-main -border flex-1"
                >
                    Clear All
                </button>
            </div>
        </form>
    </div>
</div>
