{# =============================================================================
   ZUMODRA EMPLOYER CARD COMPONENT
   =============================================================================

   File: templates/components/marketplace/cards/employer_card.html
   Purpose: Display employer/company profiles in grid or list layouts

   Usage:
   {% include "components/marketplace/cards/employer_card.html" with employer=employer %}
   {% include "components/marketplace/cards/employer_card.html" with employer=employer layout="list" %}

   Parameters:
   - employer: Employer/Company object
   - layout: "grid" (default) or "list"
   - show_wishlist: Boolean to show/hide bookmark button (default: True)

   Author: Rhematek Solutions
   Last Updated: 2026-01-03
   ============================================================================= #}

{% load i18n static %}

{% if layout == "list" %}
{# List Layout #}
<li class="employers_item employers_item_list flex items-center gap-5 relative p-6 rounded-lg bg-white duration-300 shadow-lg hover:shadow-2xl">
    <a href="{{ employer.get_absolute_url }}" class="flex-shrink-0">
        {% if employer.logo %}
        <img src="{{ employer.logo.url }}" alt="{{ employer.name }}" class="w-20 h-20 rounded-lg object-cover" />
        {% else %}
        <div class="w-20 h-20 rounded-lg bg-primary/10 flex items-center justify-center">
            <span class="ph-fill ph-buildings text-3xl text-primary"></span>
        </div>
        {% endif %}
    </a>
    <div class="employers_content flex-grow">
        <div class="flex flex-wrap items-start justify-between gap-4">
            <div>
                <a href="{{ employer.get_absolute_url }}">
                    <strong class="employers_name -style-1 text-title duration-300 hover:text-primary">{{ employer.name }}</strong>
                </a>
                {% if employer.industry %}
                <p class="text-secondary text-sm mt-0.5">{{ employer.industry }}</p>
                {% endif %}
                <div class="flex flex-wrap items-center gap-4 mt-1">
                    {% if employer.location %}
                    <div class="flex items-center gap-1">
                        <span class="ph ph-map-pin text-xl text-secondary"></span>
                        <span class="employers_address -style-1 caption1 text-secondary">{{ employer.location }}</span>
                    </div>
                    {% endif %}
                    {% if employer.rating %}
                    <div class="flex items-center gap-1">
                        <span class="ph-fill ph-star text-yellow"></span>
                        <strong class="employers_rate text-sm font-semibold">{{ employer.rating|floatformat:1 }}</strong>
                        <span class="employers_rate_quantity caption1 text-secondary">({{ employer.review_count }} {% trans 'reviews' %})</span>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% if show_wishlist|default:True %}
            <button class="add_wishlist_btn -relative -border"
                    hx-post="{% url 'ats:employer_bookmark' employer.id %}"
                    hx-swap="outerHTML"
                    aria-label="{% trans 'Save employer' %}">
                <span class="ph ph-heart text-xl"></span>
                <span class="ph-fill ph-heart text-xl hidden"></span>
            </button>
            {% endif %}
        </div>
        <div class="employers_more_info flex flex-wrap items-center justify-between gap-2 mt-3 pt-3 border-t border-line">
            <span class="employers_jobs text-secondary">
                <span class="ph-bold ph-briefcase mr-1"></span>
                {{ employer.open_positions|default:0 }} {% trans 'open positions' %}
            </span>
            <span class="employers_employees text-secondary">
                <span class="ph-bold ph-users mr-1"></span>
                {{ employer.employee_count|default:"N/A" }} {% trans 'employees' %}
            </span>
        </div>
    </div>

    {# Verified Badge #}
    {% if employer.is_verified %}
    <div class="absolute top-4 left-4 px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded flex items-center gap-1">
        <span class="ph-fill ph-shield-check"></span>
        {% trans 'Verified' %}
    </div>
    {% endif %}
</li>

{% else %}
{# Grid Layout (Default) #}
<li class="employers_item relative p-6 rounded-lg bg-white duration-300 shadow-lg hover:shadow-2xl">
    <div class="employers_inner">
        {# Employer Profile #}
        <a href="{{ employer.get_absolute_url }}" class="flex flex-col items-center justify-center">
            {# Logo #}
            {% if employer.logo %}
            <img src="{{ employer.logo.url }}" alt="{{ employer.name }}" class="w-20 h-20 rounded-lg object-cover" />
            {% else %}
            <div class="w-20 h-20 rounded-lg bg-primary/10 flex items-center justify-center">
                <span class="ph-fill ph-buildings text-3xl text-primary"></span>
            </div>
            {% endif %}

            {# Name #}
            <strong class="employers_name -style-1 text-title mt-3 duration-300 hover:text-primary text-center">{{ employer.name }}</strong>

            {# Industry #}
            {% if employer.industry %}
            <p class="text-secondary text-sm mt-0.5 text-center">{{ employer.industry }}</p>
            {% endif %}

            {# Location #}
            {% if employer.location %}
            <div class="flex items-center gap-1 mt-1">
                <span class="ph ph-map-pin text-xl text-secondary"></span>
                <span class="employers_address -style-1 caption1 text-secondary">{{ employer.location }}</span>
            </div>
            {% endif %}

            {# Rating #}
            {% if employer.rating %}
            <div class="flex items-center gap-1 mt-1">
                <span class="ph-fill ph-star text-yellow"></span>
                <strong class="employers_rate text-sm font-semibold">{{ employer.rating|floatformat:1 }}</strong>
                <span class="employers_rate_quantity caption1 text-secondary">({{ employer.review_count }})</span>
            </div>
            {% endif %}
        </a>

        {# Stats #}
        <div class="employers_more_info flex flex-wrap items-center justify-between gap-2 mt-4 pt-4 border-t border-line">
            <span class="employers_jobs text-secondary text-sm">
                <span class="ph-bold ph-briefcase mr-1"></span>
                {{ employer.open_positions|default:0 }} {% trans 'jobs' %}
            </span>
            <span class="employers_employees text-secondary text-sm">
                <span class="ph-bold ph-users mr-1"></span>
                {{ employer.employee_count|default:"N/A" }}
            </span>
        </div>
    </div>

    {# Wishlist Button #}
    {% if show_wishlist|default:True %}
    <button class="add_wishlist_btn absolute top-4 right-4"
            hx-post="{% url 'ats:employer_bookmark' employer.id %}"
            hx-swap="outerHTML"
            aria-label="{% trans 'Save employer' %}">
        <span class="ph ph-heart text-xl"></span>
        <span class="ph-fill ph-heart text-xl hidden"></span>
    </button>
    {% endif %}

    {# Verified Badge #}
    {% if employer.is_verified %}
    <div class="absolute top-4 left-4 px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded flex items-center gap-1">
        <span class="ph-fill ph-shield-check"></span>
        {% trans 'Verified' %}
    </div>
    {% endif %}
</li>
{% endif %}
