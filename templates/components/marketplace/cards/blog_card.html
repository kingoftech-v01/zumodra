{# =============================================================================
   ZUMODRA BLOG CARD COMPONENT
   =============================================================================

   File: templates/components/marketplace/cards/blog_card.html
   Purpose: Display blog posts in grid or list layouts

   Usage:
   {% include "components/marketplace/cards/blog_card.html" with post=post %}
   {% include "components/marketplace/cards/blog_card.html" with post=post layout="list" %}

   Parameters:
   - post: Blog post object (Wagtail Page or similar)
   - layout: "grid" (default) or "list"

   Author: Rhematek Solutions
   Last Updated: 2026-01-03
   ============================================================================= #}

{% load i18n static wagtailimages_tags %}

{% if layout == "list" %}
{# List Layout #}
<article class="blog_item blog_item_list flex gap-6 rounded-lg bg-white shadow-md overflow-hidden duration-300 hover:shadow-xl">
    {# Thumbnail #}
    <a href="{{ post.url }}" class="blog_thumb flex-shrink-0 w-[300px] overflow-hidden">
        {% if post.featured_image %}
        {% image post.featured_image fill-300x200 as img %}
        <img src="{{ img.url }}" alt="{{ post.title }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300" />
        {% else %}
        <div class="w-full h-full bg-gray-100 flex items-center justify-center aspect-[3/2]">
            <span class="ph-fill ph-image text-4xl text-gray-400"></span>
        </div>
        {% endif %}
    </a>

    {# Content #}
    <div class="blog_info flex-grow py-5 pr-5">
        {# Meta #}
        <div class="flex items-center gap-4 text-secondary caption1">
            {% if post.category %}
            <a href="#" class="text-primary hover:underline">{{ post.category.name }}</a>
            {% endif %}
            <span class="flex items-center gap-1">
                <span class="ph ph-calendar-blank"></span>
                {{ post.first_published_at|date:"M d, Y" }}
            </span>
            {% if post.reading_time %}
            <span class="flex items-center gap-1">
                <span class="ph ph-clock"></span>
                {{ post.reading_time }} {% trans 'min read' %}
            </span>
            {% endif %}
        </div>

        {# Title #}
        <a href="{{ post.url }}" class="block mt-2">
            <h3 class="blog_title text-title text-xl font-semibold duration-300 hover:text-primary line-clamp-2">
                {{ post.title }}
            </h3>
        </a>

        {# Excerpt #}
        {% if post.search_description %}
        <p class="blog_excerpt text-secondary mt-2 line-clamp-2">
            {{ post.search_description }}
        </p>
        {% endif %}

        {# Author and Read More #}
        <div class="flex items-center justify-between mt-4 pt-4 border-t border-line">
            {% if post.owner %}
            <div class="blog_author flex items-center gap-2">
                {% if post.owner.profile_picture %}
                <img src="{{ post.owner.profile_picture.url }}" alt="{{ post.owner.get_full_name }}" class="w-8 h-8 rounded-full object-cover" />
                {% else %}
                <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
                    <span class="text-white text-xs font-semibold">{{ post.owner.first_name|slice:":1" }}</span>
                </div>
                {% endif %}
                <span class="text-sm text-secondary">{{ post.owner.get_full_name }}</span>
            </div>
            {% endif %}
            <a href="{{ post.url }}" class="text-primary text-sm font-medium flex items-center gap-1 hover:gap-2 transition-all">
                {% trans 'Read More' %}
                <span class="ph-bold ph-arrow-right"></span>
            </a>
        </div>
    </div>
</article>

{% else %}
{# Grid Layout (Default) #}
<article class="blog_item rounded-lg bg-white shadow-md overflow-hidden duration-300 hover:shadow-xl">
    {# Thumbnail #}
    <a href="{{ post.url }}" class="blog_thumb block overflow-hidden aspect-[16/10]">
        {% if post.featured_image %}
        {% image post.featured_image fill-400x250 as img %}
        <img src="{{ img.url }}" alt="{{ post.title }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300" />
        {% else %}
        <div class="w-full h-full bg-gray-100 flex items-center justify-center">
            <span class="ph-fill ph-image text-4xl text-gray-400"></span>
        </div>
        {% endif %}
    </a>

    {# Content #}
    <div class="blog_info p-5">
        {# Meta #}
        <div class="flex items-center gap-4 text-secondary caption1">
            {% if post.category %}
            <a href="#" class="text-primary hover:underline">{{ post.category.name }}</a>
            {% endif %}
            <span class="flex items-center gap-1">
                <span class="ph ph-calendar-blank"></span>
                {{ post.first_published_at|date:"M d, Y" }}
            </span>
        </div>

        {# Title #}
        <a href="{{ post.url }}" class="block mt-2">
            <h3 class="blog_title text-title text-lg font-semibold duration-300 hover:text-primary line-clamp-2">
                {{ post.title }}
            </h3>
        </a>

        {# Excerpt #}
        {% if post.search_description %}
        <p class="blog_excerpt text-secondary mt-2 line-clamp-2 text-sm">
            {{ post.search_description|truncatewords:20 }}
        </p>
        {% endif %}

        {# Read More #}
        <div class="mt-4 pt-4 border-t border-line">
            <a href="{{ post.url }}" class="text-primary text-sm font-medium flex items-center gap-1 hover:gap-2 transition-all">
                {% trans 'Read More' %}
                <span class="ph-bold ph-arrow-right"></span>
            </a>
        </div>
    </div>
</article>
{% endif %}
