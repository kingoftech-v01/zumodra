{# =============================================================================
   ZUMODRA TESTIMONIALS SECTION COMPONENT
   =============================================================================

   File: templates/components/marketplace/sections/testimonials.html
   Purpose: Display customer testimonials in a slider or grid layout

   Usage:
   {% include "components/marketplace/sections/testimonials.html" %}
   {% include "components/marketplace/sections/testimonials.html" with testimonials=testimonials layout="grid" %}

   Parameters:
   - testimonials: QuerySet of testimonial objects (optional, uses defaults if not provided)
   - layout: "slider" (default) or "grid"
   - title: Section title
   - subtitle: Section subtitle

   Author: Rhematek Solutions
   Last Updated: 2026-01-03
   ============================================================================= #}

{% load i18n static %}

<section class="testimonials lg:py-20 sm:py-14 py-10 bg-surface">
    <div class="container">
        {# Section Header #}
        <div class="text-center mb-10">
            <h2 class="heading3">{{ title|default:_("What Our Clients Say") }}</h2>
            <p class="body2 text-secondary mt-3 max-w-2xl mx-auto">
                {{ subtitle|default:_("From inspiring success stories to lessons learned, these voices reflect our commitment to excellence.") }}
            </p>
        </div>

        {% if layout == "grid" %}
        {# Grid Layout #}
        <div class="grid md:grid-cols-3 sm:grid-cols-2 gap-6">
            {% for testimonial in testimonials %}
            <div class="testimonials_item p-7 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow">
                {# Quote Icon #}
                <span class="ph-fill ph-quotes text-4xl text-primary/20 mb-4 block"></span>

                {# Quote Text #}
                <p class="text-title leading-relaxed">
                    "{{ testimonial.quote }}"
                </p>

                {# Author Info #}
                <div class="testimonials_info flex items-center mt-6 gap-4">
                    {% if testimonial.author_avatar %}
                    <img src="{{ testimonial.author_avatar.url }}" alt="{{ testimonial.author_name }}" class="w-14 h-14 rounded-full object-cover" />
                    {% else %}
                    <div class="w-14 h-14 rounded-full bg-primary flex items-center justify-center">
                        <span class="text-white text-xl font-semibold">{{ testimonial.author_name|slice:":1" }}</span>
                    </div>
                    {% endif %}
                    <div>
                        <h6 class="heading6">{{ testimonial.author_name }}</h6>
                        <span class="caption1 text-secondary">{{ testimonial.author_title }}</span>
                    </div>
                </div>
            </div>
            {% empty %}
            {# Default testimonials if none provided #}
            {% include "components/marketplace/sections/_testimonials_default.html" %}
            {% endfor %}
        </div>

        {% else %}
        {# Slider Layout (Default) #}
        <div class="swiper testimonials_slider relative"
             x-data
             x-init="new Swiper($el, {
                slidesPerView: 1,
                spaceBetween: 24,
                pagination: { el: '.swiper-pagination', clickable: true },
                breakpoints: {
                    640: { slidesPerView: 2 },
                    1024: { slidesPerView: 3 }
                }
             })">
            <div class="swiper-wrapper">
                {% for testimonial in testimonials %}
                <div class="swiper-slide h-auto">
                    <div class="testimonials_item p-7 bg-white rounded-lg shadow-md h-full flex flex-col">
                        {# Quote Icon #}
                        <span class="ph-fill ph-quotes text-4xl text-primary/20 mb-4 block"></span>

                        {# Quote Text #}
                        <p class="text-title leading-relaxed flex-grow">
                            "{{ testimonial.quote }}"
                        </p>

                        {# Author Info #}
                        <div class="testimonials_info flex items-center mt-6 gap-4">
                            {% if testimonial.author_avatar %}
                            <img src="{{ testimonial.author_avatar.url }}" alt="{{ testimonial.author_name }}" class="w-14 h-14 rounded-full object-cover" />
                            {% else %}
                            <div class="w-14 h-14 rounded-full bg-primary flex items-center justify-center">
                                <span class="text-white text-xl font-semibold">{{ testimonial.author_name|slice:":1" }}</span>
                            </div>
                            {% endif %}
                            <div>
                                <h6 class="heading6">{{ testimonial.author_name }}</h6>
                                <span class="caption1 text-secondary">{{ testimonial.author_title }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                {# Default testimonials if none provided #}
                <div class="swiper-slide h-auto">
                    <div class="testimonials_item p-7 bg-white rounded-lg shadow-md h-full flex flex-col">
                        <span class="ph-fill ph-quotes text-4xl text-primary/20 mb-4 block"></span>
                        <p class="text-title leading-relaxed flex-grow">
                            "{% trans 'Zumodra transformed our hiring process. Their platform made it easy to find qualified candidates quickly and efficiently. Highly recommend!' %}"
                        </p>
                        <div class="testimonials_info flex items-center mt-6 gap-4">
                            <div class="w-14 h-14 rounded-full bg-primary flex items-center justify-center">
                                <span class="text-white text-xl font-semibold">S</span>
                            </div>
                            <div>
                                <h6 class="heading6">Sarah Johnson</h6>
                                <span class="caption1 text-secondary">{% trans 'HR Director' %}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide h-auto">
                    <div class="testimonials_item p-7 bg-white rounded-lg shadow-md h-full flex flex-col">
                        <span class="ph-fill ph-quotes text-4xl text-primary/20 mb-4 block"></span>
                        <p class="text-title leading-relaxed flex-grow">
                            "{% trans 'The quality of freelancers on this platform is outstanding. We found our perfect match within days, and the project exceeded expectations.' %}"
                        </p>
                        <div class="testimonials_info flex items-center mt-6 gap-4">
                            <div class="w-14 h-14 rounded-full bg-primary flex items-center justify-center">
                                <span class="text-white text-xl font-semibold">M</span>
                            </div>
                            <div>
                                <h6 class="heading6">Michael Chen</h6>
                                <span class="caption1 text-secondary">{% trans 'Product Manager' %}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide h-auto">
                    <div class="testimonials_item p-7 bg-white rounded-lg shadow-md h-full flex flex-col">
                        <span class="ph-fill ph-quotes text-4xl text-primary/20 mb-4 block"></span>
                        <p class="text-title leading-relaxed flex-grow">
                            "{% trans 'Incredible platform for finding top talent. The verification system gives us confidence in every hire we make through Zumodra.' %}"
                        </p>
                        <div class="testimonials_info flex items-center mt-6 gap-4">
                            <div class="w-14 h-14 rounded-full bg-primary flex items-center justify-center">
                                <span class="text-white text-xl font-semibold">E</span>
                            </div>
                            <div>
                                <h6 class="heading6">Emily Roberts</h6>
                                <span class="caption1 text-secondary">{% trans 'CEO, TechStart' %}</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="swiper-pagination mt-8"></div>
        </div>
        {% endif %}
    </div>
</section>
