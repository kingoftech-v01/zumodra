{% load static i18n %}
{% comment %}
Reusable filter sidebar widget

Usage:
{% include 'components/dashboard/filter_sidebar.html' with filters=filter_groups %}

Parameters:
- filters: List of filter groups, each with 'label' and 'options'
- sidebar_class: Optional additional CSS classes
{% endcomment %}

<div class="filter_sidebar w-full lg:w-[280px] rounded-lg bg-white p-6 {{ sidebar_class|default:'' }}">
    <h5 class="heading5 mb-4">{% trans "Filters" %}</h5>

    <form method="get" action="">
        {% for filter_group in filters %}
        <div class="filter_group mb-6">
            <label class="text-button block mb-3">{{ filter_group.label }}</label>
            {% if filter_group.type == 'select' %}
            <select name="{{ filter_group.name }}" class="w-full px-4 py-2 rounded-lg border border-line focus:border-primary focus:outline-none">
                <option value="">All {{ filter_group.label }}</option>
                {% for option in filter_group.options %}
                <option value="{{ option.value }}" {% if option.selected %}selected{% endif %}>
                    {{ option.label }}
                </option>
                {% endfor %}
            </select>
            {% elif filter_group.type == 'checkbox' %}
            <div class="flex flex-col gap-2">
                {% for option in filter_group.options %}
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" name="{{ filter_group.name }}" value="{{ option.value }}"
                           {% if option.selected %}checked{% endif %}
                           class="w-4 h-4 rounded border-line text-primary focus:ring-primary">
                    <span class="caption1">{{ option.label }}</span>
                </label>
                {% endfor %}
            </div>
            {% elif filter_group.type == 'range' %}
            <div class="flex gap-2">
                <input type="number" name="{{ filter_group.name }}_min"
                       placeholder="Min" value="{{ filter_group.min_value|default:'' }}"
                       class="w-1/2 px-4 py-2 rounded-lg border border-line focus:border-primary focus:outline-none">
                <input type="number" name="{{ filter_group.name }}_max"
                       placeholder="Max" value="{{ filter_group.max_value|default:'' }}"
                       class="w-1/2 px-4 py-2 rounded-lg border border-line focus:border-primary focus:outline-none">
            </div>
            {% endif %}
        </div>
        {% endfor %}

        <div class="filter_actions flex gap-2">
            <button type="submit" class="btn btn-primary flex-1">
                {% trans "Apply Filters" %}
            </button>
            <button type="reset" class="btn btn-secondary">
                {% trans "Reset" %}
            </button>
        </div>
    </form>
</div>
