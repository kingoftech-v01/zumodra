{% extends "emails/base/base_email.html" %}
{% load i18n %}

{% block title %}{% trans "New Proposal Received" %}{% endblock %}

{% block preheader_text %}{% trans "You've received a new proposal for your project." %}{% endblock %}

{% block email_content %}
{% comment %} Greeting {% endcomment %}
<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td style="padding-bottom: 20px;">
            <h1 style="margin: 0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 600; color: #1e293b; line-height: 1.3;">
                {% trans "New Proposal Received" %}
            </h1>
        </td>
    </tr>
    <tr>
        <td style="padding-bottom: 24px;">
            <p style="margin: 0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; color: #475569; line-height: 1.6;">
                {% blocktrans %}Hi {{ client_name }}, you've received a new proposal for your project <strong>{{ project_title }}</strong>.{% endblocktrans %}
            </p>
        </td>
    </tr>
</table>

{% comment %} Proposal card {% endcomment %}
<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td style="background-color: #f8fafc; border-radius: 8px; padding: 24px;">
            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
                {% comment %} Freelancer info {% endcomment %}
                <tr>
                    <td style="padding-bottom: 20px; border-bottom: 1px solid #e2e8f0;">
                        <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                            <tr>
                                <td style="padding-right: 16px; vertical-align: middle;">
                                    {% if freelancer_avatar %}
                                    <img src="{{ freelancer_avatar }}" alt="{{ freelancer_name }}" width="56" height="56" style="border-radius: 50%; object-fit: cover;">
                                    {% else %}
                                    <div style="width: 56px; height: 56px; background-color: #2563eb; border-radius: 50%; text-align: center; line-height: 56px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 600; color: #ffffff;">
                                        {{ freelancer_initials }}
                                    </div>
                                    {% endif %}
                                </td>
                                <td style="vertical-align: middle;">
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 600; color: #1e293b;">{{ freelancer_name }}</span>
                                    {% if freelancer_verified %}
                                    <span style="display: inline-block; background-color: #dbeafe; color: #1e40af; font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 4px; margin-left: 8px; vertical-align: middle;">{% trans "VERIFIED" %}</span>
                                    {% endif %}
                                    <br>
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; color: #64748b;">{{ freelancer_title }}</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                {% comment %} Proposal details {% endcomment %}
                <tr>
                    <td style="padding: 20px 0;">
                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
                            <tr>
                                <td style="width: 50%; padding-right: 12px;">
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b; text-transform: uppercase;">{% trans "Proposed Rate" %}</span><br>
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 700; color: #1e293b;">{{ proposed_rate }} {{ currency }}</span>
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; color: #64748b;">/{{ rate_type }}</span>
                                </td>
                                <td style="width: 50%; padding-left: 12px;">
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b; text-transform: uppercase;">{% trans "Estimated Duration" %}</span><br>
                                    <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 700; color: #1e293b;">{{ estimated_duration }}</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                {% comment %} Cover letter excerpt {% endcomment %}
                <tr>
                    <td style="border-top: 1px solid #e2e8f0; padding-top: 20px;">
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b; text-transform: uppercase;">{% trans "Cover Letter" %}</span>
                        <p style="margin: 8px 0 0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; color: #475569; line-height: 1.6;">
                            "{{ cover_letter_excerpt }}..."
                        </p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

{% comment %} Freelancer stats {% endcomment %}
{% if freelancer_rating %}
<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td style="padding: 24px 0;">
            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td style="text-align: center; padding: 0 10px;">
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 700; color: #1e293b;">{{ freelancer_rating }}</span><br>
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b;">{% trans "Rating" %}</span>
                    </td>
                    <td style="text-align: center; padding: 0 10px; border-left: 1px solid #e2e8f0;">
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 700; color: #1e293b;">{{ completed_projects }}</span><br>
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b;">{% trans "Projects" %}</span>
                    </td>
                    <td style="text-align: center; padding: 0 10px; border-left: 1px solid #e2e8f0;">
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 700; color: #1e293b;">{{ success_rate }}%</span><br>
                        <span style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color: #64748b;">{% trans "Success" %}</span>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{% endif %}

{% comment %} CTA Button {% endcomment %}
<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td align="center" style="padding: 10px 0 20px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td align="center" style="background-color: #2563eb; border-radius: 6px;">
                        <a href="{{ proposal_url }}" class="btn-primary" style="display: inline-block; padding: 14px 32px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 600; color: #ffffff; text-decoration: none; border-radius: 6px;">
                            {% trans "View Proposal" %}
                        </a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{% endblock %}

{% block email_reason %}
{% trans "You received this email because you posted a project on Zumodra Marketplace." %}
{% endblock %}
