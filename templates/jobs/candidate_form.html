{% extends "base/freelanhub_dashboard_base.html" %}
{% load static i18n widget_tweaks %}

{% block page_title %}
{% if is_create %}
    {% trans "Add New Candidate" %}
{% else %}
    {% trans "Edit Candidate" %}
{% endif %}
{% endblock %}

{% block dashboard_content %}
<!-- Breadcrumb -->
<div class="breadcrumb flex items-center gap-2 mb-6">
    <a href="{% url 'frontend:jobs:candidate_list' %}" class="text-secondary hover:text-primary caption1">{% trans "Candidates" %}</a>
    <span class="ph ph-caret-right text-secondary"></span>
    <span class="text-title caption1">
        {% if is_create %}{% trans "Add Candidate" %}{% else %}{% trans "Edit Candidate" %}{% endif %}
    </span>
</div>

<!-- Page Header -->
<div class="mb-6">
    <h3 class="heading3 text-title">
        {% if is_create %}
            {% trans "Add New Candidate" %}
        {% else %}
            {% trans "Edit Candidate" %}
        {% endif %}
    </h3>
    <p class="caption1 text-secondary mt-2">
        {% if is_create %}
            {% trans "Add a new candidate to your talent pool" %}
        {% else %}
            {% trans "Update candidate information" %}
        {% endif %}
    </p>
</div>

<div class="max-w-4xl">
    <form method="post" enctype="multipart/form-data" class="space-y-7.5">
        {% csrf_token %}

        <!-- Basic Information Card -->
        <div class="p-8 rounded-lg bg-white">
            <h4 class="heading5 text-title mb-6">{% trans "Basic Information" %}</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- First Name -->
                <div>
                    <label for="first_name" class="block caption1 font-medium text-title mb-2">
                        {% trans "First Name" %} <span class="text-red">*</span>
                    </label>
                    <input type="text"
                           id="first_name"
                           name="first_name"
                           value="{{ candidate.first_name|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           required>
                </div>

                <!-- Last Name -->
                <div>
                    <label for="last_name" class="block caption1 font-medium text-title mb-2">
                        {% trans "Last Name" %} <span class="text-red">*</span>
                    </label>
                    <input type="text"
                           id="last_name"
                           name="last_name"
                           value="{{ candidate.last_name|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           required>
                </div>

                <!-- Email -->
                <div>
                    <label for="email" class="block caption1 font-medium text-title mb-2">
                        {% trans "Email Address" %} <span class="text-red">*</span>
                    </label>
                    <input type="email"
                           id="email"
                           name="email"
                           value="{{ candidate.email|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           required>
                </div>

                <!-- Phone -->
                <div>
                    <label for="phone" class="block caption1 font-medium text-title mb-2">
                        {% trans "Phone Number" %}
                    </label>
                    <input type="tel"
                           id="phone"
                           name="phone"
                           value="{{ candidate.phone|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           placeholder="+1 (555) 123-4567">
                </div>

                <!-- LinkedIn -->
                <div>
                    <label for="linkedin_url" class="block caption1 font-medium text-title mb-2">
                        {% trans "LinkedIn Profile" %}
                    </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="ph ph-linkedin-logo text-secondary"></i>
                        </div>
                        <input type="url"
                               id="linkedin_url"
                               name="linkedin_url"
                               value="{{ candidate.linkedin_url|default:'' }}"
                               class="block w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                               placeholder="https://linkedin.com/in/username">
                    </div>
                </div>

                <!-- Location -->
                <div>
                    <label for="location" class="block caption1 font-medium text-title mb-2">
                        {% trans "Location" %}
                    </label>
                    <input type="text"
                           id="location"
                           name="location"
                           value="{{ candidate.location|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           placeholder="City, Country">
                </div>
            </div>
        </div>

        <!-- Professional Information Card -->
        <div class="p-8 rounded-lg bg-white">
            <h4 class="heading5 text-title mb-6">{% trans "Professional Information" %}</h4>
            <div class="space-y-6">
                <!-- Current Title -->
                <div>
                    <label for="current_title" class="block caption1 font-medium text-title mb-2">
                        {% trans "Current Title" %}
                    </label>
                    <input type="text"
                           id="current_title"
                           name="current_title"
                           value="{{ candidate.current_title|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           placeholder="e.g., Senior Software Engineer">
                </div>

                <!-- Current Company -->
                <div>
                    <label for="current_company" class="block caption1 font-medium text-title mb-2">
                        {% trans "Current Company" %}
                    </label>
                    <input type="text"
                           id="current_company"
                           name="current_company"
                           value="{{ candidate.current_company|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           placeholder="e.g., Tech Corp">
                </div>

                <!-- Years of Experience -->
                <div>
                    <label for="years_of_experience" class="block caption1 font-medium text-title mb-2">
                        {% trans "Years of Experience" %}
                    </label>
                    <input type="number"
                           id="years_of_experience"
                           name="years_of_experience"
                           value="{{ candidate.years_of_experience|default:'' }}"
                           class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                           min="0"
                           max="50"
                           step="0.5">
                </div>

                <!-- Skills -->
                <div>
                    <label for="skills" class="block caption1 font-medium text-title mb-2">
                        {% trans "Skills" %}
                    </label>
                    <textarea id="skills"
                              name="skills"
                              rows="3"
                              class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                              placeholder="Enter skills, separated by commas (e.g., Python, Django, React)">{{ candidate.skills|default:'' }}</textarea>
                    <p class="caption2 text-secondary mt-2">{% trans "Separate skills with commas" %}</p>
                </div>

                <!-- Bio/Summary -->
                <div>
                    <label for="bio" class="block caption1 font-medium text-title mb-2">
                        {% trans "Professional Summary" %}
                    </label>
                    <textarea id="bio"
                              name="bio"
                              rows="5"
                              class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                              placeholder="Brief professional summary...">{{ candidate.bio|default:'' }}</textarea>
                </div>
            </div>
        </div>

        <!-- Resume Upload Card -->
        <div class="p-8 rounded-lg bg-white">
            <h4 class="heading5 text-title mb-6">{% trans "Resume/CV" %}</h4>
            <div>
                <label for="resume" class="block caption1 font-medium text-title mb-2">
                    {% trans "Upload Resume" %}
                </label>
                <input type="file"
                       id="resume"
                       name="resume"
                       class="block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 caption1"
                       accept=".pdf,.doc,.docx">
                <p class="caption2 text-secondary mt-2">{% trans "Accepted formats: PDF, DOC, DOCX (Max 5MB)" %}</p>
                {% if candidate.resume %}
                <p class="caption1 text-secondary mt-2">
                    {% trans "Current file:" %} <a href="{{ candidate.resume.url }}" target="_blank" class="text-primary hover:underline">{% trans "View Resume" %}</a>
                </p>
                {% endif %}
            </div>
        </div>

        <!-- Form Actions -->
        <div class="flex items-center justify-end gap-3">
            <a href="{% url 'frontend:jobs:candidate_list' %}" class="button-main -border">
                {% trans "Cancel" %}
            </a>
            <button type="submit" class="button-main flex items-center gap-2">
                {% if is_create %}
                    <i class="ph ph-plus"></i>
                    {% trans "Add Candidate" %}
                {% else %}
                    <i class="ph ph-check"></i>
                    {% trans "Save Changes" %}
                {% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}
