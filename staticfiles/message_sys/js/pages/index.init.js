var input,filter,ul,li,a,i,j,div;function searchUser(){for(input=document.getElementById("searchChatUser"),filter=input.value.toUpperCase(),ul=document.querySelector(".chat-room-list"),li=ul.getElementsByTagName("li"),i=0;i<li.length;i++)-1<li[i].querySelector("p").innerText.toUpperCase().indexOf(filter)?li[i].style.display="":li[i].style.display="none"}function searchContacts(){for(input=document.getElementById("searchContact"),filter=input.value.toUpperCase(),list=document.querySelector(".sort-contact"),li=list.querySelectorAll(".mt-3 li"),div=list.querySelectorAll(".mt-3 .contact-list-title"),j=0;j<div.length;j++){var e=div[j];-1<(txtValue=e.innerText).toUpperCase().indexOf(filter)?div[j].style.display="":div[j].style.display="none"}for(i=0;i<li.length;i++)contactName=li[i],-1<(txtValue=contactName.querySelector("h5").innerText).toUpperCase().indexOf(filter)?li[i].style.display="":li[i].style.display="none"}function searchContactOnModal(){for(input=document.getElementById("searchContactModal"),filter=input.value.toUpperCase(),list=document.querySelector(".contact-modal-list"),li=list.querySelectorAll(".mt-2 li"),div=list.querySelectorAll(".mt-2 .contact-list-title"),j=0;j<div.length;j++){var e=div[j];-1<(txtValue=e.innerText).toUpperCase().indexOf(filter)?div[j].style.display="":div[j].style.display="none"}for(i=0;i<li.length;i++)contactName=li[i],-1<(txtValue=contactName.querySelector("h5").innerText).toUpperCase().indexOf(filter)?li[i].style.display="":li[i].style.display="none"}function searchBookmark(){for(var e,t=document.getElementById("searchbookmark").value.toUpperCase(),a=document.getElementById("chat-bookmark-list").getElementsByTagName("li"),s=0;s<a.length;s++)-1<((e=a[s].getElementsByTagName("a")[0]).textContent||e.innerText).toUpperCase().indexOf(t)?a[s].style.display="":a[s].style.display="none"}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):x.innerHTML="Geolocation is not supported by this browser."}function showPosition(e){x.innerHTML="Latitude: "+e.coords.latitude+"<br>Longitude: "+e.coords.longitude}function cameraPermission(){navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){video.srcObject=e}).catch(function(e){console.log(e)}):console.log("No")}function audioPermission(){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){window.localStream=e,window.localAudio.srcObject=e,window.localAudio.autoplay=!0})}function themeColor(e){var t=localStorage.getItem("activeCustomcolor");t&&(document.getElementById(t).checked=!0),document.querySelectorAll(".theme-color").forEach(function(a){var e=document.querySelector("input[name=bgcolor-radio]:checked");e&&(e=e.id,e=document.getElementsByClassName(e),e=window.getComputedStyle(e[0],null).getPropertyValue("background-image"),rgbColorSecondary=e.substring(e.indexOf("b")+2,e.indexOf(")")),rgbColorPrimary=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")-1)),a.addEventListener("click",function(e){a.id&&localStorage.setItem("activeCustomcolor",a.id);var t=document.querySelector("input[name=bgcolor-radio]:checked");t&&(t=t.id,t=document.getElementsByClassName(t))&&(t=window.getComputedStyle(t[0],null).getPropertyValue("background-image"),rgbColorSecondary=t.substring(t.indexOf("b")+2,t.indexOf(")")),rgbColorPrimary=t.substring(t.lastIndexOf("(")+1,t.lastIndexOf(")")-1),window.localStorage.setItem("colorPrimary",rgbColorPrimary),window.localStorage.setItem("colorSecondary",rgbColorSecondary),document.documentElement.style.setProperty("--bs-primary-rgb",window.localStorage.getItem("colorPrimary")),document.documentElement.style.setProperty("--bs-secondary-rgb",window.localStorage.getItem("colorSecondary")))})}),document.querySelectorAll(".colorpicker-primary").forEach(function(){var e=localStorage.getItem("colorPrimary")?"rgba("+localStorage.getItem("colorPrimary")+",1)":"#6153CC",i=Pickr.create({el:".colorpicker-primary",theme:"nano",default:e,swatches:null,defaultRepresentation:"RGBA",components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!0,save:!0}}});i.on("clear",function(e){}).on("cancel",function(e){}).on("change",function(e,t,a){var s=i.getColor().toRGBA().toString(0);rgbColorsPrimary=s.substring(s.indexOf("(")+1,s.lastIndexOf(",")),localStorage.setItem("colorPrimary",rgbColorsPrimary),document.documentElement.style.setProperty("--bs-primary-rgb",window.localStorage.getItem("colorPrimary"))})}),document.querySelectorAll(".colorpicker-secondary").forEach(function(){var e=localStorage.getItem("colorSecondary")?"rgba("+localStorage.getItem("colorSecondary")+",1)":"#b966c1",i=Pickr.create({el:".colorpicker-secondary",theme:"nano",default:e,swatches:null,defaultRepresentation:"RGBA",components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!0,save:!0}}});i.on("clear",function(e){}).on("cancel",function(e){}).on("change",function(e,t,a){var s=i.getColor().toRGBA().toString(0);rgbColorSecondary=s.substring(s.lastIndexOf("(")+1,s.lastIndexOf(",")),localStorage.setItem("colorSecondary",rgbColorSecondary),document.documentElement.style.setProperty("--bs-secondary-rgb",window.localStorage.getItem("colorSecondary"))})})}!function(){var y=!1,b="users-chat",l="/static/images/users/user-dummy-img.jpg",n="users",s=window.location.origin+"//static/js/dir/",c="",d=1;function a(){var a=document.getElementsByClassName("user-chat");document.querySelectorAll(".chat-user-list li a").forEach(function(e){e.addEventListener("click",function(e){a.forEach(function(e){e.classList.add("user-chat-show")});var t=document.querySelector(".chat-user-list li.active");t&&t.classList.remove("active"),this.parentNode.classList.add("active")})}),document.querySelectorAll(".sort-contact ul li").forEach(function(e){e.addEventListener("click",function(e){a.forEach(function(e){e.classList.add("user-chat-show")})})}),document.querySelectorAll(".user-chat-remove").forEach(function(e){e.addEventListener("click",function(e){a.forEach(function(e){e.classList.remove("user-chat-show")})})})}document.getElementById("copyClipBoard").style.display="none",document.getElementById("copyClipBoardChannel").style.display="none";function e(e,t){var a=new XMLHttpRequest;a.open("GET",s+e,!0),a.responseType="json",a.onload=function(){var e=a.status;t(200===e?null:e,a.response)},a.send()}function o(){"users"==n?(document.getElementById("channel-chat").style.display="none",document.getElementById("users-chat").style.display="block"):(document.getElementById("channel-chat").style.display="block",document.getElementById("users-chat").style.display="none"),H(s+"chats.json")}e("users.json",function(e,t){null!==e?console.log("Something went wrong: "+e):(t[0].favorites.forEach(function(e,t){var a=e.profile?'<img src="'+e.profile+'" class="rounded-circle avatar-xs" alt=""><span class="user-status"></span>':'<div class="avatar-xs"><span class="avatar-title rounded-circle bg-primary text-white"><span class="username">'+e.nickname+'</span><span class="user-status"></span></span></div>',s=e.messagecount?'<div class="ms-auto"><span class="badge badge-soft-danger rounded p-1 fs-10">'+e.messagecount+"</span></div>":"",i=e.messagecount?'<a href="javascript: void(0);" class="unread-msg-user">':'<a href="javascript: void(0);">',l=1===e.id?"active":"";document.getElementById("favourite-users").innerHTML+='<li id="contact-id-'+e.id+'" data-name="favorite" class="'+l+'">                  '+i+'                       <div class="d-flex align-items-center">                          <div class="chat-user-img online align-self-center me-2 ms-0">                              '+a+'                          </div>                          <div class="overflow-hidden me-2">                              <p class="text-truncate chat-username mb-0">'+e.name+'</p>                              <p class="text-truncate text-muted fs-13 mb-0">'+e.lastmessage+"</p>                          </div>                          "+s+"                      </div>                  </a>              </li>"}),t[0].users.forEach(function(e,t){e.profile&&e.profile;var a=e.messagecount?'<div class="ms-auto"><span class="badge badge-soft-danger rounded p-1 fs-10">'+e.messagecount+"</span></div>":"",s=e.messagecount?'<a href="javascript: void(0);" class="unread-msg-user">':'<a href="javascript: void(0);">',i=1===e.id?"active":"",l=e.profile?'<img src="'+e.profile+'" class="rounded-circle avatar-xs" alt=""><span class="user-status"></span>':'<div class="avatar-xs"><span class="avatar-title rounded-circle bg-primary text-white"><span class="username">'+e.nickname+'</span><span class="user-status"></span></span></div>';document.getElementById("usersList").innerHTML+='<li id="contact-id-'+e.id+'" data-name="favorite" class="'+i+'">        '+s+'             <div class="d-flex align-items-center">                <div class="chat-user-img online align-self-center me-2 ms-0">                    '+l+'                </div>                <div class="overflow-hidden me-2">                    <p class="text-truncate chat-username mb-0">'+e.name+'</p>                    <p class="text-truncate text-muted fs-13 mb-0">'+e.lastmessage+"</p>                </div>                "+a+"            </div>        </a>    </li>"}),t[0].channels.forEach(function(e,t){e.profile&&e.profile;var a=e.messagecount?'<div class="flex-shrink-0 ms-2"><span class="badge badge-soft-danger rounded p-1 fs-10">'+e.messagecount+"</span></div>":"",s=e.messagecount?'<a href="javascript: void(0);" class="unread-msg-user">':'<a href="javascript: void(0);">',i=e.profile?'<img src="'+e.profile+'" class="rounded-circle avatar-xs" alt="">':'<div class="avatar-xs"><span class="avatar-title rounded-circle bg-primary text-white"><span class="username">'+e.nickname+"</span></span></div>";document.getElementById("channelList").innerHTML+='<li id="contact-id-'+e.id+'" data-name="channel">                '+s+'                     <div class="d-flex align-items-center">                        <div class="flex-shrink-0 me-2">                            <div class="chat-user-img online align-self-center">                            '+i+'                            </div>                        </div>                        <div class="flex-grow-1 overflow-hidden">                            <h6 class="text-truncate mb-0">'+e.name+'</h6>                            <p class="text-truncate text-muted fs-13 mb-0">'+e.lastmessage+"</p>                        </div>                        <div>"+a+"</div>                    </div>                </a>            </li>"})),a(),document.querySelectorAll("#favourite-users li, #usersList li")&&document.querySelectorAll("#favourite-users li, #usersList li").forEach(function(i){i.addEventListener("click",function(e){n="users",o(),b="users-chat";var t=i.getAttribute("id"),a=i.querySelector(".text-truncate").innerHTML;document.querySelector(".user-profile-sidebar .user-name").innerHTML=a;document.getElementById("users-chat").querySelector(".text-truncate .user-profile-show").innerHTML=a,document.querySelector(".user-profile-desc .text-truncate").innerHTML=a,document.querySelector(".chat-input-typing").style.display="block",document.querySelector(".user-profile-status").style.display="block",document.querySelector(".chat-input-typing .typing-user").innerHTML=a+' is Typing<span class="typing ms-2"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>',document.querySelector(".audiocallModal .text-truncate").innerHTML=a,document.querySelector(".videocallModal .text-truncate").innerHTML=a;var a=document.getElementById(t).querySelector(".avatar-xs").getAttribute("src"),s=(a?(document.querySelector(".user-own-img .avatar-sm").setAttribute("src",a),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",a),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",a),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",a)):(document.querySelector(".user-own-img .avatar-sm").setAttribute("src",l),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",l),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",l),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",l)),i.querySelector(".avatar-xs").getAttribute("src"));document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach(function(e){s?e.querySelector("img").setAttribute("src",s):e.querySelector("img").setAttribute("src",l)}),window.stop()})}),document.querySelectorAll("#channelList li").forEach(function(s){s.addEventListener("click",function(e){b="channel-chat",n="channel",o();var t=s.getAttribute("id"),a=s.querySelector(".text-truncate").innerHTML,a=(document.getElementById("channel-chat").querySelector(".text-truncate .user-profile-show").innerHTML=a,document.querySelector(".user-profile-desc .text-truncate").innerHTML=a,document.querySelector(".audiocallModal .text-truncate").innerHTML=a,document.querySelector(".videocallModal .text-truncate").innerHTML=a,document.querySelector(".user-profile-sidebar .user-name").innerHTML=a,document.querySelector(".chat-input-typing").style.display="none",document.querySelector(".user-profile-status").style.display="none",document.getElementById(t).querySelector(".avatar-xs").getAttribute("src"));null!==a?(document.querySelector("#channel-chat .user-own-img .avatar-sm").setAttribute("src",a),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",a),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",a),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",a)):(document.querySelector("#channel-chat .user-own-img .avatar-sm").setAttribute("src",l),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",l),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",l),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",l))})})}),e("callList.json",function(e,t){null!==e?console.log("Something went wrong: "+e):(callList=t).forEach(function(e,t){var a=!0===e.callVideo?'<button type="button" class="btn btn-link p-0 fs-20 stretched-link" data-bs-toggle="modal" data-bs-target=".videocallModal"><i class="'+e.callTypeIcon+'"></i></button>':'<button type="button" class="btn btn-link p-0 fs-20 stretched-link" data-bs-toggle="modal" data-bs-target=".audiocallModal"><i class="'+e.callTypeIcon+'"></i></button>',s=e.profile?'<img src="'+e.profile+'" class="rounded-circle avatar-xs" alt="">':'<div class="avatar-xs"><span class="avatar-title rounded-circle bg-danger text-white">RL</span></div>';document.getElementById("callList").innerHTML+='<li id="calls-id-'+e.id+'" >        <div class="d-flex align-items-center">        <div class="chat-user-img flex-shrink-0 me-2">            '+s+'        </div>            <div class="flex-grow-1 overflow-hidden">                <p class="text-truncate mb-0">'+e.name+'</p>                <div class="text-muted fs-12 text-truncate"><i class="'+e.callArrowType+'"></i> '+e.dateTime+'</div>            </div>            <div class="flex-shrink-0 ms-3">                <div class="d-flex align-items-center gap-3">                    <div>                        <h5 class="mb-0 fs-12 text-muted">'+e.callTime+"</h5>                    </div>                    <div>                       "+a+"                    </div>                </div>            </div>        </div>      </li>"}),document.querySelectorAll("#callList li").forEach(function(s){s.addEventListener("click",function(e){var t=s.getAttribute("id"),a=s.querySelector(".text-truncate").innerHTML,a=(document.querySelector(".videocallModal .text-truncate").innerHTML=a,document.querySelector(".audiocallModal .text-truncate").innerHTML=a,document.getElementById(t).querySelector(".avatar-xs").getAttribute("src"));a?(document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",a),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",a)):(document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",l),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",l))})})}),e("contacts.json",function(e,t){var s,i;null!==e?console.log("Something went wrong: "+e):((c=t).sort(function(e,t){return e.name.localeCompare(t.name)}),i=s="",c.forEach(function(e,t){var a=e.profile?'<img src="'+e.profile+'" class="img-fluid rounded-circle" alt="">':'<span class="avatar-title rounded-circle bg-primary fs-10">'+e.nickname+"</span>",a=(s='<li>              <div class="d-flex align-items-center">                  <div class="flex-shrink-0 me-2">                      <div class="avatar-xs">                          '+a+'                      </div>                  </div>                  <div class="flex-grow-1">                      <h5 class="fs-14 m-0" >'+e.name+'</h5>                  </div>                  <div class="flex-shrink-0">                      <div class="dropdown">                          <a href="#" class="text-muted dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                              <i class="bx bx-dots-vertical-rounded align-middle"></i>                          </a>                          <div class="dropdown-menu dropdown-menu-end">                              <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Edit <i class="bx bx-pencil ms-2 text-muted"></i></a>                              <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Block <i class="bx bx-block ms-2 text-muted"></i></a>                              <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Remove <i class="bx bx-trash ms-2 text-muted"></i></a>                          </div>                      </div>                  </div>              </div>          </li>','<div class="mt-3" >              <div class="contact-list-title">'+e.name.charAt(0).toUpperCase()+'                </div>          <ul id="contact-sort-'+e.name.charAt(0)+'" class="list-unstyled contact-list" >');i!=e.name.charAt(0)&&(document.getElementsByClassName("sort-contact")[0].innerHTML+=a),document.getElementById("contact-sort-"+e.name.charAt(0)).innerHTML=document.getElementById("contact-sort-"+e.name.charAt(0)).innerHTML+s,i=e.name.charAt(0)})),document.querySelectorAll(".sort-contact ul li").forEach(function(s){s.addEventListener("click",function(e){n="users",o();var t=s.querySelector("li .fs-14").innerHTML,a=(document.querySelector(".text-truncate .user-profile-show").innerHTML=t,document.querySelector(".user-profile-desc .text-truncate").innerHTML=t,document.querySelector(".audiocallModal .text-truncate").innerHTML=t,document.querySelector(".videocallModal .text-truncate").innerHTML=t,document.querySelector(".user-profile-sidebar .user-name").innerHTML=t,document.querySelector(".chat-input-typing").style.display="block",document.querySelector(".user-profile-status").style.display="block",document.querySelector(".chat-input-typing .typing-user").innerHTML=t+' is Typing<span class="typing ms-2"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>',s.querySelector("li .align-items-center").querySelector(".avatar-xs .rounded-circle").getAttribute("src"));a?(document.querySelector(".user-own-img .avatar-sm").setAttribute("src",a),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",a),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",a),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",a)):(document.querySelector(".user-own-img .avatar-sm").setAttribute("src",l),document.querySelector(".user-profile-sidebar .profile-img").setAttribute("src",l),document.querySelector(".audiocallModal .img-thumbnail").setAttribute("src",l),document.querySelector(".videocallModal .videocallModal-bg").setAttribute("src",l)),document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach(function(e){a?e.querySelector("img").setAttribute("src",a):e.querySelector("img").setAttribute("src",l)}),window.stop()})}),a()}),o();var t=document.querySelector(".user-profile-sidebar"),i=(document.querySelectorAll(".user-profile-show").forEach(function(e){e.addEventListener("click",function(e){t.classList.toggle("d-block")})}),window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#chat-conversation .simplebar-content-wrapper");e.scrollTop=e.scrollHeight}),document.getElementById("chatinputmorecollapse"));function x(e){var t=document.getElementById(e).querySelector("#chat-conversation .simplebar-content-wrapper"),e=document.getElementsByClassName("chat-conversation-list")[0]?document.getElementById(e).getElementsByClassName("chat-conversation-list")[0].scrollHeight-window.innerHeight+250:0;e&&t.scrollTo({top:e,behavior:"smooth"})}document.body.addEventListener("click",function(){new bootstrap.Collapse(i,{toggle:!1}).hide()}),i&&i.addEventListener("shown.bs.collapse",function(){new Swiper(".chatinput-links",{slidesPerView:3,spaceBetween:30,breakpoints:{768:{slidesPerView:4},1024:{slidesPerView:6}}})}),document.querySelectorAll(".contact-modal-list .contact-list li").forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("selected")})}),document.getElementById("favourite-users").onclick=function(){document.getElementById("chat-input").focus()},document.getElementById("usersList").onclick=function(){document.getElementById("chat-input").focus()},document.getElementById("channelList").onclick=function(){document.getElementById("chat-input").focus()};var r=document.querySelector("#chatinput-form"),w=document.querySelector("#chat-input"),S=document.querySelector(".chat-conversation-list");document.querySelector(".chat-input-feedback");function E(){var e=12<=(new Date).getHours()?"pm":"am",t=12<(new Date).getHours()?(new Date).getHours()%12:(new Date).getHours(),a=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes();return t<10?"0"+t+":"+a+" "+e:t+":"+a+" "+e}setInterval(E,1e3);var k,u,q,L,m,j=0,A=[],p=1,C="",B=(document.querySelector("#audiofile-input").addEventListener("change",function(){var a=document.querySelector(".file_Upload"),e=(u=document.querySelector("#audiofile-input").files[0],C=URL.createObjectURL(u),new FileReader);e.readAsDataURL(u),a&&a.classList.add("show"),e.addEventListener("load",function(){var e=u.name,t=Math.round(u.size/1e6).toFixed(2);a.innerHTML='<div class="card p-2 border mb-2 audiofile_pre d-inline-block position-relative">            <div class="d-flex align-items-center">                <div class="flex-shrink-0 avatar-xs ms-1 me-3">                    <div class="avatar-title bg-soft-primary text-primary rounded-circle">                        <i class="bx bx-headphone"></i>                    </div>                </div>                <div class="flex-grow-1 overflow-hidden">                <h5 class="fs-14 text-truncate mb-1">'+e+'</h5>                  <input type="hidden" name="downloadaudiodata" value="'+C+'"/>                        <p class="text-muted text-truncate fs-13 mb-0">'+t+'mb</p>                </div>                <div class="flex-shrink-0 ms-3">                    <div class="d-flex gap-2">                        <div>                        <i class="ri-close-line text-danger audioFile-remove"  id="remove-audioFile"></i>                        </div>                    </div>                </div>            </div>          </div>',k=e,removeAudioFile(),A[p]=u},!1),p++}),[]),M=1,T=(document.querySelector("#attachedfile-input").addEventListener("change",function(){var a=document.querySelector(".file_Upload");m=document.querySelector("#attachedfile-input").files[0],(fr=new FileReader).readAsDataURL(m),a&&a.classList.add("show"),fr.addEventListener("load",function(){var e=m.name,t=Math.round(m.size/1e6).toFixed(2);a.innerHTML='<div class="card p-2 border attchedfile_pre d-inline-block position-relative">            <div class="d-flex align-items-center">                <div class="flex-shrink-0 avatar-xs ms-1 me-3">                    <div class="avatar-title bg-soft-primary text-primary rounded-circle">                        <i class="ri-attachment-2"></i>                    </div>                </div>                <div class="flex-grow-1 overflow-hidden">                <a href="" id="a"></a>                    <h5 class="fs-14 text-truncate mb-1">'+e+'</h5>                    <input type="hidden" name="downloaddata" value="'+m+'"/>                    <p class="text-muted text-truncate fs-13 mb-0">'+t+'mb</p>                </div>                <div class="flex-shrink-0 align-self-start ms-3">                    <div class="d-flex gap-2">                        <div>                        <i class="ri-close-line text-muted attechedFile-remove"  id="remove-attechedFile"></i>                        </div>                    </div>                </div>            </div>          </div>',q=e,L=t,B[M]=m,removeAttachedFile()},!1),M++}),[]);removeimg=1;document.querySelector("#galleryfile-input").addEventListener("change",function(){var s=document.querySelector(".file_Upload"),i=(s.insertAdjacentHTML("beforeend",'<div class="profile-media-img image_pre"></div>'),document.querySelector(".file_Upload .profile-media-img"));this.files&&[].forEach.call(this.files,function(e){if(!/\.(jpe?g|png|gif)$/i.test(e.name))return alert(e.name+" is not an image");var t=new FileReader,a="";t.addEventListener("load",function(){removeimg++,s&&s.classList.add("show"),T.push(t.result),a+='<div class="media-img-list" id="remove-image-'+removeimg+'">          <a href="#">              <img src="'+this.result+'" alt="'+e.name+'" class="img-fluid">          </a>            <i class="ri-close-line image-remove" onclick="removeImage(`remove-image-'+removeimg+'`)"></i>          </div>',i.insertAdjacentHTML("afterbegin",a),0}),t.readAsDataURL(e)})});r&&r.addEventListener("submit",function(e){e.preventDefault();var t,a,s,i,l,o,r,n,e=b,c=b,d=b,u=b,m=b,p=w.value,f=document.querySelector(".image_pre"),v=document.querySelector(".attchedfile_pre"),g=document.querySelector(".audiofile_pre"),h=document.querySelector(".chat-input-feedback");0===p.length?(h.classList.add("show"),setTimeout(function(){h.classList.remove("show")},2e3),null!=f?(h.classList.remove("show"),f=c,r=T,f=document.getElementById(c).querySelector(".chat-conversation-list"),n="",r.forEach(function(e){n+='<div class="message-img-list">          <div>            <a class="popup-img d-inline-block" href="'+e+'" target="_blank">                <img src="'+e+'" alt="" class="rounded border img-thumbnail" width="200" />            </a>          </div>          <div class="message-img-link">            <ul class="list-inline mb-0">              <li class="list-inline-item dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                    <i class="bx bx-dots-horizontal-rounded"></i>                </a>          <div class="dropdown-menu">            <a class="dropdown-item d-flex align-items-center justify-content-between" href="'+e+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between delete-image" id="delete-item-'+ ++j+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>          </div>        </li>      </ul>    </div>    </div>'}),null!=r&&(f.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+j+'" >        <div class="conversation-list">            <div class="user-chat-content">                <div class="ctext-wrap">                        <div class="message-img mb-0">'+n+'                    </div>                    </div>                  <div class="conversation-name">                    <small class="text-muted time">'+E()+'</small>                    <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                </div>          </div>        </li>'),_(),S.querySelectorAll(".chat-list").forEach(function(e){e.querySelectorAll(".delete-image").forEach(function(e){e.addEventListener("click",function(){(1==e.closest(".message-img").childElementCount?e.closest(".chat-list"):e.closest(".message-img-list")).remove()})})}),I.querySelectorAll(".chat-list").forEach(function(e){e.querySelectorAll(".delete-image").forEach(function(e){e.addEventListener("click",function(){(1==e.closest(".message-img").childElementCount?e.closest(".chat-list"):e.closest(".message-img-list")).remove()})})})),document.querySelector(".file_Upload").classList.remove("show"),T=[]):null!=v?(h.classList.remove("show"),r=d,v=f=void 0,f=q,v=L,j++,r=document.getElementById(d).querySelector(".chat-conversation-list"),null!=f&&r.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+j+'" >          <div class="conversation-list">              <div class="user-chat-content">                  <div class="ctext-wrap">                      <div class="ctext-wrap-content">                          <div class="p-3 border rounded-3">                              <div class="d-flex align-items-center attached-file">                                  <div class="flex-shrink-0 avatar-sm me-3 ms-0 attached-file-avatar">                                      <div class="avatar-title bg-soft-light rounded-circle fs-20"><i class="ri-attachment-2"></i></div>                                  </div>                                  <div class="flex-grow-1 overflow-hidden">                                      <div class="text-start">                                          <h5 class="fs-14 text-white mb-1">'+f+'</h5>                                          <p class="text-white-50 text-truncate fs-13 mb-0">'+v+'mb</p>                                      </div>                                  </div>                                  <div class="flex-shrink-0 ms-4">                                      <div class="d-flex gap-2 fs-20 d-flex align-items-start">                                          <div>                                              <a href="#" class="text-white-50 download-file" data-id="'+M+'"> <i class="bx bxs-download"></i> </a>                                          </div>                                      </div>                                  </div>                              </div>                          </div>                      </div>                      <div class="align-self-start message-box-drop d-flex">                      <div class="dropdown">                        <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                          <i class="ri-emotion-happy-line"></i>                        </a>                        <div class="dropdown-menu emoji-dropdown-menu">                          <div class="hstack align-items-center gap-2 px-2 fs-25">                            <a href="javascript:void(0);">üíõ</a>                            <a href="javascript:void(0);">ü§£</a>                            <a href="javascript:void(0);">üòú</a>                            <a href="javascript:void(0);">üòò</a>                            <a href="javascript:void(0);">üòç</a>                            <div class="avatar-xs">                            <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                            </div>                          </div>                        </div>                      </div>                      <div class="dropdown">                          <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="ri-more-2-fill"></i> </a>                          <div class="dropdown-menu">            <a class="dropdown-item d-flex align-items-center justify-content-between" href="'+f+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                          <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+j+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                      </div>                    </div>                    </div>                  </div>                <div class="conversation-name">                    <small class="text-muted time">'+E()+'</small>                      <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                    </div>                </div>              </div>            </li>'),(t=document.getElementById("chat-list-"+j)).querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){S.removeChild(t)})}),t.querySelectorAll(".download-file").forEach(function(s){s.addEventListener("click",function(e){e.preventDefault();var t,a,e=s.getAttribute("data-id");window.File&&window.FileReader&&window.FileList&&window.Blob?(t=new Blob([B[e]],{type:"application/pdf"}),(a=document.createElement("a")).href=window.URL.createObjectURL(t),a.download=B[e].name,a.click()):alert("The File APIs are not fully supported in this browser.")})}),document.querySelector(".file_Upload ").classList.remove("show")):null!=g&&(h.classList.remove("show"),v=u,f=void 0,f=k,j++,v=document.getElementById(u).querySelector(".chat-conversation-list"),null!=f&&v.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+j+'" >          <div class="conversation-list">              <div class="user-chat-content">                  <div class="ctext-wrap">                  <div class="audio-file-elem">                              <audio controls>                                  <source src="'+C+'" type="audio/mpeg">                              </audio>                          </div>                      <div class="align-self-start message-box-drop d-flex">                      <div class="dropdown">                        <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                          <i class="ri-emotion-happy-line"></i>                        </a>                        <div class="dropdown-menu emoji-dropdown-menu">                          <div class="hstack align-items-center gap-2 px-2 fs-25">                            <a href="javascript:void(0);">üíõ</a>                            <a href="javascript:void(0);">ü§£</a>                            <a href="javascript:void(0);">üòú</a>                            <a href="javascript:void(0);">üòò</a>                            <a href="javascript:void(0);">üòç</a>                            <div class="avatar-xs">                            <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                            </div>                          </div>                        </div>                      </div>                        <div class="dropdown">                            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="ri-more-2-fill"></i> </a>                            <div class="dropdown-menu">            <a class="dropdown-item d-flex align-items-center justify-content-between" href="'+f+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>            <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                                <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+j+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                            </div>                        </div>                      </div>                      </div>                      <div class="conversation-name">                          <small class="text-muted time">'+E()+'</small>                            <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                          </div>                        </div>                      </div>                    </li>'),(a=document.getElementById("chat-list-"+j)).querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){S.removeChild(a)})}),document.querySelectorAll(".download-file").forEach(function(s){s.addEventListener("click",function(e){e.preventDefault();var t,a,e=s.getAttribute("data-id");window.File&&window.FileReader&&window.FileList&&window.Blob?(t=new Blob([B[e]],{type:"application/mp3"}),(a=document.createElement("a")).href=window.URL.createObjectURL(t),a.download=A[e].name,a.click()):alert("The File APIs are not fully supported in this browser.")})}),document.querySelector(".file_Upload ").classList.remove("show"))):1==y?(g=m,v=p,f=document.querySelector(".user-profile-show").innerHTML,l=document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText,j++,g=document.getElementById(g).querySelector(".chat-conversation-list"),null!=v&&(g.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+j+'" >                <div class="conversation-list">                    <div class="user-chat-content">                        <div class="ctext-wrap">                            <div class="ctext-wrap-content">                            <div class="replymessage-block mb-0 d-flex align-items-start">                        <div class="flex-grow-1">                            <h5 class="conversation-name">'+f+'</h5>                            <p class="mb-0">'+l+'</p>                        </div>                        <div class="flex-shrink-0">                            <button type="button" class="btn btn-sm btn-link mt-n2 me-n3 fs-18">                            </button>                        </div>                    </div>                                <p class="mb-0 ctext-content mt-1">                                    '+v+'                                </p>                            </div>                            <div class="align-self-start message-box-drop d-flex">                            <div class="dropdown">                              <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                <i class="ri-emotion-happy-line"></i>                              </a>                              <div class="dropdown-menu emoji-dropdown-menu">                                <div class="hstack align-items-center gap-2 px-2 fs-25">                                  <a href="javascript:void(0);">üíõ</a>                                  <a href="javascript:void(0);">ü§£</a>                                  <a href="javascript:void(0);">üòú</a>                                  <a href="javascript:void(0);">üòò</a>                                  <a href="javascript:void(0);">üòç</a>                                  <div class="avatar-xs">                                    <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                                  </div>                                </div>                              </div>                            </div>                              <div class="dropdown">                                  <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                      <i class="ri-more-2-fill"></i>                                  </a>                                  <div class="dropdown-menu">                                      <a class="dropdown-item d-flex align-items-center justify-content-between reply-message" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between copy-message" href="#" id="copy-message-'+j+'">Copy <i class="bx bx-copy text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Mark as Unread <i class="bx bx-message-error text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+j+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                              </div>                            </div>                        </div>                    </div>                    <div class="conversation-name">                        <small class="text-muted time">'+E()+'</small>                        <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                    </div>                </div>            </div>        </li>'),0),(o=document.getElementById("chat-list-"+j)).querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){S.removeChild(o)})}),o.querySelectorAll(".copy-message").forEach(function(e){e.addEventListener("click",function(){document.getElementById("copyClipBoard").style.display="block",document.getElementById("copyClipBoardChannel").style.display="block",setTimeout(function(){document.getElementById("copyClipBoard").style.display="none",document.getElementById("copyClipBoardChannel").style.display="none"},1e3)})}),o.querySelectorAll(".reply-message").forEach(function(a){a.addEventListener("click",function(){var e=a.closest(".ctext-wrap").children[0].children[0].innerText,t=document.querySelector(".user-profile-show").innerHTML,e=(document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=e,!a.closest(".chat-list")||a.closest(".chat-list").classList.contains("left")?t:"You");document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=e})}),o.querySelectorAll(".copy-message").forEach(function(e){e.addEventListener("click",function(){o.childNodes[1].children[1].firstElementChild.firstElementChild.getAttribute("id"),isText=o.childNodes[1].children[1].firstElementChild.firstElementChild.innerText,navigator.clipboard.writeText(isText)})}),y=!1):(g=p,j++,s=document.getElementById(e).querySelector(".chat-conversation-list"),null!=g&&s.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+j+'" >                <div class="conversation-list">                    <div class="user-chat-content">                        <div class="ctext-wrap">                            <div class="ctext-wrap-content">                                <p class="mb-0 ctext-content">'+g+'</p>                            </div>                            <div class="align-self-start message-box-drop d-flex">                            <div class="dropdown">                              <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                <i class="ri-emotion-happy-line"></i>                              </a>                              <div class="dropdown-menu emoji-dropdown-menu">                                <div class="hstack align-items-center gap-2 px-2 fs-25">                                  <a href="javascript:void(0);">üíõ</a>                                  <a href="javascript:void(0);">ü§£</a>                                  <a href="javascript:void(0);">üòú</a>                                  <a href="javascript:void(0);">üòò</a>                                  <a href="javascript:void(0);">üòç</a>                                  <div class="avatar-xs">                                  <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                                  </div>                                </div>                              </div>                            </div>                              <div class="dropdown">                                  <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                      <i class="ri-more-2-fill"></i>                                  </a>                                  <div class="dropdown-menu">                                      <a class="dropdown-item d-flex align-items-center justify-content-between reply-message" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between copy-message" href="#" id="copy-message-'+j+'">Copy <i class="bx bx-copy text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Mark as Unread <i class="bx bx-message-error text-muted ms-2"></i></a>                                      <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+j+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                              </div>                            </div>                        </div>                    </div>                    <div class="conversation-name">                        <small class="text-muted time">'+E()+'</small>                        <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                    </div>                </div>            </div>        </li>'),(i=document.getElementById("chat-list-"+j)).querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){s.removeChild(i)})}),i.querySelectorAll(".copy-message").forEach(function(e){e.addEventListener("click",function(){document.getElementById("copyClipBoard").style.display="block",document.getElementById("copyClipBoardChannel").style.display="block",setTimeout(function(){document.getElementById("copyClipBoard").style.display="none",document.getElementById("copyClipBoardChannel").style.display="none"},1e3)})}),i.querySelectorAll(".reply-message").forEach(function(i){i.addEventListener("click",function(){var e=document.querySelector(".replyCard"),t=document.querySelector("#close_toggle"),a=i.closest(".ctext-wrap").children[0].children[0].innerText,s=document.querySelector(".user-profile-show").innerHTML;y=!0,e.classList.add("show"),t.addEventListener("click",function(){e.classList.remove("show")}),document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=a,document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=s})}),i.querySelectorAll(".copy-message").forEach(function(e){e.addEventListener("click",function(){var e=i.childNodes[1].firstElementChild.firstElementChild.firstElementChild.firstElementChild.innerText;navigator.clipboard.writeText(e)})})),x(e||c||d||u||m),w.value="",document.querySelector(".image_pre")&&document.querySelector(".image_pre").remove(),document.getElementById("galleryfile-input").value="",document.querySelector(".attchedfile_pre")&&document.querySelector(".attchedfile_pre").remove(),document.getElementById("attachedfile-input").value="",document.querySelector(".audiofile_pre")&&document.querySelector(".audiofile_pre").remove(),document.getElementById("audiofile-input").value="",document.getElementById("close_toggle").click()});var I=document.querySelector("#channel-conversation");document.querySelector("#profile-foreground-img-file-input").addEventListener("change",function(){var e=document.querySelector(".profile-foreground-img"),t=document.querySelector(".profile-foreground-img-file-input").files[0],a=new FileReader;a.addEventListener("load",function(){e.src=a.result},!1),t&&a.readAsDataURL(t)}),document.querySelector("#profile-img-file-input").addEventListener("change",function(){var e=document.querySelector(".user-profile-image"),t=document.querySelector(".profile-img-file-input").files[0],a=new FileReader;a.addEventListener("load",function(){e.src=a.result},!1),t&&a.readAsDataURL(t)}),document.getElementById("user-profile-edit-btn").addEventListener("click",function(e){document.querySelectorAll(".edit-input .form-control").forEach(function(e){var t=document.getElementById("edit-icon");e.disabled?(t.classList.replace("bxs-pencil","bxs-save"),e.disabled=!1):(t.classList.replace("bxs-save","bxs-pencil"),e.disabled=!0)})});for(var f=document.getElementsByClassName("favourite-btn"),v=0;v<f.length;v++){var g=f[v];g.onclick=function(){g.classList.toggle("active")}}new FgEmojiPicker({trigger:[".emoji-btn"],removeOnSelection:!1,closeButton:!0,position:["top","right"],preFetch:!0,dir:"/static/js/dir/json",insertInto:document.querySelector(".chat-input")});function h(e,t,a,s,i,l,o){var r='<div class="ctext-wrap">';if(null!=t)r+='<div class="ctext-wrap-content" id='+e+'>        <p class="mb-0 ctext-content">'+t+"</p></div>";else if(a&&0<a.length){for(r+='<div class="message-img mb-0">',v=0;v<a.length;v++)r+='<div class="message-img-list">            <div>              <a class="popup-img d-inline-block" href="'+a[v]+'">                <img src="'+a[v]+'" alt="" class="rounded border img-thumbnail">              </a>            </div>            <div class="message-img-link">              <ul class="list-inline mb-0">                <li class="list-inline-item dropdown">                  <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                      <i class="bx bx-dots-horizontal-rounded"></i>                  </a>                <div class="dropdown-menu">                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="'+a[v]+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between"  href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between delete-image" href="#">Delete <i class="bx bx-trash ms-2 text-muted"></i></a>                </div>              </li>          </ul>        </div>      </div>';r+="</div>"}else 0<s.length?r+='<div class="ctext-wrap-content">            <div class="p-3 border rounded-3">            <div class="d-flex align-items-center attached-file">                <div class="flex-shrink-0 avatar-sm me-3 ms-0 attached-file-avatar">                    <div class="avatar-title bg-soft-light rounded-circle fs-20">                        <i class="ri-attachment-2"></i>                    </div>                </div>                <div class="flex-grow-1 overflow-hidden">                    <div class="text-start">                        <h5 class="fs-14 text-white mb-1">design-phase-1-approved.pdf</h5>                        <p class="text-white-50 text-truncate fs-13 mb-0">12.5 MB</p>                    </div>                </div>                <div class="flex-shrink-0 ms-4">                    <div class="d-flex gap-2 fs-20 d-flex align-items-start">                        <div>                            <a href="#" class="text-white-50">                                <i class="bx bxs-download"></i>                            </a>                        </div>                    </div>                </div>             </div>            </div>            </div>            <div class="emoji-icon">                <a class="dropdown-toggle" href="#">üëç</a>            </div>            <div class="align-self-start message-box-drop d-flex">              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  <i class="ri-emotion-happy-line"></i>                </a>                <div class="dropdown-menu emoji-dropdown-menu">                  <div class="hstack align-items-center gap-2 px-2 fs-25">                    <a href="javascript:void(0);">üíõ</a>                    <a href="javascript:void(0);">ü§£</a>                    <a href="javascript:void(0);">üòú</a>                    <a href="javascript:void(0);">üòò</a>                    <a href="javascript:void(0);">üòç</a>                    <div class="avatar-xs">                    <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                    </div>                  </div>                </div>              </div>              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                    <i class="ri-more-2-fill"></i>                </a>                <div class="dropdown-menu">                  <a class="dropdown-item d-flex align-items-center justify-content-between"  href="'+s+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                </div>              </div>          </div>':i&&0<i.length?r+='<div class="audio-file-elem">                              <audio controls>                                  <source src="'+i+'" type="audio/mpeg">                              </audio>                          </div>                  <div class="align-self-start message-box-drop d-flex">              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  <i class="ri-emotion-happy-line"></i>                </a>                <div class="dropdown-menu emoji-dropdown-menu">                  <div class="hstack align-items-center gap-2 px-2 fs-25">                    <a href="javascript:void(0);">üíõ</a>                    <a href="javascript:void(0);">ü§£</a>                    <a href="javascript:void(0);">üòú</a>                    <a href="javascript:void(0);">üòò</a>                    <a href="javascript:void(0);">üòç</a>                    <div class="avatar-xs">                    <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                    </div>                  </div>                </div>              </div>              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                    <i class="ri-more-2-fill"></i>                </a>                <div class="dropdown-menu">                  <a class="dropdown-item d-flex align-items-center justify-content-between"  href="'+i+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                </div>              </div>          </div>':l&&0<l.length&&(r+='<div>        <iframe src="'+l+'" title="YouTube video" class="w-100 rounded" autoplay allowfullscreen></iframe>      </div>                  <div class="align-self-start message-box-drop d-flex">              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  <i class="ri-emotion-happy-line"></i>                </a>                <div class="dropdown-menu emoji-dropdown-menu">                  <div class="hstack align-items-center gap-2 px-2 fs-25">                    <a href="javascript:void(0);">üíõ</a>                    <a href="javascript:void(0);">ü§£</a>                    <a href="javascript:void(0);">üòú</a>                    <a href="javascript:void(0);">üòò</a>                    <a href="javascript:void(0);">üòç</a>                    <div class="avatar-xs">                    <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                    </div>                  </div>                </div>              </div>              <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                    <i class="ri-more-2-fill"></i>                </a>                <div class="dropdown-menu">                  <a class="dropdown-item d-flex align-items-center justify-content-between"  href="'+l+'" download>Download <i class="bx bx-download ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                  <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                </div>              </div>          </div>');return!0===o&&(r+='<div class="align-self-start message-box-drop d-flex">            <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  <i class="ri-emotion-happy-line"></i>                </a>                <div class="dropdown-menu emoji-dropdown-menu">                  <div class="hstack align-items-center gap-2 px-2 fs-25">                    <a href="javascript:void(0);">üíõ</a>                    <a href="javascript:void(0);">ü§£</a>                    <a href="javascript:void(0);">üòú</a>                    <a href="javascript:void(0);">üòò</a>                    <a href="javascript:void(0);">üòç</a>                    <div class="avatar-xs">                    <a href="javascript:void(0);" class="avatar-title bg-soft-primary rounded-circle fs-19 text-primary">+</a>                    </div>                  </div>                </div>            </div>            <div class="dropdown">                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                    <i class="ri-more-2-fill"></i>                </a>                <div class="dropdown-menu">                    <a class="dropdown-item d-flex align-items-center justify-content-between reply-message" href="#" id="reply-message-'+j+'" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                    <a class="dropdown-item d-flex align-items-center justify-content-between copy-message" href="#" id="copy-message-'+j+'">Copy <i class="bx bx-copy text-muted ms-2"></i></a>                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Mark as Unread <i class="bx bx-message-error text-muted ms-2"></i></a>                    <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                </div>            </div>        </div>'),r+="</div>"}function H(e){var t,a;e=e,t=function(e,t){var i,l,a,s,o,r;null!==e?console.log("Something went wrong: "+e):(i="users"==n?t[0].chats:t[0].channel_chat,document.getElementById(n+"-conversation").innerHTML="",l=0,i.forEach(function(t,e){var a,s;0<l?l-=1:(s=t.from_id==d?" right":" left",a=c.find(function(e){return e.id==t.from_id}),s='<li class="chat-list'+s+'" id='+t.id+'>                        <div class="conversation-list">',d!=t.from_id&&(s+='<div class="chat-avatar"><img src="'+a.profile+'" alt=""></div>'),s=(s+='<div class="user-chat-content">')+h(t.id,t.msg,t.has_images,t.has_files,t.has_audios,t.has_videos,t.has_dropDown),i[e+1]&&t.from_id==i[e+1].from_id&&(l=function(e,t,a){for(var s=0;e[t]&&e[t+1]&&e[t+1].from_id==a;)s++,t++;return s}(i,e,t.from_id),s+=function(e,t,a){for(var s=0;e[t]&&e[t+1]&&e[t+1].from_id==a;)s=h(e[t+1].id,e[t+1].msg,e[t+1].has_images,e[t+1].has_files,e[t+1].has_audios,e[t+1].has_videos,e[t+1].has_dropDown),t++;return s}(i,e,t.from_id)),s=s+('<div class="conversation-name"><small class="text-muted time">'+t.datetime)+'</small> <span class="text-success check-message-icon"><i class="bx bx-check-double"></i></span></div></div>                </div>            </li>',document.getElementById(n+"-conversation").innerHTML+=s)})),S.querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){(2==e.closest(".user-chat-content").childElementCount?e.closest(".chat-list"):e.closest(".ctext-wrap")).remove()})}),I.querySelectorAll(".delete-item").forEach(function(e){e.addEventListener("click",function(){(2==e.closest(".user-chat-content").childElementCount?e.closest(".chat-list"):e.closest(".ctext-wrap")).remove()})}),S.querySelectorAll(".chat-list").forEach(function(e){e.querySelectorAll(".delete-image").forEach(function(e){e.addEventListener("click",function(){(1==e.closest(".message-img").childElementCount?e.closest(".chat-list"):e.closest(".message-img-list")).remove()})})}),S.querySelectorAll(".copy-message").forEach(function(t){t.addEventListener("click",function(){var e=t.closest(".ctext-wrap").children[0]?t.closest(".ctext-wrap").children[0].children[0].innerText:"";navigator.clipboard.writeText(e)})}),I.querySelectorAll(".copy-message").forEach(function(t){t.addEventListener("click",function(){var e=t.closest(".ctext-wrap").children[0]?t.closest(".ctext-wrap").children[0].children[0].innerText:"";navigator.clipboard.writeText(e)})}),x("users-chat"),_(),document.querySelectorAll(".copy-message").forEach(function(e){e.addEventListener("click",function(){document.getElementById("copyClipBoard").style.display="block",document.getElementById("copyClipBoardChannel").style.display="block",setTimeout(function(){document.getElementById("copyClipBoard").style.display="none",document.getElementById("copyClipBoardChannel").style.display="none"},1e3)})}),e=S.querySelectorAll(".reply-message"),a=document.querySelector(".replyCard"),s=document.querySelector("#close_toggle"),e.forEach(function(t){t.addEventListener("click",function(){y=!0,a.classList.add("show"),s.addEventListener("click",function(){a.classList.remove("show")});var e=t.closest(".ctext-wrap").children[0].children[0].innerText,e=(document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=e,document.querySelector(".user-profile-show").innerHTML),e=!t.closest(".chat-list")||t.closest(".chat-list").classList.contains("left")?e:"You";document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=e})}),t=I.querySelectorAll(".reply-message"),o=document.querySelector(".replyCard"),r=document.querySelector("#close_toggle"),t.forEach(function(t){t.addEventListener("click",function(){y=!0,o.classList.add("show"),r.addEventListener("click",function(){o.classList.remove("show")});var e=t.closest(".ctext-wrap").children[0].children[0].innerText,e=(document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=e,document.querySelector(".user-profile-show").innerHTML);document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=e})})},(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="json",a.onload=function(){var e=a.status;t(200===e?null:e,a.response)},a.send()}function _(){GLightbox({selector:".popup-img",title:!1})}document.getElementById("emoji-btn").addEventListener("click",function(){setTimeout(function(){var e,t=document.getElementsByClassName("fg-emoji-picker")[0];t&&(e=window.getComputedStyle(t)?window.getComputedStyle(t).getPropertyValue("left"):"")&&(e=e.replace("px",""),t.style.left=e=e-40+"px")},0)})}(),document.documentElement.style.setProperty("--bs-primary-rgb",window.localStorage.getItem("colorPrimary")),document.documentElement.style.setProperty("--bs-secondary-rgb",window.localStorage.getItem("colorSecondary"));var primaryColor=window.getComputedStyle(document.body,null).getPropertyValue("--bs-primary-rgb");function removeImage(e){document.querySelector("#"+e).remove(),0==document.querySelectorAll(".image-remove").length&&document.querySelector(".file_Upload").classList.remove("show")}function removeAttachedFile(){document.getElementById("remove-attechedFile")&&(document.getElementsByClassName("attechedFile-remove")[0],document.getElementById("remove-attechedFile").addEventListener("click",function(e){e.target.closest(".attchedfile_pre").remove()})),document.querySelector("#remove-attechedFile").addEventListener("click",function(){document.querySelector(".file_Upload ").classList.remove("show")})}function removeAudioFile(){document.getElementById("remove-audioFile")&&(document.getElementsByClassName("audioFile-remove")[0],document.getElementById("remove-audioFile").addEventListener("click",function(e){e.target.closest(".audiofile_pre").remove()})),document.querySelector("#remove-audioFile").addEventListener("click",function(){document.querySelector(".file_Upload ").classList.remove("show")})}themeColor(primaryColor);