/**
 * Dark Mode Styles for Zumodra
 *
 * Features:
 * - Comprehensive color scheme overrides
 * - Smooth 300ms transitions
 * - Shadow and depth adjustments
 * - Image and media handling
 * - Component-specific dark mode styles
 *
 * Usage:
 * - Applied when [data-theme="dark"] is set on <html>
 * - Also supports .theme-dark class
 */

/* ==========================================================================
   CSS Custom Properties - Light Theme (Default)
   ========================================================================== */

:root {
    /* Background colors */
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --bg-elevated: #ffffff;
    --bg-overlay: rgba(0, 0, 0, 0.5);
    --bg-hover: rgba(0, 0, 0, 0.04);
    --bg-active: rgba(0, 0, 0, 0.08);

    /* Text colors */
    --text-primary: #212529;
    --text-secondary: #495057;
    --text-tertiary: #6c757d;
    --text-muted: #adb5bd;
    --text-inverse: #ffffff;

    /* Border colors */
    --border-primary: #dee2e6;
    --border-secondary: #e9ecef;
    --border-focus: #0d6efd;
    --border-divider: rgba(0, 0, 0, 0.1);

    /* Shadow colors */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 1px 3px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1), 0 8px 10px rgba(0, 0, 0, 0.04);
    --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.06);

    /* Brand colors (consistent across themes) */
    --brand-primary: #0d6efd;
    --brand-primary-hover: #0b5ed7;
    --brand-primary-active: #0a58ca;
    --brand-secondary: #6c757d;
    --brand-success: #198754;
    --brand-danger: #dc3545;
    --brand-warning: #ffc107;
    --brand-info: #0dcaf0;

    /* Component colors */
    --card-bg: #ffffff;
    --card-border: #dee2e6;
    --input-bg: #ffffff;
    --input-border: #ced4da;
    --input-placeholder: #6c757d;
    --table-stripe: rgba(0, 0, 0, 0.02);
    --table-hover: rgba(0, 0, 0, 0.04);
    --modal-bg: #ffffff;
    --dropdown-bg: #ffffff;
    --tooltip-bg: #212529;
    --tooltip-text: #ffffff;

    /* Navigation */
    --nav-bg: #ffffff;
    --nav-text: #212529;
    --nav-hover: rgba(0, 0, 0, 0.05);
    --sidebar-bg: #f8f9fa;

    /* Code/Syntax */
    --code-bg: #f8f9fa;
    --code-text: #e83e8c;

    /* Scrollbar */
    --scrollbar-track: #f1f1f1;
    --scrollbar-thumb: #c1c1c1;
    --scrollbar-thumb-hover: #a1a1a1;

    /* Transitions */
    --theme-transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* ==========================================================================
   CSS Custom Properties - Dark Theme
   ========================================================================== */

[data-theme="dark"],
.theme-dark {
    /* Background colors */
    --bg-primary: #1a1a2e;
    --bg-secondary: #16213e;
    --bg-tertiary: #0f0f23;
    --bg-elevated: #252542;
    --bg-overlay: rgba(0, 0, 0, 0.7);
    --bg-hover: rgba(255, 255, 255, 0.06);
    --bg-active: rgba(255, 255, 255, 0.1);

    /* Text colors */
    --text-primary: #e4e6eb;
    --text-secondary: #b0b3b8;
    --text-tertiary: #8a8d91;
    --text-muted: #606770;
    --text-inverse: #1a1a2e;

    /* Border colors */
    --border-primary: #3a3a5c;
    --border-secondary: #2d2d4a;
    --border-focus: #4da3ff;
    --border-divider: rgba(255, 255, 255, 0.1);

    /* Shadow colors (darker, more subtle in dark mode) */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5), 0 4px 6px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.5), 0 8px 10px rgba(0, 0, 0, 0.3);
    --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.3);

    /* Brand colors (slightly adjusted for dark mode) */
    --brand-primary: #4da3ff;
    --brand-primary-hover: #3d93f0;
    --brand-primary-active: #2d83e0;
    --brand-secondary: #8a8d91;
    --brand-success: #28a745;
    --brand-danger: #f85149;
    --brand-warning: #ffda6a;
    --brand-info: #39c0ed;

    /* Component colors */
    --card-bg: #252542;
    --card-border: #3a3a5c;
    --input-bg: #1a1a2e;
    --input-border: #3a3a5c;
    --input-placeholder: #8a8d91;
    --table-stripe: rgba(255, 255, 255, 0.02);
    --table-hover: rgba(255, 255, 255, 0.05);
    --modal-bg: #252542;
    --dropdown-bg: #252542;
    --tooltip-bg: #e4e6eb;
    --tooltip-text: #1a1a2e;

    /* Navigation */
    --nav-bg: #16213e;
    --nav-text: #e4e6eb;
    --nav-hover: rgba(255, 255, 255, 0.08);
    --sidebar-bg: #16213e;

    /* Code/Syntax */
    --code-bg: #0f0f23;
    --code-text: #ff7eb6;

    /* Scrollbar */
    --scrollbar-track: #1a1a2e;
    --scrollbar-thumb: #3a3a5c;
    --scrollbar-thumb-hover: #4a4a6c;
}

/* ==========================================================================
   Theme Transition Animation
   ========================================================================== */

/* Add transition class during theme change */
.theme-transitioning,
.theme-transitioning *,
.theme-transitioning *::before,
.theme-transitioning *::after {
    transition: var(--theme-transition) !important;
}

/* Prevent transition on initial load */
html:not(.theme-transitioning) {
    transition: none;
}

/* ==========================================================================
   Base Element Overrides
   ========================================================================== */

html {
    color-scheme: light;
    background-color: var(--bg-primary);
}

[data-theme="dark"] {
    color-scheme: dark;
}

body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

/* ==========================================================================
   Typography
   ========================================================================== */

h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
}

p, li, td, th {
    color: var(--text-secondary);
}

a {
    color: var(--brand-primary);
}

a:hover {
    color: var(--brand-primary-hover);
}

/* Muted text */
.text-muted,
small,
.small {
    color: var(--text-tertiary) !important;
}

/* ==========================================================================
   Borders and Dividers
   ========================================================================== */

hr {
    border-color: var(--border-divider);
}

/* Generic border classes */
.border {
    border-color: var(--border-primary) !important;
}

.border-top,
.border-bottom,
.border-left,
.border-right {
    border-color: var(--border-primary) !important;
}

/* ==========================================================================
   Cards and Panels
   ========================================================================== */

.card,
.panel,
.box,
[class*="card-"] {
    background-color: var(--card-bg);
    border-color: var(--card-border);
    box-shadow: var(--shadow-sm);
}

.card-header,
.card-footer,
.panel-header,
.panel-footer {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
}

.card-body,
.panel-body {
    background-color: var(--card-bg);
}

/* ==========================================================================
   Forms and Inputs
   ========================================================================== */

input,
select,
textarea,
.form-control {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
}

input::placeholder,
textarea::placeholder {
    color: var(--input-placeholder);
}

input:focus,
select:focus,
textarea:focus,
.form-control:focus {
    border-color: var(--border-focus);
    background-color: var(--input-bg);
}

/* Disabled state */
input:disabled,
select:disabled,
textarea:disabled {
    background-color: var(--bg-tertiary);
    color: var(--text-muted);
}

/* Labels */
label,
.form-label {
    color: var(--text-primary);
}

/* Checkboxes and radios */
input[type="checkbox"],
input[type="radio"] {
    accent-color: var(--brand-primary);
}

/* Select dropdowns */
select option {
    background-color: var(--dropdown-bg);
    color: var(--text-primary);
}

/* ==========================================================================
   Buttons
   ========================================================================== */

/* Base button */
.btn {
    transition: var(--theme-transition);
}

/* Outline buttons */
.btn-outline-primary,
.btn-outline-secondary,
.btn-outline-light,
.btn-outline-dark {
    background-color: transparent;
}

[data-theme="dark"] .btn-outline-light {
    border-color: var(--border-primary);
    color: var(--text-primary);
}

[data-theme="dark"] .btn-outline-dark {
    border-color: var(--text-secondary);
    color: var(--text-secondary);
}

/* Light/Dark button swaps */
[data-theme="dark"] .btn-light {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border-primary);
}

[data-theme="dark"] .btn-dark {
    background-color: var(--bg-elevated);
    color: var(--text-primary);
}

/* ==========================================================================
   Tables
   ========================================================================== */

table,
.table {
    color: var(--text-primary);
}

table th,
.table th {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
}

table td,
.table td {
    border-color: var(--border-primary);
}

table tbody tr:nth-child(even),
.table-striped tbody tr:nth-child(even) {
    background-color: var(--table-stripe);
}

table tbody tr:hover,
.table-hover tbody tr:hover {
    background-color: var(--table-hover);
}

/* ==========================================================================
   Navigation
   ========================================================================== */

nav,
.navbar,
.nav {
    background-color: var(--nav-bg);
}

.navbar-brand,
.nav-link {
    color: var(--nav-text);
}

.nav-link:hover,
.nav-link:focus {
    background-color: var(--nav-hover);
}

.nav-link.active,
.nav-item.active .nav-link {
    color: var(--brand-primary);
}

/* Sidebar */
.sidebar,
.side-nav {
    background-color: var(--sidebar-bg);
}

/* ==========================================================================
   Dropdowns and Menus
   ========================================================================== */

.dropdown-menu,
.menu,
[role="menu"] {
    background-color: var(--dropdown-bg);
    border-color: var(--border-primary);
    box-shadow: var(--shadow-lg);
}

.dropdown-item,
.menu-item {
    color: var(--text-primary);
}

.dropdown-item:hover,
.dropdown-item:focus,
.menu-item:hover {
    background-color: var(--bg-hover);
}

.dropdown-divider {
    border-color: var(--border-divider);
}

/* ==========================================================================
   Modals and Dialogs
   ========================================================================== */

.modal-content,
.dialog,
[role="dialog"] {
    background-color: var(--modal-bg);
    border-color: var(--border-primary);
    box-shadow: var(--shadow-xl);
}

.modal-header,
.modal-footer {
    border-color: var(--border-primary);
}

.modal-backdrop,
.overlay {
    background-color: var(--bg-overlay);
}

/* ==========================================================================
   Tooltips and Popovers
   ========================================================================== */

.tooltip,
[role="tooltip"] {
    background-color: var(--tooltip-bg);
    color: var(--tooltip-text);
}

.popover {
    background-color: var(--dropdown-bg);
    border-color: var(--border-primary);
}

.popover-header {
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
}

.popover-body {
    color: var(--text-primary);
}

/* ==========================================================================
   Alerts and Notifications
   ========================================================================== */

.alert {
    border-width: 1px;
}

[data-theme="dark"] .alert-primary {
    background-color: rgba(77, 163, 255, 0.15);
    border-color: rgba(77, 163, 255, 0.3);
    color: #8cc4ff;
}

[data-theme="dark"] .alert-success {
    background-color: rgba(40, 167, 69, 0.15);
    border-color: rgba(40, 167, 69, 0.3);
    color: #75d99e;
}

[data-theme="dark"] .alert-warning {
    background-color: rgba(255, 193, 7, 0.15);
    border-color: rgba(255, 193, 7, 0.3);
    color: #ffda6a;
}

[data-theme="dark"] .alert-danger {
    background-color: rgba(248, 81, 73, 0.15);
    border-color: rgba(248, 81, 73, 0.3);
    color: #ff8589;
}

[data-theme="dark"] .alert-info {
    background-color: rgba(57, 192, 237, 0.15);
    border-color: rgba(57, 192, 237, 0.3);
    color: #7dd3f0;
}

/* ==========================================================================
   Badges and Tags
   ========================================================================== */

[data-theme="dark"] .badge-light,
[data-theme="dark"] .bg-light {
    background-color: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .badge-dark,
[data-theme="dark"] .bg-dark {
    background-color: var(--bg-elevated) !important;
    color: var(--text-primary) !important;
}

/* ==========================================================================
   Code and Pre
   ========================================================================== */

code,
kbd,
pre,
samp {
    background-color: var(--code-bg);
}

code {
    color: var(--code-text);
}

pre {
    color: var(--text-primary);
    border-color: var(--border-primary);
}

kbd {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
}

/* ==========================================================================
   Images and Media
   ========================================================================== */

/* Slightly reduce brightness and increase contrast for images in dark mode */
[data-theme="dark"] img:not([data-no-dark-filter]) {
    filter: brightness(0.9) contrast(1.05);
}

/* Invert decorative SVG icons */
[data-theme="dark"] img.icon-invert,
[data-theme="dark"] svg.icon-invert {
    filter: invert(1) brightness(0.9);
}

/* Logos might need different treatment */
[data-theme="dark"] img.logo:not([data-no-dark-filter]) {
    filter: brightness(1.1);
}

/* Prevent filter on images that should remain unchanged */
img[data-no-dark-filter] {
    filter: none !important;
}

/* Video backgrounds */
[data-theme="dark"] video:not([data-no-dark-filter]) {
    filter: brightness(0.85);
}

/* ==========================================================================
   Scrollbars
   ========================================================================== */

/* Webkit browsers */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 6px;
    border: 3px solid var(--scrollbar-track);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* ==========================================================================
   Miscellaneous Components
   ========================================================================== */

/* Progress bars */
.progress {
    background-color: var(--bg-tertiary);
}

/* List groups */
.list-group-item {
    background-color: var(--card-bg);
    border-color: var(--border-primary);
    color: var(--text-primary);
}

.list-group-item:hover {
    background-color: var(--bg-hover);
}

.list-group-item.active {
    background-color: var(--brand-primary);
    border-color: var(--brand-primary);
}

/* Pagination */
.page-link {
    background-color: var(--card-bg);
    border-color: var(--border-primary);
    color: var(--text-primary);
}

.page-link:hover {
    background-color: var(--bg-hover);
}

.page-item.active .page-link {
    background-color: var(--brand-primary);
    border-color: var(--brand-primary);
}

/* Breadcrumbs */
.breadcrumb {
    background-color: var(--bg-secondary);
}

.breadcrumb-item + .breadcrumb-item::before {
    color: var(--text-tertiary);
}

/* Accordion */
.accordion-item {
    background-color: var(--card-bg);
    border-color: var(--border-primary);
}

.accordion-button {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
}

.accordion-button:not(.collapsed) {
    background-color: var(--bg-hover);
}

/* ==========================================================================
   Utility Overrides
   ========================================================================== */

/* Background utilities */
[data-theme="dark"] .bg-white {
    background-color: var(--bg-elevated) !important;
}

[data-theme="dark"] .bg-light {
    background-color: var(--bg-secondary) !important;
}

/* Text utilities */
[data-theme="dark"] .text-dark {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .text-body {
    color: var(--text-primary) !important;
}

/* Border utilities */
[data-theme="dark"] .border-light {
    border-color: var(--border-secondary) !important;
}

[data-theme="dark"] .border-dark {
    border-color: var(--border-primary) !important;
}

/* ==========================================================================
   Print Styles (Reset dark mode for printing)
   ========================================================================== */

@media print {
    [data-theme="dark"] {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --text-primary: #212529;
        --text-secondary: #495057;
        --border-primary: #dee2e6;
    }

    [data-theme="dark"] img {
        filter: none !important;
    }
}
