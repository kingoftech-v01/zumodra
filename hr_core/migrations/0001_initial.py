# Generated by Django 5.2.7 on 2026-01-18 07:40

import django.contrib.postgres.fields
import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('configurations', '0001_initial'),
        ('jobs', '0001_initial'),
        ('tenants', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='DocumentTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('category', models.CharField(choices=[('offer_letter', 'Offer Letter'), ('contract', 'Employment Contract'), ('nda', 'Non-Disclosure Agreement'), ('policy', 'Policy Document'), ('form', 'Form'), ('other', 'Other')], default='other', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('content', models.TextField(help_text='HTML template with placeholders')),
                ('placeholders', models.JSONField(default=list, help_text='List of available placeholders')),
                ('requires_signature', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('version', models.CharField(default='1.0', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Document Template',
                'verbose_name_plural': 'Document Templates',
            },
        ),
        migrations.CreateModel(
            name='SkillCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('order', models.PositiveIntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Skill Category',
                'verbose_name_plural': 'Skill Categories',
                'ordering': ['order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('employee_id', models.CharField(help_text='Internal employee ID', max_length=50, unique=True)),
                ('status', models.CharField(choices=[('pending', 'Pending Start'), ('probation', 'Probationary'), ('active', 'Active'), ('on_leave', 'On Leave'), ('suspended', 'Suspended'), ('notice_period', 'Notice Period'), ('terminated', 'Terminated'), ('resigned', 'Resigned')], db_index=True, default='pending', max_length=20)),
                ('employment_type', models.CharField(choices=[('full_time', 'Full-time'), ('part_time', 'Part-time'), ('contract', 'Contract'), ('intern', 'Intern'), ('temporary', 'Temporary')], db_index=True, default='full_time', max_length=20)),
                ('job_title', models.CharField(max_length=200)),
                ('team', models.CharField(blank=True, max_length=100)),
                ('work_location', models.CharField(blank=True, max_length=200)),
                ('hire_date', models.DateField()),
                ('start_date', models.DateField(blank=True, null=True)),
                ('probation_end_date', models.DateField(blank=True, null=True)),
                ('termination_date', models.DateField(blank=True, null=True)),
                ('last_working_day', models.DateField(blank=True, null=True)),
                ('base_salary', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('salary_currency', models.CharField(default='CAD', max_length=3)),
                ('pay_frequency', models.CharField(choices=[('weekly', 'Weekly'), ('bi_weekly', 'Bi-weekly'), ('semi_monthly', 'Semi-monthly'), ('monthly', 'Monthly')], default='bi_weekly', max_length=20)),
                ('bank_account_info', models.JSONField(blank=True, default=dict, help_text='Encrypted bank account details')),
                ('pto_balance', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('sick_leave_balance', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('benefits_enrolled', models.JSONField(blank=True, default=list)),
                ('emergency_contact_name', models.CharField(blank=True, max_length=200)),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=30)),
                ('emergency_contact_relationship', models.CharField(blank=True, max_length=50)),
                ('sin_number_encrypted', models.CharField(blank=True, help_text='Encrypted SIN/SSN', max_length=500)),
                ('tax_info', models.JSONField(blank=True, default=dict)),
                ('emergency_contacts', models.JSONField(blank=True, default=list, help_text='List of emergency contacts with name, phone, relationship, is_primary')),
                ('work_authorization_status', models.CharField(blank=True, choices=[('citizen', 'Citizen'), ('permanent_resident', 'Permanent Resident'), ('work_permit', 'Work Permit'), ('visa', 'Work Visa'), ('other', 'Other')], max_length=50)),
                ('visa_type', models.CharField(blank=True, max_length=50)),
                ('visa_expiry', models.DateField(blank=True, null=True)),
                ('work_permit_number', models.CharField(blank=True, max_length=100)),
                ('work_permit_expiry', models.DateField(blank=True, null=True)),
                ('right_to_work_verified', models.BooleanField(default=False)),
                ('right_to_work_verified_date', models.DateField(blank=True, null=True)),
                ('skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, help_text='List of skills', size=None)),
                ('certifications', models.JSONField(blank=True, default=list, help_text='List of certifications with name, issuer, date, expiry')),
                ('next_review_date', models.DateField(blank=True, null=True)),
                ('review_frequency_months', models.PositiveIntegerField(default=12, help_text='Months between performance reviews')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employees', to='configurations.department')),
                ('from_application', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='employee_records', to='jobs.application')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='direct_reports', to='hr_core.employee')),
                ('right_to_work_verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='work_verifications', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(help_text='The tenant this record belongs to.', on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='tenants.tenant', verbose_name='Tenant')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='employee_record', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Employee',
                'verbose_name_plural': 'Employees',
                'ordering': ['user__last_name', 'user__first_name'],
            },
        ),
        migrations.CreateModel(
            name='Certification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('issuing_organization', models.CharField(max_length=200)),
                ('credential_id', models.CharField(blank=True, max_length=100)),
                ('credential_url', models.URLField(blank=True)),
                ('issue_date', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('verified_date', models.DateField(blank=True, null=True)),
                ('certificate_file', models.FileField(blank=True, null=True, upload_to='certifications/')),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='certification_verifications', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='certification_records', to='hr_core.employee')),
            ],
            options={
                'verbose_name': 'Certification',
                'verbose_name_plural': 'Certifications',
                'ordering': ['-issue_date'],
            },
        ),
        migrations.CreateModel(
            name='EmployeeDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('category', models.CharField(choices=[('offer_letter', 'Offer Letter'), ('contract', 'Employment Contract'), ('nda', 'Non-Disclosure Agreement'), ('policy', 'Policy Document'), ('form', 'Form'), ('other', 'Other')], db_index=True, default='other', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('file', models.FileField(help_text='Allowed formats: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG. Max size: 10MB', upload_to='employee_documents/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'xls', 'xlsx', 'jpg', 'jpeg', 'png'])])),
                ('file_type', models.CharField(blank=True, max_length=50)),
                ('file_size', models.PositiveIntegerField(blank=True, null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_signature', 'Pending Signature'), ('signed', 'Signed'), ('expired', 'Expired'), ('archived', 'Archived')], db_index=True, default='draft', max_length=20)),
                ('requires_signature', models.BooleanField(default=False)),
                ('signature_provider', models.CharField(blank=True, max_length=50)),
                ('signature_envelope_id', models.CharField(blank=True, max_length=255)),
                ('signed_at', models.DateTimeField(blank=True, null=True)),
                ('signed_document_url', models.URLField(blank=True)),
                ('expires_at', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='hr_core.employee')),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hr_core.documenttemplate')),
                ('uploaded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='uploaded_documents', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Employee Document',
                'verbose_name_plural': 'Employee Documents',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Offboarding',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('separation_type', models.CharField(choices=[('resignation', 'Resignation'), ('termination', 'Termination'), ('layoff', 'Layoff'), ('retirement', 'Retirement'), ('contract_end', 'Contract End'), ('mutual', 'Mutual Agreement'), ('other', 'Other')], db_index=True, max_length=20)),
                ('reason', models.TextField(blank=True)),
                ('notice_date', models.DateField()),
                ('last_working_day', models.DateField()),
                ('exit_interview_date', models.DateField(blank=True, null=True)),
                ('exit_interview_notes', models.TextField(blank=True)),
                ('knowledge_transfer_complete', models.BooleanField(default=False)),
                ('equipment_returned', models.BooleanField(default=False)),
                ('access_revoked', models.BooleanField(default=False)),
                ('final_paycheck_processed', models.BooleanField(default=False)),
                ('benefits_terminated', models.BooleanField(default=False)),
                ('exit_interview_completed', models.BooleanField(default=False)),
                ('severance_offered', models.BooleanField(default=False)),
                ('severance_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('pto_payout_days', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('eligible_for_rehire', models.BooleanField(default=True)),
                ('rehire_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('completed_at', models.DateTimeField(blank=True, db_index=True, null=True)),
                ('employee', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='offboarding', to='hr_core.employee')),
                ('processed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Offboarding',
                'verbose_name_plural': 'Offboardings',
            },
        ),
        migrations.CreateModel(
            name='OnboardingChecklist',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('employment_type', models.CharField(blank=True, choices=[('full_time', 'Full-time'), ('part_time', 'Part-time'), ('contract', 'Contract'), ('intern', 'Intern'), ('temporary', 'Temporary')], db_index=True, help_text='Apply to specific employment type or leave blank for all', max_length=20)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='configurations.department')),
            ],
            options={
                'verbose_name': 'Onboarding Checklist',
                'verbose_name_plural': 'Onboarding Checklists',
            },
        ),
        migrations.CreateModel(
            name='EmployeeOnboarding',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('start_date', models.DateField()),
                ('target_completion_date', models.DateField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('employee', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='onboarding', to='hr_core.employee')),
                ('checklist', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='hr_core.onboardingchecklist')),
            ],
            options={
                'verbose_name': 'Employee Onboarding',
                'verbose_name_plural': 'Employee Onboardings',
            },
        ),
        migrations.CreateModel(
            name='OnboardingTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('category', models.CharField(choices=[('documentation', 'Documentation'), ('it_setup', 'IT Setup'), ('training', 'Training'), ('introductions', 'Introductions'), ('compliance', 'Compliance'), ('benefits', 'Benefits Enrollment'), ('other', 'Other')], db_index=True, default='other', max_length=20)),
                ('order', models.PositiveIntegerField(default=0)),
                ('assigned_to_role', models.CharField(blank=True, help_text='Role responsible (HR, Manager, IT, etc.)', max_length=50)),
                ('due_days', models.PositiveIntegerField(default=0, help_text='Days after start date')),
                ('is_required', models.BooleanField(default=True)),
                ('requires_signature', models.BooleanField(default=False)),
                ('checklist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='hr_core.onboardingchecklist')),
                ('document_template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='hr_core.documenttemplate')),
            ],
            options={
                'verbose_name': 'Onboarding Task',
                'verbose_name_plural': 'Onboarding Tasks',
                'ordering': ['checklist', 'order'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('review_type', models.CharField(choices=[('probation', 'Probation Review'), ('annual', 'Annual Review'), ('mid_year', 'Mid-Year Review'), ('project', 'Project-Based'), ('promotion', 'Promotion Review')], db_index=True, default='annual', max_length=20)),
                ('review_period_start', models.DateField()),
                ('review_period_end', models.DateField()),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_self', 'Pending Self-Assessment'), ('pending_manager', 'Pending Manager Review'), ('pending_approval', 'Pending HR Approval'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], db_index=True, default='draft', max_length=20)),
                ('overall_rating', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('goals_met_percentage', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('competency_ratings', models.JSONField(blank=True, default=dict)),
                ('self_assessment', models.TextField(blank=True)),
                ('manager_feedback', models.TextField(blank=True)),
                ('accomplishments', models.TextField(blank=True)),
                ('areas_for_improvement', models.TextField(blank=True)),
                ('goals_for_next_period', models.TextField(blank=True)),
                ('promotion_recommended', models.BooleanField(default=False)),
                ('salary_increase_recommended', models.BooleanField(default=False)),
                ('salary_increase_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('pip_recommended', models.BooleanField(default=False, help_text='Performance Improvement Plan')),
                ('employee_signed_at', models.DateTimeField(blank=True, null=True)),
                ('manager_signed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('completed_at', models.DateTimeField(blank=True, db_index=True, null=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_reviews', to='hr_core.employee')),
                ('reviewer', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hr_performance_reviews_given', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Performance Review',
                'verbose_name_plural': 'Performance Reviews',
                'ordering': ['-review_period_end'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceImprovementPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('active', 'Active'), ('extended', 'Extended'), ('completed_success', 'Completed Successfully'), ('completed_fail', 'Completed Unsuccessfully'), ('terminated', 'Terminated'), ('cancelled', 'Cancelled')], db_index=True, default='draft', max_length=20)),
                ('reason', models.TextField(help_text='Detailed reason for placing employee on PIP')),
                ('performance_concerns', models.JSONField(blank=True, default=list, help_text='List of specific performance concerns')),
                ('goals', models.JSONField(blank=True, default=list, help_text='Improvement goals with measurable targets')),
                ('support_provided', models.TextField(blank=True, help_text='Resources and support provided to employee')),
                ('expectations', models.TextField(blank=True, help_text='Clear expectations for improvement')),
                ('start_date', models.DateField()),
                ('target_end_date', models.DateField()),
                ('actual_end_date', models.DateField(blank=True, null=True)),
                ('check_in_frequency_days', models.PositiveIntegerField(default=7, help_text='Days between check-in meetings')),
                ('next_check_in', models.DateField(blank=True, null=True)),
                ('outcome', models.CharField(choices=[('pending', 'Pending'), ('improved', 'Improved - PIP Closed'), ('terminated', 'Terminated'), ('demoted', 'Demoted'), ('transferred', 'Transferred'), ('extended', 'Extended'), ('resigned', 'Resigned During PIP')], db_index=True, default='pending', max_length=20)),
                ('final_assessment', models.TextField(blank=True)),
                ('final_rating', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('employee_acknowledged_at', models.DateTimeField(blank=True, null=True)),
                ('manager_signed_at', models.DateTimeField(blank=True, null=True)),
                ('hr_signed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pips', to='hr_core.employee')),
                ('hr_representative', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hr_pips', to=settings.AUTH_USER_MODEL)),
                ('initiated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='initiated_pips', to=settings.AUTH_USER_MODEL)),
                ('source_review', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resulting_pips', to='hr_core.performancereview')),
            ],
            options={
                'verbose_name': 'Performance Improvement Plan',
                'verbose_name_plural': 'Performance Improvement Plans',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='EmployeeGoal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('key_results', models.JSONField(blank=True, default=list, help_text='List of key results with title, target, and current value')),
                ('category', models.CharField(choices=[('performance', 'Performance'), ('development', 'Development'), ('project', 'Project'), ('team', 'Team'), ('personal', 'Personal')], db_index=True, default='performance', max_length=50)),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], db_index=True, default='medium', max_length=20)),
                ('start_date', models.DateField()),
                ('target_date', models.DateField()),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('active', 'Active'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('on_hold', 'On Hold')], default='draft', max_length=20)),
                ('progress_percentage', models.PositiveIntegerField(default=0, validators=[django.core.validators.MaxValueValidator(100)])),
                ('weight', models.DecimalField(decimal_places=2, default=Decimal('1.00'), help_text='Weight of this goal in overall performance', max_digits=5)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_goals', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='goals', to='hr_core.employee')),
                ('performance_review', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='goals', to='hr_core.performancereview')),
            ],
            options={
                'verbose_name': 'Employee Goal',
                'verbose_name_plural': 'Employee Goals',
                'ordering': ['-priority', 'target_date'],
            },
        ),
        migrations.CreateModel(
            name='PIPMilestone',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('success_criteria', models.TextField(blank=True, help_text='How success will be measured')),
                ('due_date', models.DateField()),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('achieved', 'Achieved'), ('not_achieved', 'Not Achieved'), ('deferred', 'Deferred')], db_index=True, default='pending', max_length=20)),
                ('progress_notes', models.TextField(blank=True)),
                ('weight', models.DecimalField(decimal_places=2, default=Decimal('1.00'), max_digits=5)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('pip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='milestones', to='hr_core.performanceimprovementplan')),
            ],
            options={
                'verbose_name': 'PIP Milestone',
                'verbose_name_plural': 'PIP Milestones',
                'ordering': ['due_date'],
            },
        ),
        migrations.CreateModel(
            name='PIPProgressNote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('note_type', models.CharField(choices=[('check_in', 'Check-in Meeting'), ('progress_update', 'Progress Update'), ('concern', 'Concern Raised'), ('achievement', 'Achievement'), ('extension', 'Extension'), ('formal_warning', 'Formal Warning'), ('other', 'Other')], default='progress_update', max_length=20)),
                ('content', models.TextField()),
                ('meeting_date', models.DateField(blank=True, null=True)),
                ('attendees', models.JSONField(blank=True, default=list)),
                ('action_items', models.JSONField(blank=True, default=list)),
                ('employee_response', models.TextField(blank=True)),
                ('employee_responded_at', models.DateTimeField(blank=True, null=True)),
                ('attachments', models.JSONField(blank=True, default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('author', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pip_notes_authored', to=settings.AUTH_USER_MODEL)),
                ('pip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='progress_notes', to='hr_core.performanceimprovementplan')),
            ],
            options={
                'verbose_name': 'PIP Progress Note',
                'verbose_name_plural': 'PIP Progress Notes',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Skill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='skills', to='hr_core.skillcategory')),
            ],
            options={
                'verbose_name': 'Skill',
                'verbose_name_plural': 'Skills',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffBalance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('balance', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Current available balance', max_digits=6)),
                ('accrued_this_year', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('used_this_year', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('carried_over', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Amount carried over from previous year', max_digits=6)),
                ('pending', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Amount in pending requests', max_digits=6)),
                ('last_accrual_date', models.DateField(blank=True, null=True)),
                ('accrual_rate_override', models.DecimalField(blank=True, decimal_places=2, help_text='Override default accrual rate for this employee', max_digits=5, null=True)),
                ('year', models.PositiveIntegerField(default=2026)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_off_balances', to='hr_core.employee')),
            ],
            options={
                'verbose_name': 'Time Off Balance',
                'verbose_name_plural': 'Time Off Balances',
                'ordering': ['employee', 'time_off_type'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffAccrualLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('accrual_date', models.DateField()),
                ('amount', models.DecimalField(decimal_places=2, max_digits=5)),
                ('balance_after', models.DecimalField(decimal_places=2, max_digits=6)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('balance', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='accrual_logs', to='hr_core.timeoffbalance')),
            ],
            options={
                'verbose_name': 'Time Off Accrual Log',
                'verbose_name_plural': 'Time Off Accrual Logs',
                'ordering': ['-accrual_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffBlackoutDate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('applies_to_all', models.BooleanField(default=True, help_text='Applies to all employees')),
                ('restriction_type', models.CharField(choices=[('blocked', 'Completely Blocked'), ('restricted', 'Restricted - Requires Manager Approval'), ('limited', 'Limited - Max 20% Team Capacity')], default='restricted', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('departments', models.ManyToManyField(blank=True, help_text='Specific departments this applies to', to='configurations.department')),
            ],
            options={
                'verbose_name': 'Time Off Blackout Date',
                'verbose_name_plural': 'Time Off Blackout Dates',
                'ordering': ['start_date'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, verbose_name='Updated at')),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('description', models.TextField(blank=True)),
                ('color', models.CharField(default='#3B82F6', max_length=7)),
                ('is_accrued', models.BooleanField(default=True)),
                ('accrual_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Days accrued per pay period', max_digits=5)),
                ('max_balance', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum balance allowed', max_digits=5, null=True)),
                ('max_carryover', models.DecimalField(blank=True, decimal_places=2, help_text='Max days to carry over to next year', max_digits=5, null=True)),
                ('requires_approval', models.BooleanField(default=True)),
                ('requires_documentation', models.BooleanField(default=False)),
                ('min_notice_days', models.PositiveIntegerField(default=0)),
                ('is_paid', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('tenant', models.ForeignKey(help_text='The tenant this record belongs to.', on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='tenants.tenant', verbose_name='Tenant')),
            ],
            options={
                'verbose_name': 'Time Off Type',
                'verbose_name_plural': 'Time Off Types',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='TimeOffRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Designates whether this record is active.', verbose_name='Is active')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_half_day', models.BooleanField(default=False)),
                ('half_day_period', models.CharField(blank=True, choices=[('am', 'Morning'), ('pm', 'Afternoon')], max_length=10)),
                ('total_days', models.DecimalField(decimal_places=2, max_digits=5)),
                ('reason', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending Approval'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('supporting_document', models.FileField(blank=True, help_text='Allowed formats: PDF, DOC, DOCX, JPG, PNG. Max size: 10MB', null=True, upload_to='time_off_docs/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'jpg', 'jpeg', 'png'])])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='time_off_approvals', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_off_requests', to='hr_core.employee')),
                ('tenant', models.ForeignKey(help_text='The tenant this record belongs to.', on_delete=django.db.models.deletion.CASCADE, related_name='%(app_label)s_%(class)s_set', to='tenants.tenant', verbose_name='Tenant')),
                ('time_off_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='requests', to='hr_core.timeofftype')),
            ],
            options={
                'verbose_name': 'Time Off Request',
                'verbose_name_plural': 'Time Off Requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='timeoffbalance',
            name='time_off_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='balances', to='hr_core.timeofftype'),
        ),
        migrations.CreateModel(
            name='EmployeeActivityLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('activity_type', models.CharField(choices=[('created', 'Employee Created'), ('updated', 'Information Updated'), ('status_change', 'Status Changed'), ('position_change', 'Position Changed'), ('department_change', 'Department Changed'), ('manager_change', 'Manager Changed'), ('salary_change', 'Salary Changed'), ('onboarding_started', 'Onboarding Started'), ('onboarding_completed', 'Onboarding Completed'), ('termination_initiated', 'Termination Initiated'), ('terminated', 'Terminated'), ('other', 'Other')], max_length=30)),
                ('description', models.TextField()),
                ('old_value', models.TextField(blank=True)),
                ('new_value', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_logs', to='hr_core.employee')),
                ('performed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Employee Activity Log',
                'verbose_name_plural': 'Employee Activity Logs',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['employee', '-created_at'], name='hr_core_emp_employe_50f647_idx'), models.Index(fields=['activity_type', '-created_at'], name='hr_core_emp_activit_69df3b_idx')],
            },
        ),
        migrations.CreateModel(
            name='EmployeeCompensation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('effective_date', models.DateField()),
                ('end_date', models.DateField(blank=True, help_text='When this compensation ended', null=True)),
                ('base_salary', models.DecimalField(decimal_places=2, help_text='Annual base salary', max_digits=12)),
                ('currency', models.CharField(default='CAD', max_length=3)),
                ('pay_frequency', models.CharField(choices=[('weekly', 'Weekly'), ('bi_weekly', 'Bi-weekly'), ('semi_monthly', 'Semi-monthly'), ('monthly', 'Monthly'), ('annually', 'Annually')], default='bi_weekly', max_length=20)),
                ('bonus_target_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Target bonus as percentage of base salary', max_digits=5, null=True)),
                ('bonus_type', models.CharField(choices=[('none', 'None'), ('annual', 'Annual Bonus'), ('quarterly', 'Quarterly Bonus'), ('discretionary', 'Discretionary'), ('performance', 'Performance-Based')], default='none', max_length=50)),
                ('commission_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Commission percentage if applicable', max_digits=5, null=True)),
                ('equity_shares', models.IntegerField(blank=True, help_text='Number of stock options/shares granted', null=True)),
                ('equity_vest_start', models.DateField(blank=True, null=True)),
                ('equity_vest_end', models.DateField(blank=True, null=True)),
                ('equity_cliff_months', models.PositiveIntegerField(blank=True, help_text='Cliff period in months', null=True)),
                ('change_reason', models.CharField(choices=[('hire', 'Initial Hire'), ('promotion', 'Promotion'), ('merit_increase', 'Merit Increase'), ('market_adjustment', 'Market Adjustment'), ('role_change', 'Role Change'), ('transfer', 'Transfer'), ('cost_of_living', 'Cost of Living Adjustment'), ('correction', 'Correction'), ('other', 'Other')], default='hire', max_length=30)),
                ('change_notes', models.TextField(blank=True)),
                ('previous_salary', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='compensation_approvals', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='compensation_created', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='compensation_history', to='hr_core.employee')),
            ],
            options={
                'verbose_name': 'Employee Compensation',
                'verbose_name_plural': 'Employee Compensation Records',
                'ordering': ['-effective_date'],
                'indexes': [models.Index(fields=['employee', 'effective_date'], name='hr_core_emp_employe_66e28b_idx'), models.Index(fields=['effective_date'], name='hr_core_emp_effecti_7947e3_idx')],
            },
        ),
        migrations.CreateModel(
            name='OnboardingTaskProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_completed', models.BooleanField(db_index=True, default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('reassignment_history', models.JSONField(blank=True, default=list, help_text='History of task reassignments')),
                ('assigned_to', models.ForeignKey(blank=True, help_text='User currently assigned to complete this task', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_onboarding_tasks', to=settings.AUTH_USER_MODEL)),
                ('completed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='completed_onboarding_tasks', to=settings.AUTH_USER_MODEL)),
                ('onboarding', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='task_progress', to='hr_core.employeeonboarding')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='hr_core.onboardingtask')),
            ],
            options={
                'verbose_name': 'Onboarding Task Progress',
                'verbose_name_plural': 'Onboarding Task Progress',
                'unique_together': {('onboarding', 'task')},
            },
        ),
        migrations.CreateModel(
            name='EmployeeSkill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('proficiency', models.CharField(choices=[('beginner', 'Beginner'), ('intermediate', 'Intermediate'), ('advanced', 'Advanced'), ('expert', 'Expert')], default='intermediate', max_length=20)),
                ('years_of_experience', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
                ('last_used_date', models.DateField(blank=True, null=True)),
                ('is_primary', models.BooleanField(default=False, help_text='Primary/featured skill')),
                ('verified', models.BooleanField(default=False)),
                ('verified_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_skills', to='hr_core.employee')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='skill_verifications', to=settings.AUTH_USER_MODEL)),
                ('skill', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_skills', to='hr_core.skill')),
            ],
            options={
                'verbose_name': 'Employee Skill',
                'verbose_name_plural': 'Employee Skills',
                'ordering': ['-is_primary', 'skill__name'],
                'unique_together': {('employee', 'skill')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='timeoffbalance',
            unique_together={('employee', 'time_off_type', 'year')},
        ),
    ]
