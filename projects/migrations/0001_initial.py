# Generated by Django 5.2.7 on 2026-01-18 07:40

import django.contrib.postgres.fields
import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('tenant_profiles', '0001_initial'),
        ('tenants', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ProjectCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('slug', models.SlugField(max_length=120, unique=True)),
                ('description', models.TextField(blank=True)),
                ('icon', models.CharField(blank=True, help_text='Phosphor icon name (e.g., "ph-code", "ph-palette")', max_length=50)),
                ('color', models.CharField(default='#3B82F6', help_text='Hex color code for category badge', max_length=7)),
                ('project_count', models.PositiveIntegerField(default=0)),
                ('display_order', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='projects.projectcategory')),
            ],
            options={
                'verbose_name': 'Project Category',
                'verbose_name_plural': 'Project Categories',
                'ordering': ['display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Project',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(help_text='Detailed project description, goals, and expectations')),
                ('short_description', models.CharField(blank=True, help_text='Brief summary for listings', max_length=500)),
                ('required_skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), default=list, help_text='Array of required skill keywords', size=None)),
                ('experience_level', models.CharField(choices=[('JUNIOR', 'Junior (0-2 years)'), ('MID', 'Mid-level (2-5 years)'), ('SENIOR', 'Senior (5+ years)'), ('EXPERT', 'Expert/Lead (10+ years)')], default='MID', max_length=20)),
                ('start_date', models.DateField(blank=True, help_text='Desired start date', null=True)),
                ('end_date', models.DateField(blank=True, help_text='Expected completion date', null=True)),
                ('estimated_duration_weeks', models.PositiveIntegerField(blank=True, help_text='Estimated duration in weeks', null=True)),
                ('deadline', models.DateField(blank=True, help_text='Hard deadline (if applicable)', null=True)),
                ('budget_type', models.CharField(choices=[('FIXED', 'Fixed Price'), ('MILESTONES', 'Milestone-based'), ('TIME_MATERIALS', 'Time & Materials'), ('NEGOTIABLE', 'Negotiable')], default='FIXED', max_length=20)),
                ('budget_min', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('budget_max', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('budget_currency', models.CharField(default='CAD', max_length=3)),
                ('deliverables', models.JSONField(default=list, help_text='Array of expected deliverables with descriptions')),
                ('location_type', models.CharField(choices=[('REMOTE', 'Remote'), ('ONSITE', 'On-site'), ('HYBRID', 'Hybrid')], default='REMOTE', max_length=20)),
                ('location_city', models.CharField(blank=True, max_length=100)),
                ('location_country', models.CharField(blank=True, max_length=100)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('OPEN', 'Open for Proposals'), ('IN_PROGRESS', 'In Progress'), ('REVIEW', 'Under Review'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('ON_HOLD', 'On Hold')], default='DRAFT', max_length=20)),
                ('is_published', models.BooleanField(default=False)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('published_to_catalog', models.BooleanField(default=False, help_text='Synced to public catalog')),
                ('assigned_at', models.DateTimeField(blank=True, null=True)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('contact_person', models.CharField(blank=True, max_length=200)),
                ('max_proposals', models.PositiveIntegerField(default=20, help_text='Maximum number of proposals to accept')),
                ('proposal_deadline', models.DateTimeField(blank=True, help_text='Deadline for submitting proposals', null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('tenant', models.ForeignKey(help_text='Tenant that owns this record', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='tenants.tenant')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='projects', to='projects.projectcategory')),
            ],
            options={
                'verbose_name': 'Project',
                'verbose_name_plural': 'Projects',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProjectContract',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('currency', models.CharField(default='CAD', max_length=3)),
                ('payment_terms', models.TextField(help_text='Payment schedule and conditions')),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('terms_and_conditions', models.TextField()),
                ('scope_of_work', models.TextField()),
                ('deliverables', models.JSONField(default=list, help_text='Array of agreed deliverables')),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PENDING_SIGNATURE', 'Pending Signature'), ('ACTIVE', 'Active'), ('COMPLETED', 'Completed'), ('TERMINATED', 'Terminated')], default='DRAFT', max_length=20)),
                ('client_signed_at', models.DateTimeField(blank=True, null=True)),
                ('provider_signed_at', models.DateTimeField(blank=True, null=True)),
                ('fully_executed_at', models.DateTimeField(blank=True, help_text='When both parties signed', null=True)),
                ('terminated_at', models.DateTimeField(blank=True, null=True)),
                ('termination_reason', models.TextField(blank=True)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contracts', to='projects.project')),
            ],
            options={
                'verbose_name': 'Project Contract',
                'verbose_name_plural': 'Project Contracts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='project',
            name='contract',
            field=models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='project_assignment', to='projects.projectcontract'),
        ),
        migrations.CreateModel(
            name='ProjectMilestone',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('order', models.PositiveIntegerField(default=0, help_text='Sequential order of milestone')),
                ('deliverables', models.JSONField(default=list, help_text='Array of deliverable descriptions')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('currency', models.CharField(default='CAD', max_length=3)),
                ('due_date', models.DateField()),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('IN_PROGRESS', 'In Progress'), ('SUBMITTED', 'Submitted for Review'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('PAID', 'Paid')], default='PENDING', max_length=20)),
                ('reviewer_notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('contract', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='milestones', to='projects.projectcontract')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='milestones', to='projects.project')),
            ],
            options={
                'verbose_name': 'Project Milestone',
                'verbose_name_plural': 'Project Milestones',
                'ordering': ['project', 'order'],
            },
        ),
        migrations.CreateModel(
            name='ProjectDeliverable',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('file_url', models.URLField(help_text='URL to uploaded file (S3, etc.)')),
                ('file_name', models.CharField(max_length=255)),
                ('file_size', models.PositiveIntegerField(help_text='File size in bytes')),
                ('file_type', models.CharField(max_length=100)),
                ('submitted_at', models.DateTimeField(auto_now_add=True)),
                ('is_approved', models.BooleanField(default=False)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('reviewer_notes', models.TextField(blank=True)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliverables', to='projects.project')),
                ('submitted_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submitted_deliverables', to=settings.AUTH_USER_MODEL)),
                ('milestone', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='deliverables', to='projects.projectmilestone')),
            ],
            options={
                'verbose_name': 'Project Deliverable',
                'verbose_name_plural': 'Project Deliverables',
                'ordering': ['-submitted_at'],
            },
        ),
        migrations.CreateModel(
            name='ProjectProposal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('cover_letter', models.TextField(help_text='Why you are perfect for this project')),
                ('approach', models.TextField(help_text='Your proposed methodology and approach')),
                ('proposed_budget', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('budget_currency', models.CharField(default='CAD', max_length=3)),
                ('proposed_duration_weeks', models.PositiveIntegerField()),
                ('proposed_start_date', models.DateField(blank=True, null=True)),
                ('proposed_completion_date', models.DateField(blank=True, null=True)),
                ('proposed_milestones', models.JSONField(blank=True, default=list, help_text='Array of proposed milestone objects')),
                ('portfolio_links', models.JSONField(blank=True, default=list, help_text='Array of relevant portfolio URLs')),
                ('attachments', models.JSONField(blank=True, default=list, help_text='Array of attachment file URLs')),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('UNDER_REVIEW', 'Under Review'), ('SHORTLISTED', 'Shortlisted'), ('ACCEPTED', 'Accepted'), ('REJECTED', 'Rejected'), ('WITHDRAWN', 'Withdrawn')], default='DRAFT', max_length=20)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('accepted_at', models.DateTimeField(blank=True, null=True)),
                ('rejected_at', models.DateTimeField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('questionnaire_responses', models.JSONField(blank=True, default=dict, help_text='Answers to project-specific questions')),
                ('freelancer_profile', models.ForeignKey(blank=True, help_text='If provider is individual freelancer', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project_proposals', to='tenant_profiles.freelancerprofile')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proposals', to='projects.project')),
            ],
            options={
                'verbose_name': 'Project Proposal',
                'verbose_name_plural': 'Project Proposals',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='projectcontract',
            name='proposal',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='contract', to='projects.projectproposal'),
        ),
        migrations.CreateModel(
            name='ProjectProvider',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('tagline', models.CharField(blank=True, max_length=200)),
                ('skills', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, help_text='Array of skill keywords', size=None)),
                ('portfolio_url', models.URLField(blank=True)),
                ('portfolio_images', models.JSONField(blank=True, default=list, help_text='Array of image URLs')),
                ('city', models.CharField(blank=True, max_length=100)),
                ('country', models.CharField(blank=True, max_length=100)),
                ('remote_only', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('is_accepting_projects', models.BooleanField(default=True)),
                ('max_concurrent_projects', models.PositiveIntegerField(default=3)),
                ('completed_projects', models.PositiveIntegerField(default=0)),
                ('total_earnings', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('average_rating', models.DecimalField(blank=True, decimal_places=2, max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('total_reviews', models.PositiveIntegerField(default=0)),
                ('is_verified', models.BooleanField(default=False)),
                ('verification_date', models.DateTimeField(blank=True, null=True)),
                ('categories', models.ManyToManyField(related_name='providers', to='projects.projectcategory')),
                ('tenant', models.ForeignKey(help_text='Tenant that owns this record', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='tenants.tenant')),
            ],
            options={
                'verbose_name': 'Project Provider',
                'verbose_name_plural': 'Project Providers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='projectproposal',
            name='provider',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='proposals', to='projects.projectprovider'),
        ),
        migrations.AddField(
            model_name='projectcontract',
            name='provider',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contracts', to='projects.projectprovider'),
        ),
        migrations.AddField(
            model_name='project',
            name='assigned_provider',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_projects', to='projects.projectprovider'),
        ),
        migrations.CreateModel(
            name='ProjectReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when record was last updated')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('reviewer_type', models.CharField(choices=[('CLIENT', 'Client reviewing Provider'), ('PROVIDER', 'Provider reviewing Client')], max_length=20)),
                ('rating', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('communication_rating', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('quality_rating', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('timeliness_rating', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('professionalism_rating', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('title', models.CharField(max_length=200)),
                ('review', models.TextField()),
                ('is_public', models.BooleanField(default=True)),
                ('is_featured', models.BooleanField(default=False)),
                ('response', models.TextField(blank=True)),
                ('responded_at', models.DateTimeField(blank=True, null=True)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='projects.project')),
                ('reviewer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='project_reviews_given', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Project Review',
                'verbose_name_plural': 'Project Reviews',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='projectcategory',
            index=models.Index(fields=['slug'], name='projects_pr_slug_869116_idx'),
        ),
        migrations.AddIndex(
            model_name='projectcategory',
            index=models.Index(fields=['parent', 'display_order'], name='projects_pr_parent__0c9b3b_idx'),
        ),
        migrations.AddIndex(
            model_name='projectmilestone',
            index=models.Index(fields=['project', 'order'], name='projects_pr_project_942287_idx'),
        ),
        migrations.AddIndex(
            model_name='projectmilestone',
            index=models.Index(fields=['status', 'due_date'], name='projects_pr_status_7fb6e6_idx'),
        ),
        migrations.AddIndex(
            model_name='projectdeliverable',
            index=models.Index(fields=['project', '-submitted_at'], name='projects_pr_project_133c1a_idx'),
        ),
        migrations.AddIndex(
            model_name='projectdeliverable',
            index=models.Index(fields=['milestone', 'is_approved'], name='projects_pr_milesto_e6191b_idx'),
        ),
        migrations.AddIndex(
            model_name='projectprovider',
            index=models.Index(fields=['tenant', 'is_active'], name='projects_pr_tenant__444a0f_idx'),
        ),
        migrations.AddIndex(
            model_name='projectprovider',
            index=models.Index(fields=['is_accepting_projects', '-average_rating'], name='projects_pr_is_acce_74871a_idx'),
        ),
        migrations.AddIndex(
            model_name='projectproposal',
            index=models.Index(fields=['project', 'status'], name='projects_pr_project_e3eb79_idx'),
        ),
        migrations.AddIndex(
            model_name='projectproposal',
            index=models.Index(fields=['provider', 'status'], name='projects_pr_provide_f51d5e_idx'),
        ),
        migrations.AddIndex(
            model_name='projectproposal',
            index=models.Index(fields=['-submitted_at'], name='projects_pr_submitt_582d96_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='projectproposal',
            unique_together={('project', 'provider')},
        ),
        migrations.AddIndex(
            model_name='projectcontract',
            index=models.Index(fields=['project', 'status'], name='projects_pr_project_46de51_idx'),
        ),
        migrations.AddIndex(
            model_name='projectcontract',
            index=models.Index(fields=['provider', 'status'], name='projects_pr_provide_f8d73b_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['tenant', 'status'], name='projects_pr_tenant__3f3849_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['status', 'published_at'], name='projects_pr_status_4f4716_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['category', 'status'], name='projects_pr_categor_b7ef12_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['-created_at'], name='projects_pr_created_775fe7_idx'),
        ),
        migrations.AddIndex(
            model_name='projectreview',
            index=models.Index(fields=['project', 'reviewer_type'], name='projects_pr_project_3da52d_idx'),
        ),
        migrations.AddIndex(
            model_name='projectreview',
            index=models.Index(fields=['rating', '-created_at'], name='projects_pr_rating_e652fe_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='projectreview',
            unique_together={('project', 'reviewer', 'reviewer_type')},
        ),
    ]
